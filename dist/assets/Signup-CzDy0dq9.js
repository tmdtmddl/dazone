import{r,e as q,c as G,j as e}from"./index-Dp55R4ab.js";import{T as m}from"./input-BpfK-2in.js";import{F as H}from"./Form-BNsRBQ73.js";const J=o=>{const p=Array.from({length:o},()=>9);let t="",s="";p.map((h,n)=>{t=t+h.toString(),n===0?s="1":s=s+"0"});const c=Number(t),b=Number(s);return Math.floor(Math.random()*(c-b+1))+b},Q=()=>{const[o,p]=r.useState(""),[t,s]=r.useState(""),[c,b]=r.useState(""),[x,h]=r.useState(""),[n,M]=r.useState(""),[g,z]=r.useState(""),j=r.useRef(null),v=r.useRef(null),N=r.useRef(null),w=r.useRef(null),u=r.useRef(null),[a,A]=r.useState(!1),l=()=>{const i=J(6).toString();z(i)},C=r.useCallback(()=>{var i,f,d;return g.length===0?(l(),alert("인증번호가 재 전송되었습니다."),(i=u.current)==null||i.focus(),!1):n.length!==6?(alert("인증번호는 6자리 입니다."),(f=u.current)==null||f.focus(),!1):n!==g?(alert("인증번호가 일치하지 않습니다."),(d=u.current)==null||d.focus(),!1):(alert("인증되었습니다."),!0)},[n,g,l]),{signup:R}=q(),S=G(),B=r.useCallback(async()=>{var f,d,y,T,k,E,P,F,V;if(!a)return((f=j.current)==null?void 0:f.message)==="code 0"?(alert("이름을 확인해주세요."),(d=j.current)==null?void 0:d.focus()):((y=w.current)==null?void 0:y.message)==="code 0"?(alert("이메일을 확인해주세요."),(T=w.current)==null?void 0:T.focus()):((k=v.current)==null?void 0:k.message)==="code 0"?(alert("비밀번호를 확인해주세요."),(E=v.current)==null?void 0:E.focus()):((P=N.current)==null?void 0:P.message)==="code 0"?(alert("비밀번호를 한 번 더 확인해주세요."),(F=N.current)==null?void 0:F.focus()):t!==c?alert("비밀번호가 일치하지 않습니다."):(l(),A(!0),(V=u.current)==null?void 0:V.focus());if(C()){const D={email:o,name:x,uid:"",address:null},{message:I,success:U}=await R(D,t);if(!U&&I)return alert(I);alert("회원가입을 축하합니다."),S("/")}},[a,o,x,t,c,l,C,R,S]);return e.jsx("div",{className:"max-w-100 p-5 mt-5 mx-auto border dark:border-darkBorder border-border rounded",children:e.jsxs(H,{onSubmit:B,children:[e.jsx("h1",{className:"text-2xl font-bold",children:a?"인증하기":"회원가입"}),a?e.jsx(e.Fragment,{children:e.jsx(m,{id:"verificationCode",label:"인증번호",onChangeText:M,ref:u,value:n,placeholder:"인증번호를 입력하세요."})}):e.jsxs(e.Fragment,{children:[e.jsx(m,{id:"name",label:"이름",onChangeText:h,ref:j,value:x,placeholder:"박보검"}),e.jsx(m,{id:"email",label:"이메일",onChangeText:p,ref:w,value:o,placeholder:"email@dazone.com"}),e.jsx(m,{id:"password",label:"비밀번호",onChangeText:s,ref:v,value:t,placeholder:"* * * * * * * *",type:"password"}),e.jsx(m,{id:"confirmPassword",label:"비밀번호 확인",onChangeText:b,ref:N,value:c,placeholder:"* * * * * * * *",type:"password"})]}),e.jsx("button",{className:"btn",children:a?"회원가입":"인증하기"}),a&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{type:"button",className:"btn border",onClick:l,children:"RE-SEND"}),!1]})]})})};export{Q as default};
