const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-BYK3haEP.js","assets/prouct.query-DFPNwANg.js","assets/ProductItem-1C3bp4ew.js","assets/pricfy-QJrL3HHz.js","assets/Product-BNfuaHSy.js","assets/MyAccount-CGptxMx0.js","assets/input-BpfK-2in.js","assets/Form-BNsRBQ73.js","assets/index-BQZluWPf.js","assets/v4-C6aID195.js","assets/Cart-BATjISef.js","assets/orderquery-CfNuMZaa.js","assets/RootLayout-Bz4lrHsx.js","assets/index-BVpbCNk8.js","assets/ProdctDetail-DaMidinu.js","assets/Signup-CzDy0dq9.js","assets/Order-BRw49JZ7.js"])))=>i.map(i=>d[i]);
var aA=n=>{throw TypeError(n)};var dv=(n,e,t)=>e.has(n)||aA("Cannot "+t);var L=(n,e,t)=>(dv(n,e,"read from private field"),t?t.call(n):e.get(n)),xe=(n,e,t)=>e.has(n)?aA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Te=(n,e,t,r)=>(dv(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Be=(n,e,t)=>(dv(n,e,"access private method"),t);var hm=(n,e,t,r)=>({set _(s){Te(n,e,s,t)},get _(){return L(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function JE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fv={exports:{}},od={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA;function ck(){if(oA)return od;oA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return od.Fragment=e,od.jsx=t,od.jsxs=t,od}var lA;function hk(){return lA||(lA=1,fv.exports=ck()),fv.exports}var qe=hk(),pv={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function dk(){if(uA)return Fe;uA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,V={};function N(O,te,_e){this.props=O,this.context=te,this.refs=V,this.updater=_e||I}N.prototype.isReactComponent={},N.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function B(){}B.prototype=N.prototype;function Y(O,te,_e){this.props=O,this.context=te,this.refs=V,this.updater=_e||I}var H=Y.prototype=new B;H.constructor=Y,C(H,N.prototype),H.isPureReactComponent=!0;var se=Array.isArray,ie={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function x(O,te,_e,fe,pe,Pe){return _e=Pe.ref,{$$typeof:n,type:O,key:te,ref:_e!==void 0?_e:null,props:Pe}}function R(O,te){return x(O.type,te,void 0,void 0,void 0,O.props)}function S(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function D(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(_e){return te[_e]})}var M=/\/+/g;function z(O,te){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):te.toString(36)}function k(){}function Ee(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(k,k):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function de(O,te,_e,fe,pe){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Ne=!1;if(O===null)Ne=!0;else switch(Pe){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(O.$$typeof){case n:case e:Ne=!0;break;case _:return Ne=O._init,de(Ne(O._payload),te,_e,fe,pe)}}if(Ne)return pe=pe(O),Ne=fe===""?"."+z(O,0):fe,se(pe)?(_e="",Ne!=null&&(_e=Ne.replace(M,"$&/")+"/"),de(pe,te,_e,"",function(ot){return ot})):pe!=null&&(S(pe)&&(pe=R(pe,_e+(pe.key==null||O&&O.key===pe.key?"":(""+pe.key).replace(M,"$&/")+"/")+Ne)),te.push(pe)),1;Ne=0;var nt=fe===""?".":fe+":";if(se(O))for(var je=0;je<O.length;je++)fe=O[je],Pe=nt+z(fe,je),Ne+=de(fe,te,_e,Pe,pe);else if(je=b(O),typeof je=="function")for(O=je.call(O),je=0;!(fe=O.next()).done;)fe=fe.value,Pe=nt+z(fe,je++),Ne+=de(fe,te,_e,Pe,pe);else if(Pe==="object"){if(typeof O.then=="function")return de(Ee(O),te,_e,fe,pe);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function q(O,te,_e){if(O==null)return O;var fe=[],pe=0;return de(O,fe,"","",function(Pe){return te.call(_e,Pe,pe++)}),fe}function oe(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(_e){(O._status===0||O._status===-1)&&(O._status=1,O._result=_e)},function(_e){(O._status===0||O._status===-1)&&(O._status=2,O._result=_e)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var ee=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function me(){}return Fe.Children={map:q,forEach:function(O,te,_e){q(O,function(){te.apply(this,arguments)},_e)},count:function(O){var te=0;return q(O,function(){te++}),te},toArray:function(O){return q(O,function(te){return te})||[]},only:function(O){if(!S(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Fe.Component=N,Fe.Fragment=t,Fe.Profiler=s,Fe.PureComponent=Y,Fe.StrictMode=r,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Fe.act=function(){throw Error("act(...) is not supported in production builds of React.")},Fe.cache=function(O){return function(){return O.apply(null,arguments)}},Fe.cloneElement=function(O,te,_e){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var fe=C({},O.props),pe=O.key,Pe=void 0;if(te!=null)for(Ne in te.ref!==void 0&&(Pe=void 0),te.key!==void 0&&(pe=""+te.key),te)!X.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(fe[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)fe.children=_e;else if(1<Ne){for(var nt=Array(Ne),je=0;je<Ne;je++)nt[je]=arguments[je+2];fe.children=nt}return x(O.type,pe,void 0,void 0,Pe,fe)},Fe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},Fe.createElement=function(O,te,_e){var fe,pe={},Pe=null;if(te!=null)for(fe in te.key!==void 0&&(Pe=""+te.key),te)X.call(te,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(pe[fe]=te[fe]);var Ne=arguments.length-2;if(Ne===1)pe.children=_e;else if(1<Ne){for(var nt=Array(Ne),je=0;je<Ne;je++)nt[je]=arguments[je+2];pe.children=nt}if(O&&O.defaultProps)for(fe in Ne=O.defaultProps,Ne)pe[fe]===void 0&&(pe[fe]=Ne[fe]);return x(O,Pe,void 0,void 0,null,pe)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(O){return{$$typeof:h,render:O}},Fe.isValidElement=S,Fe.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:oe}},Fe.memo=function(O,te){return{$$typeof:m,type:O,compare:te===void 0?null:te}},Fe.startTransition=function(O){var te=ie.T,_e={};ie.T=_e;try{var fe=O(),pe=ie.S;pe!==null&&pe(_e,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(me,ee)}catch(Pe){ee(Pe)}finally{ie.T=te}},Fe.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Fe.use=function(O){return ie.H.use(O)},Fe.useActionState=function(O,te,_e){return ie.H.useActionState(O,te,_e)},Fe.useCallback=function(O,te){return ie.H.useCallback(O,te)},Fe.useContext=function(O){return ie.H.useContext(O)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(O,te){return ie.H.useDeferredValue(O,te)},Fe.useEffect=function(O,te){return ie.H.useEffect(O,te)},Fe.useId=function(){return ie.H.useId()},Fe.useImperativeHandle=function(O,te,_e){return ie.H.useImperativeHandle(O,te,_e)},Fe.useInsertionEffect=function(O,te){return ie.H.useInsertionEffect(O,te)},Fe.useLayoutEffect=function(O,te){return ie.H.useLayoutEffect(O,te)},Fe.useMemo=function(O,te){return ie.H.useMemo(O,te)},Fe.useOptimistic=function(O,te){return ie.H.useOptimistic(O,te)},Fe.useReducer=function(O,te,_e){return ie.H.useReducer(O,te,_e)},Fe.useRef=function(O){return ie.H.useRef(O)},Fe.useState=function(O){return ie.H.useState(O)},Fe.useSyncExternalStore=function(O,te,_e){return ie.H.useSyncExternalStore(O,te,_e)},Fe.useTransition=function(){return ie.H.useTransition()},Fe.version="19.0.0",Fe}var cA;function eT(){return cA||(cA=1,pv.exports=dk()),pv.exports}var K=eT();const Ts=JE(K);var mv={exports:{}},ld={},gv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function fk(){return hA||(hA=1,function(n){function e(q,oe){var ee=q.length;q.push(oe);e:for(;0<ee;){var me=ee-1>>>1,O=q[me];if(0<s(O,oe))q[me]=oe,q[ee]=O,ee=me;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var oe=q[0],ee=q.pop();if(ee!==oe){q[0]=ee;e:for(var me=0,O=q.length,te=O>>>1;me<te;){var _e=2*(me+1)-1,fe=q[_e],pe=_e+1,Pe=q[pe];if(0>s(fe,ee))pe<O&&0>s(Pe,fe)?(q[me]=Pe,q[pe]=ee,me=pe):(q[me]=fe,q[_e]=ee,me=_e);else if(pe<O&&0>s(Pe,ee))q[me]=Pe,q[pe]=ee,me=pe;else break e}}return oe}function s(q,oe){var ee=q.sortIndex-oe.sortIndex;return ee!==0?ee:q.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],m=[],_=1,v=null,b=3,I=!1,C=!1,V=!1,N=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function H(q){for(var oe=t(m);oe!==null;){if(oe.callback===null)r(m);else if(oe.startTime<=q)r(m),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(m)}}function se(q){if(V=!1,H(q),!C)if(t(d)!==null)C=!0,Ee();else{var oe=t(m);oe!==null&&de(se,oe.startTime-q)}}var ie=!1,X=-1,x=5,R=-1;function S(){return!(n.unstable_now()-R<x)}function D(){if(ie){var q=n.unstable_now();R=q;var oe=!0;try{e:{C=!1,V&&(V=!1,B(X),X=-1),I=!0;var ee=b;try{t:{for(H(q),v=t(d);v!==null&&!(v.expirationTime>q&&S());){var me=v.callback;if(typeof me=="function"){v.callback=null,b=v.priorityLevel;var O=me(v.expirationTime<=q);if(q=n.unstable_now(),typeof O=="function"){v.callback=O,H(q),oe=!0;break t}v===t(d)&&r(d),H(q)}else r(d);v=t(d)}if(v!==null)oe=!0;else{var te=t(m);te!==null&&de(se,te.startTime-q),oe=!1}}break e}finally{v=null,b=ee,I=!1}oe=void 0}}finally{oe?M():ie=!1}}}var M;if(typeof Y=="function")M=function(){Y(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,k=z.port2;z.port1.onmessage=D,M=function(){k.postMessage(null)}}else M=function(){N(D,0)};function Ee(){ie||(ie=!0,M())}function de(q,oe){X=N(function(){q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){C||I||(C=!0,Ee())},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var ee=b;b=oe;try{return q()}finally{b=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=b;b=q;try{return oe()}finally{b=ee}},n.unstable_scheduleCallback=function(q,oe,ee){var me=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,q={id:_++,callback:oe,priorityLevel:q,startTime:ee,expirationTime:O,sortIndex:-1},ee>me?(q.sortIndex=ee,e(m,q),t(d)===null&&q===t(m)&&(V?(B(X),X=-1):V=!0,de(se,ee-me))):(q.sortIndex=O,e(d,q),C||I||(C=!0,Ee())),q},n.unstable_shouldYield=S,n.unstable_wrapCallback=function(q){var oe=b;return function(){var ee=b;b=oe;try{return q.apply(this,arguments)}finally{b=ee}}}}(_v)),_v}var dA;function pk(){return dA||(dA=1,gv.exports=fk()),gv.exports}var yv={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function mk(){if(fA)return Pn;fA=1;var n=eT();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(d,m,null,_)},Pn.flushSync=function(d){var m=u.T,_=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=m,r.p=_,r.d.f()}},Pn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(d,m))},Pn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Pn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?r.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:I}):_==="script"&&r.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Pn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);r.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(d)},Pn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);r.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Pn.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);r.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(d)},Pn.requestFormReset=function(d){r.d.r(d)},Pn.unstable_batchedUpdates=function(d,m){return d(m)},Pn.useFormState=function(d,m,_){return u.H.useFormState(d,m,_)},Pn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pn.version="19.0.0",Pn}var pA;function gk(){if(pA)return yv.exports;pA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yv.exports=mk(),yv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA;function _k(){if(mA)return ld;mA=1;var n=pk(),e=eT(),t=gk();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),se=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function X(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function R(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case d:return"Fragment";case h:return"Portal";case _:return"Profiler";case m:return"StrictMode";case V:return"Suspense";case N:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case I:return(i.displayName||"Context")+".Provider";case b:return(i._context.displayName||"Context")+".Consumer";case C:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return a=i.displayName||null,a!==null?a:R(i.type)||"Memo";case Y:a=i._payload,i=i._init;try{return R(i(a))}catch{}}return null}var S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,M,z;function k(i){if(M===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||"",z=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+i+z}var Ee=!1;function de(i,a){if(!i||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var W=ne}Reflect.construct(i,[],ue)}else{try{ue.call()}catch(ne){W=ne}i.call(ue.prototype)}}else{try{throw Error()}catch(ne){W=ne}(ue=i())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&W&&typeof ne.stack=="string")return[ne.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],w=g[1];if(T&&w){var P=T.split(`
`),F=w.split(`
`);for(p=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;if(c===P.length||p===F.length)for(c=P.length-1,p=F.length-1;1<=c&&0<=p&&P[c]!==F[p];)p--;for(;1<=c&&0<=p;c--,p--)if(P[c]!==F[p]){if(c!==1||p!==1)do if(c--,p--,0>p||P[c]!==F[p]){var re=`
`+P[c].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=c&&0<=p);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?k(l):""}function q(i){switch(i.tag){case 26:case 27:case 5:return k(i.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function oe(i){try{var a="";do a+=q(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ee(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function me(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function O(i){if(ee(i)!==i)throw Error(r(188))}function te(i){var a=i.alternate;if(!a){if(a=ee(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return O(p),i;if(g===c)return O(p),a;g=g.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=g;else{for(var T=!1,w=p.child;w;){if(w===l){T=!0,l=p,c=g;break}if(w===c){T=!0,c=p,l=g;break}w=w.sibling}if(!T){for(w=g.child;w;){if(w===l){T=!0,l=g,c=p;break}if(w===c){T=!0,c=g,l=p;break}w=w.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function _e(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=_e(i),a!==null)return a;i=i.sibling}return null}var fe=Array.isArray,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},Ne=[],nt=-1;function je(i){return{current:i}}function ot(i){0>nt||(i.current=Ne[nt],Ne[nt]=null,nt--)}function Me(i,a){nt++,Ne[nt]=i.current,i.current=a}var Tt=je(null),Un=je(null),vn=je(null),qs=je(null);function js(i,a){switch(Me(vn,a),Me(Un,i),Me(Tt,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?V0(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=V0(i),a=M0(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ot(Tt),Me(Tt,a)}function qi(){ot(Tt),ot(Un),ot(vn)}function nh(i){i.memoizedState!==null&&Me(qs,i);var a=Tt.current,l=M0(a,i.type);a!==l&&(Me(Un,i),Me(Tt,l))}function jl(i){Un.current===i&&(ot(Tt),ot(Un)),qs.current===i&&(ot(qs),nd._currentValue=Pe)}var Hl=Object.prototype.hasOwnProperty,_o=n.unstable_scheduleCallback,Gl=n.unstable_cancelCallback,p_=n.unstable_shouldYield,rh=n.unstable_requestPaint,Xn=n.unstable_now,Hf=n.unstable_getCurrentPriorityLevel,Zt=n.unstable_ImmediatePriority,ln=n.unstable_UserBlockingPriority,ji=n.unstable_NormalPriority,Gf=n.unstable_LowPriority,ih=n.unstable_IdlePriority,m_=n.log,yo=n.unstable_setDisableYieldValue,Hs=null,Cn=null;function sh(i){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Hs,i,void 0,(i.current.flags&128)===128)}catch{}}function ni(i){if(typeof m_=="function"&&yo(i),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(Hs,i)}catch{}}var Fn=Math.clz32?Math.clz32:Kf,ah=Math.log,$f=Math.LN2;function Kf(i){return i>>>=0,i===0?32:31-(ah(i)/$f|0)|0}var ri=128,Gs=4194304;function qr(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function vr(i,a){var l=i.pendingLanes;if(l===0)return 0;var c=0,p=i.suspendedLanes,g=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var w=l&134217727;return w!==0?(l=w&~p,l!==0?c=qr(l):(g&=w,g!==0?c=qr(g):i||(T=w&~T,T!==0&&(c=qr(T))))):(w=l&~p,w!==0?c=qr(w):g!==0?c=qr(g):i||(T=l&~T,T!==0&&(c=qr(T)))),c===0?0:a!==0&&a!==c&&(a&p)===0&&(p=c&-c,T=a&-a,p>=T||p===32&&(T&4194176)!==0)?a:c}function $s(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function $l(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oh(){var i=ri;return ri<<=1,(ri&4194176)===0&&(ri=128),i}function Ks(){var i=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),i}function Kl(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function qt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qf(i,a,l,c,p,g){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var w=i.entanglements,P=i.expirationTimes,F=i.hiddenUpdates;for(l=T&~l;0<l;){var re=31-Fn(l),ue=1<<re;w[re]=0,P[re]=-1;var W=F[re];if(W!==null)for(F[re]=null,re=0;re<W.length;re++){var ne=W[re];ne!==null&&(ne.lane&=-536870913)}l&=~ue}c!==0&&Qs(i,c,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~a))}function Qs(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-Fn(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194218}function Ws(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-Fn(l),p=1<<c;p&a|i[c]&a&&(i[c]|=a),l&=~p}}function Wf(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Yf(){var i=pe.p;return i!==0?i:(i=window.event,i===void 0?32:eA(i.type))}function Ys(i,a){var l=pe.p;try{return pe.p=i,a()}finally{pe.p=l}}var ii=Math.random().toString(36).slice(2),un="__reactFiber$"+ii,Jt="__reactProps$"+ii,Hi="__reactContainer$"+ii,vo="__reactEvents$"+ii,Ql="__reactListeners$"+ii,si="__reactHandles$"+ii,lh="__reactResources$"+ii,Xs="__reactMarker$"+ii;function Eo(i){delete i[un],delete i[Jt],delete i[vo],delete i[Ql],delete i[si]}function jr(i){var a=i[un];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Hi]||l[un]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=F0(i);i!==null;){if(l=i[un])return l;i=F0(i)}return a}i=l,l=i.parentNode}return null}function Gi(i){if(i=i[un]||i[Hi]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Zs(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Js(i){var a=i[lh];return a||(a=i[lh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(i){i[Xs]=!0}var uh=new Set,Wl={};function or(i,a){Zn(i,a),Zn(i+"Capture",a)}function Zn(i,a){for(Wl[i]=a,i=0;i<a.length;i++)uh.add(a[i])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ch={},hh={};function Xf(i){return Hl.call(hh,i)?!0:Hl.call(ch,i)?!1:g_.test(i)?hh[i]=!0:(ch[i]=!0,!1)}function ea(i,a,l){if(Xf(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function ta(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Er(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Zf(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function __(i){var a=Zf(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function To(i){i._valueTracker||(i._valueTracker=__(i))}function dh(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Zf(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function Yl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var $i=/[\n"\\]/g;function kt(i){return i.replace($i,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function na(i,a,l,c,p,g,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Bn(a)):i.value!==""+Bn(a)&&(i.value=""+Bn(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?Xl(i,T,Bn(a)):l!=null?Xl(i,T,Bn(l)):c!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Bn(w):i.removeAttribute("name")}function bo(i,a,l,c,p,g,T,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+Bn(l):"",a=a!=null?""+Bn(a):l,w||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Xl(i,a,l){a==="number"&&Yl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function rt(i,a,l,c){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&c&&(i[l].defaultSelected=!0)}else{for(l=""+Bn(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function wo(i,a,l){if(a!=null&&(a=""+Bn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Bn(l):""}function ra(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(fe(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=Bn(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function Tr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var y_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fh(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||y_.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Jf(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&fh(i,p,c)}else for(var g in a)a.hasOwnProperty(g)&&fh(i,g,a[g])}function ph(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ai(i){return E_.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var br=null;function Zl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ki=null,Qi=null;function Wi(i){var a=Gi(i);if(a&&(i=a.stateNode)){var l=i[Jt]||null;e:switch(i=a.stateNode,a.type){case"input":if(na(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var p=c[Jt]||null;if(!p)throw Error(r(90));na(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&dh(c)}break e;case"textarea":wo(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&rt(i,!!l.multiple,a,!1)}}}var mh=!1;function ep(i,a,l){if(mh)return i(a,l);mh=!0;try{var c=i(a);return c}finally{if(mh=!1,(Ki!==null||Qi!==null)&&(Gp(),Ki&&(a=Ki,i=Qi,Qi=Ki=null,Wi(a),i)))for(a=0;a<i.length;a++)Wi(i[a])}}function Io(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Jt]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var wr=!1;if(lr)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){wr=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{wr=!1}var oi=null,ia=null,Yi=null;function gh(){if(Yi)return Yi;var i,a=ia,l=a.length,c,p="value"in oi?oi.value:oi.textContent,g=p.length;for(i=0;i<l&&a[i]===p[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===p[g-c];c++);return Yi=p.slice(i,1<c?1-c:void 0)}function li(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ui(){return!0}function _h(){return!1}function cn(i){function a(l,c,p,g,T){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(l=i[w],this[w]=l?l(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ui:_h,this.isPropagationStopped=_h,this}return D(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),a}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=cn(lt),So=D({},lt,{view:0,detail:0}),tp=cn(So),eu,tu,ci,Ro=D({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ci&&(ci&&i.type==="mousemove"?(eu=i.screenX-ci.screenX,tu=i.screenY-ci.screenY):tu=eu=0,ci=i),eu)},movementY:function(i){return"movementY"in i?i.movementY:tu}}),Ir=cn(Ro),np=D({},Ro,{dataTransfer:0}),T_=cn(np),Co=D({},So,{relatedTarget:0}),nu=cn(Co),yh=D({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=cn(yh),rp=D({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),iu=cn(rp),b_=D({},lt,{data:0}),vh=cn(b_),Do={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=sp[i])?!!a[i]:!1}function Po(){return Eh}var ap=D({},So,{key:function(i){if(i.key){var a=Do[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=li(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ip[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(i){return i.type==="keypress"?li(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?li(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),su=cn(ap),op=D({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Th=cn(op),Xi=D({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po}),lp=cn(Xi),up=D({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),cp=cn(up),hp=D({},Ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),au=cn(hp),zn=D({},lt,{newState:0,oldState:0}),dp=cn(zn),fp=[9,13,27,32],hi=lr&&"CompositionEvent"in window,f=null;lr&&"documentMode"in document&&(f=document.documentMode);var y=lr&&"TextEvent"in window&&!f,E=lr&&(!hi||f&&8<f&&11>=f),A=" ",G=!1;function J(i,a){switch(i){case"keyup":return fp.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ge(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ze=!1;function en(i,a){switch(i){case"compositionend":return ge(a);case"keypress":return a.which!==32?null:(G=!0,A);case"textInput":return i=a.data,i===A&&G?null:i;default:return null}}function Je(i,a){if(Ze)return i==="compositionend"||!hi&&J(i,a)?(i=gh(),Yi=ia=oi=null,Ze=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!hn[i.type]:a==="textarea"}function Zi(i,a,l,c){Ki?Qi?Qi.push(c):Qi=[c]:Ki=c,a=Yp(a,"onChange"),0<a.length&&(l=new Jl("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var En=null,di=null;function bh(i){P0(i,0)}function pp(i){var a=Zs(i);if(dh(a))return i}function sw(i,a){if(i==="change")return a}var aw=!1;if(lr){var w_;if(lr){var I_="oninput"in document;if(!I_){var ow=document.createElement("div");ow.setAttribute("oninput","return;"),I_=typeof ow.oninput=="function"}w_=I_}else w_=!1;aw=w_&&(!document.documentMode||9<document.documentMode)}function lw(){En&&(En.detachEvent("onpropertychange",uw),di=En=null)}function uw(i){if(i.propertyName==="value"&&pp(di)){var a=[];Zi(a,di,i,Zl(i)),ep(bh,a)}}function Bx(i,a,l){i==="focusin"?(lw(),En=a,di=l,En.attachEvent("onpropertychange",uw)):i==="focusout"&&lw()}function zx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pp(di)}function qx(i,a){if(i==="click")return pp(a)}function jx(i,a){if(i==="input"||i==="change")return pp(a)}function Hx(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ur=typeof Object.is=="function"?Object.is:Hx;function wh(i,a){if(ur(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!Hl.call(a,p)||!ur(i[p],a[p]))return!1}return!0}function cw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hw(i,a){var l=cw(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=cw(l)}}function dw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function fw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Yl(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Yl(i.document)}return a}function A_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function Gx(i,a){var l=fw(a);a=i.focusedElem;var c=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&dw(a.ownerDocument.documentElement,a)){if(c!==null&&A_(a)){if(i=c.start,l=c.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var p=a.textContent.length,g=Math.min(c.start,p);c=c.end===void 0?g:Math.min(c.end,p),!l.extend&&g>c&&(p=c,c=g,g=p),p=hw(a,g);var T=hw(a,c);p&&T&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),l.removeAllRanges(),g>c?(l.addRange(i),l.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var $x=lr&&"documentMode"in document&&11>=document.documentMode,ou=null,S_=null,Ih=null,R_=!1;function pw(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;R_||ou==null||ou!==Yl(c)||(c=ou,"selectionStart"in c&&A_(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ih&&wh(Ih,c)||(Ih=c,c=Yp(S_,"onSelect"),0<c.length&&(a=new Jl("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=ou)))}function Oo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var lu={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},C_={},mw={};lr&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function xo(i){if(C_[i])return C_[i];if(!lu[i])return i;var a=lu[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in mw)return C_[i]=a[l];return i}var gw=xo("animationend"),_w=xo("animationiteration"),yw=xo("animationstart"),Kx=xo("transitionrun"),Qx=xo("transitionstart"),Wx=xo("transitioncancel"),vw=xo("transitionend"),Ew=new Map,Tw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Hr(i,a){Ew.set(i,a),or(a,[i])}var Ar=[],uu=0,D_=0;function mp(){for(var i=uu,a=D_=uu=0;a<i;){var l=Ar[a];Ar[a++]=null;var c=Ar[a];Ar[a++]=null;var p=Ar[a];Ar[a++]=null;var g=Ar[a];if(Ar[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}g!==0&&bw(l,p,g)}}function gp(i,a,l,c){Ar[uu++]=i,Ar[uu++]=a,Ar[uu++]=l,Ar[uu++]=c,D_|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function P_(i,a,l,c){return gp(i,a,l,c),_p(i)}function sa(i,a){return gp(i,null,null,a),_p(i)}function bw(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var p=!1,g=i.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;p&&a!==null&&i.tag===3&&(g=i.stateNode,p=31-Fn(l),g=g.hiddenUpdates,i=g[p],i===null?g[p]=[a]:i.push(a),a.lane=l|536870912)}function _p(i){if(50<Wh)throw Wh=0,My=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var cu={},ww=new WeakMap;function Sr(i,a){if(typeof i=="object"&&i!==null){var l=ww.get(i);return l!==void 0?l:(a={value:i,source:a,stack:oe(a)},ww.set(i,a),a)}return{value:i,source:a,stack:oe(a)}}var hu=[],du=0,yp=null,vp=0,Rr=[],Cr=0,No=null,Ji=1,es="";function ko(i,a){hu[du++]=vp,hu[du++]=yp,yp=i,vp=a}function Iw(i,a,l){Rr[Cr++]=Ji,Rr[Cr++]=es,Rr[Cr++]=No,No=i;var c=Ji;i=es;var p=32-Fn(c)-1;c&=~(1<<p),l+=1;var g=32-Fn(a)+p;if(30<g){var T=p-p%5;g=(c&(1<<T)-1).toString(32),c>>=T,p-=T,Ji=1<<32-Fn(a)+p|l<<p|c,es=g+i}else Ji=1<<g|l<<p|c,es=i}function O_(i){i.return!==null&&(ko(i,1),Iw(i,1,0))}function x_(i){for(;i===yp;)yp=hu[--du],hu[du]=null,vp=hu[--du],hu[du]=null;for(;i===No;)No=Rr[--Cr],Rr[Cr]=null,es=Rr[--Cr],Rr[Cr]=null,Ji=Rr[--Cr],Rr[Cr]=null}var qn=null,Tn=null,it=!1,Gr=null,fi=!1,N_=Error(r(519));function Vo(i){var a=Error(r(418,""));throw Rh(Sr(a,i)),N_}function Aw(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[un]=i,a[Jt]=c,l){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(l=0;l<Xh.length;l++)Ye(Xh[l],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),bo(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),To(a);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),ra(a,c.value,c.defaultValue,c.children),To(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||k0(a.textContent,l)?(c.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),c.onScroll!=null&&Ye("scroll",a),c.onScrollEnd!=null&&Ye("scrollend",a),c.onClick!=null&&(a.onclick=Xp),a=!0):a=!1,a||Vo(i)}function Sw(i){for(qn=i.return;qn;)switch(qn.tag){case 3:case 27:fi=!0;return;case 5:case 13:fi=!1;return;default:qn=qn.return}}function Ah(i){if(i!==qn)return!1;if(!it)return Sw(i),it=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Jy(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&Tn&&Vo(i),Sw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Tn=Kr(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Tn=null}}else Tn=qn?Kr(i.stateNode.nextSibling):null;return!0}function Sh(){Tn=qn=null,it=!1}function Rh(i){Gr===null?Gr=[i]:Gr.push(i)}var Ch=Error(r(460)),Rw=Error(r(474)),k_={then:function(){}};function Cw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ep(){}function Dw(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Ep,Ep),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Ch?Error(r(483)):i;default:if(typeof a.status=="string")a.then(Ep,Ep);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Ch?Error(r(483)):i}throw Dh=a,Ch}}var Dh=null;function Pw(){if(Dh===null)throw Error(r(459));var i=Dh;return Dh=null,i}var fu=null,Ph=0;function Tp(i){var a=Ph;return Ph+=1,fu===null&&(fu=[]),Dw(fu,i,a)}function Oh(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function bp(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Ow(i){var a=i._init;return a(i._payload)}function xw(i){function a(j,U){if(i){var Q=j.deletions;Q===null?(j.deletions=[U],j.flags|=16):Q.push(U)}}function l(j,U){if(!i)return null;for(;U!==null;)a(j,U),U=U.sibling;return null}function c(j){for(var U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function p(j,U){return j=_a(j,U),j.index=0,j.sibling=null,j}function g(j,U,Q){return j.index=Q,i?(Q=j.alternate,Q!==null?(Q=Q.index,Q<U?(j.flags|=33554434,U):Q):(j.flags|=33554434,U)):(j.flags|=1048576,U)}function T(j){return i&&j.alternate===null&&(j.flags|=33554434),j}function w(j,U,Q,ae){return U===null||U.tag!==6?(U=Cy(Q,j.mode,ae),U.return=j,U):(U=p(U,Q),U.return=j,U)}function P(j,U,Q,ae){var we=Q.type;return we===d?re(j,U,Q.props.children,ae,Q.key):U!==null&&(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Y&&Ow(we)===U.type)?(U=p(U,Q.props),Oh(U,Q),U.return=j,U):(U=Bp(Q.type,Q.key,Q.props,null,j.mode,ae),Oh(U,Q),U.return=j,U)}function F(j,U,Q,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Dy(Q,j.mode,ae),U.return=j,U):(U=p(U,Q.children||[]),U.return=j,U)}function re(j,U,Q,ae,we){return U===null||U.tag!==7?(U=Go(Q,j.mode,ae,we),U.return=j,U):(U=p(U,Q),U.return=j,U)}function ue(j,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Cy(""+U,j.mode,Q),U.return=j,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case u:return Q=Bp(U.type,U.key,U.props,null,j.mode,Q),Oh(Q,U),Q.return=j,Q;case h:return U=Dy(U,j.mode,Q),U.return=j,U;case Y:var ae=U._init;return U=ae(U._payload),ue(j,U,Q)}if(fe(U)||X(U))return U=Go(U,j.mode,Q,null),U.return=j,U;if(typeof U.then=="function")return ue(j,Tp(U),Q);if(U.$$typeof===I)return ue(j,Lp(j,U),Q);bp(j,U)}return null}function W(j,U,Q,ae){var we=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return we!==null?null:w(j,U,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:return Q.key===we?P(j,U,Q,ae):null;case h:return Q.key===we?F(j,U,Q,ae):null;case Y:return we=Q._init,Q=we(Q._payload),W(j,U,Q,ae)}if(fe(Q)||X(Q))return we!==null?null:re(j,U,Q,ae,null);if(typeof Q.then=="function")return W(j,U,Tp(Q),ae);if(Q.$$typeof===I)return W(j,U,Lp(j,Q),ae);bp(j,Q)}return null}function ne(j,U,Q,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return j=j.get(Q)||null,w(U,j,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case u:return j=j.get(ae.key===null?Q:ae.key)||null,P(U,j,ae,we);case h:return j=j.get(ae.key===null?Q:ae.key)||null,F(U,j,ae,we);case Y:var He=ae._init;return ae=He(ae._payload),ne(j,U,Q,ae,we)}if(fe(ae)||X(ae))return j=j.get(Q)||null,re(U,j,ae,we,null);if(typeof ae.then=="function")return ne(j,U,Q,Tp(ae),we);if(ae.$$typeof===I)return ne(j,U,Q,Lp(U,ae),we);bp(U,ae)}return null}function Ce(j,U,Q,ae){for(var we=null,He=null,Oe=U,ke=U=0,pn=null;Oe!==null&&ke<Q.length;ke++){Oe.index>ke?(pn=Oe,Oe=null):pn=Oe.sibling;var st=W(j,Oe,Q[ke],ae);if(st===null){Oe===null&&(Oe=pn);break}i&&Oe&&st.alternate===null&&a(j,Oe),U=g(st,U,ke),He===null?we=st:He.sibling=st,He=st,Oe=pn}if(ke===Q.length)return l(j,Oe),it&&ko(j,ke),we;if(Oe===null){for(;ke<Q.length;ke++)Oe=ue(j,Q[ke],ae),Oe!==null&&(U=g(Oe,U,ke),He===null?we=Oe:He.sibling=Oe,He=Oe);return it&&ko(j,ke),we}for(Oe=c(Oe);ke<Q.length;ke++)pn=ne(Oe,j,ke,Q[ke],ae),pn!==null&&(i&&pn.alternate!==null&&Oe.delete(pn.key===null?ke:pn.key),U=g(pn,U,ke),He===null?we=pn:He.sibling=pn,He=pn);return i&&Oe.forEach(function(Ia){return a(j,Ia)}),it&&ko(j,ke),we}function Le(j,U,Q,ae){if(Q==null)throw Error(r(151));for(var we=null,He=null,Oe=U,ke=U=0,pn=null,st=Q.next();Oe!==null&&!st.done;ke++,st=Q.next()){Oe.index>ke?(pn=Oe,Oe=null):pn=Oe.sibling;var Ia=W(j,Oe,st.value,ae);if(Ia===null){Oe===null&&(Oe=pn);break}i&&Oe&&Ia.alternate===null&&a(j,Oe),U=g(Ia,U,ke),He===null?we=Ia:He.sibling=Ia,He=Ia,Oe=pn}if(st.done)return l(j,Oe),it&&ko(j,ke),we;if(Oe===null){for(;!st.done;ke++,st=Q.next())st=ue(j,st.value,ae),st!==null&&(U=g(st,U,ke),He===null?we=st:He.sibling=st,He=st);return it&&ko(j,ke),we}for(Oe=c(Oe);!st.done;ke++,st=Q.next())st=ne(Oe,j,ke,st.value,ae),st!==null&&(i&&st.alternate!==null&&Oe.delete(st.key===null?ke:st.key),U=g(st,U,ke),He===null?we=st:He.sibling=st,He=st);return i&&Oe.forEach(function(uk){return a(j,uk)}),it&&ko(j,ke),we}function Lt(j,U,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===d&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:e:{for(var we=Q.key;U!==null;){if(U.key===we){if(we=Q.type,we===d){if(U.tag===7){l(j,U.sibling),ae=p(U,Q.props.children),ae.return=j,j=ae;break e}}else if(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Y&&Ow(we)===U.type){l(j,U.sibling),ae=p(U,Q.props),Oh(ae,Q),ae.return=j,j=ae;break e}l(j,U);break}else a(j,U);U=U.sibling}Q.type===d?(ae=Go(Q.props.children,j.mode,ae,Q.key),ae.return=j,j=ae):(ae=Bp(Q.type,Q.key,Q.props,null,j.mode,ae),Oh(ae,Q),ae.return=j,j=ae)}return T(j);case h:e:{for(we=Q.key;U!==null;){if(U.key===we)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){l(j,U.sibling),ae=p(U,Q.children||[]),ae.return=j,j=ae;break e}else{l(j,U);break}else a(j,U);U=U.sibling}ae=Dy(Q,j.mode,ae),ae.return=j,j=ae}return T(j);case Y:return we=Q._init,Q=we(Q._payload),Lt(j,U,Q,ae)}if(fe(Q))return Ce(j,U,Q,ae);if(X(Q)){if(we=X(Q),typeof we!="function")throw Error(r(150));return Q=we.call(Q),Le(j,U,Q,ae)}if(typeof Q.then=="function")return Lt(j,U,Tp(Q),ae);if(Q.$$typeof===I)return Lt(j,U,Lp(j,Q),ae);bp(j,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(l(j,U.sibling),ae=p(U,Q),ae.return=j,j=ae):(l(j,U),ae=Cy(Q,j.mode,ae),ae.return=j,j=ae),T(j)):l(j,U)}return function(j,U,Q,ae){try{Ph=0;var we=Lt(j,U,Q,ae);return fu=null,we}catch(Oe){if(Oe===Ch)throw Oe;var He=xr(29,Oe,null,j.mode);return He.lanes=ae,He.return=j,He}finally{}}}var Mo=xw(!0),Nw=xw(!1),pu=je(null),wp=je(0);function kw(i,a){i=hs,Me(wp,i),Me(pu,a),hs=i|a.baseLanes}function V_(){Me(wp,hs),Me(pu,pu.current)}function M_(){hs=wp.current,ot(pu),ot(wp)}var Dr=je(null),pi=null;function aa(i){var a=i.alternate;Me(nn,nn.current&1),Me(Dr,i),pi===null&&(a===null||pu.current!==null||a.memoizedState!==null)&&(pi=i)}function Vw(i){if(i.tag===22){if(Me(nn,nn.current),Me(Dr,i),pi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(pi=i)}}else oa()}function oa(){Me(nn,nn.current),Me(Dr,Dr.current)}function ts(i){ot(Dr),pi===i&&(pi=null),ot(nn)}var nn=je(0);function Ip(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Yx=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Xx=n.unstable_scheduleCallback,Zx=n.unstable_NormalPriority,rn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function L_(){return{controller:new Yx,data:new Map,refCount:0}}function xh(i){i.refCount--,i.refCount===0&&Xx(Zx,function(){i.controller.abort()})}var Nh=null,U_=0,mu=0,gu=null;function Jx(i,a){if(Nh===null){var l=Nh=[];U_=0,mu=Hy(),gu={status:"pending",value:void 0,then:function(c){l.push(c)}}}return U_++,a.then(Mw,Mw),a}function Mw(){if(--U_===0&&Nh!==null){gu!==null&&(gu.status="fulfilled");var i=Nh;Nh=null,mu=0,gu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function eN(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var Lw=S.S;S.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Jx(i,a),Lw!==null&&Lw(i,a)};var Lo=je(null);function F_(){var i=Lo.current;return i!==null?i:mt.pooledCache}function Ap(i,a){a===null?Me(Lo,Lo.current):Me(Lo,a.pool)}function Uw(){var i=F_();return i===null?null:{parent:rn._currentValue,pool:i}}var la=0,ze=null,dt=null,Kt=null,Sp=!1,_u=!1,Uo=!1,Rp=0,kh=0,yu=null,tN=0;function jt(){throw Error(r(321))}function B_(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ur(i[l],a[l]))return!1;return!0}function z_(i,a,l,c,p,g){return la=g,ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=i===null||i.memoizedState===null?Fo:ua,Uo=!1,g=l(c,p),Uo=!1,_u&&(g=Bw(a,l,c,p)),Fw(i),g}function Fw(i){S.H=mi;var a=dt!==null&&dt.next!==null;if(la=0,Kt=dt=ze=null,Sp=!1,kh=0,yu=null,a)throw Error(r(300));i===null||dn||(i=i.dependencies,i!==null&&Mp(i)&&(dn=!0))}function Bw(i,a,l,c){ze=i;var p=0;do{if(_u&&(yu=null),kh=0,_u=!1,25<=p)throw Error(r(301));if(p+=1,Kt=dt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}S.H=Bo,g=a(l,c)}while(_u);return g}function nN(){var i=S.H,a=i.useState()[0];return a=typeof a.then=="function"?Vh(a):a,i=i.useState()[0],(dt!==null?dt.memoizedState:null)!==i&&(ze.flags|=1024),a}function q_(){var i=Rp!==0;return Rp=0,i}function j_(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function H_(i){if(Sp){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Sp=!1}la=0,Kt=dt=ze=null,_u=!1,kh=Rp=0,yu=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?ze.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Qt(){if(dt===null){var i=ze.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var a=Kt===null?ze.memoizedState:Kt.next;if(a!==null)Kt=a,dt=i;else{if(i===null)throw ze.alternate===null?Error(r(467)):Error(r(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Kt===null?ze.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}var Cp;Cp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Vh(i){var a=kh;return kh+=1,yu===null&&(yu=[]),i=Dw(yu,i,a),a=ze,(Kt===null?a.memoizedState:Kt.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?Fo:ua),i}function Dp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Vh(i);if(i.$$typeof===I)return Dn(i)}throw Error(r(438,String(i)))}function G_(i){var a=null,l=ze.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Cp(),ze.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=se;return a.index++,l}function ns(i,a){return typeof a=="function"?a(i):a}function Pp(i){var a=Qt();return $_(a,dt,i)}function $_(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=i.baseQueue,g=c.pending;if(g!==null){if(p!==null){var T=p.next;p.next=g.next,g.next=T}a.baseQueue=p=g,c.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{a=p.next;var w=T=null,P=null,F=a,re=!1;do{var ue=F.lane&-536870913;if(ue!==F.lane?(et&ue)===ue:(la&ue)===ue){var W=F.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ue===mu&&(re=!0);else if((la&W)===W){F=F.next,W===mu&&(re=!0);continue}else ue={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},P===null?(w=P=ue,T=g):P=P.next=ue,ze.lanes|=W,ya|=W;ue=F.action,Uo&&l(g,ue),g=F.hasEagerState?F.eagerState:l(g,ue)}else W={lane:ue,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},P===null?(w=P=W,T=g):P=P.next=W,ze.lanes|=ue,ya|=ue;F=F.next}while(F!==null&&F!==a);if(P===null?T=g:P.next=w,!ur(g,i.memoizedState)&&(dn=!0,re&&(l=gu,l!==null)))throw l;i.memoizedState=g,i.baseState=T,i.baseQueue=P,c.lastRenderedState=g}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function K_(i){var a=Qt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,p=l.pending,g=a.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do g=i(g,T.action),T=T.next;while(T!==p);ur(g,a.memoizedState)||(dn=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,c]}function zw(i,a,l){var c=ze,p=Qt(),g=it;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!ur((dt||p).memoizedState,l);if(T&&(p.memoizedState=l,dn=!0),p=p.queue,Y_(Hw.bind(null,c,p,i),[i]),p.getSnapshot!==a||T||Kt!==null&&Kt.memoizedState.tag&1){if(c.flags|=2048,vu(9,jw.bind(null,c,p,l,a),{destroy:void 0},null),mt===null)throw Error(r(349));g||(la&60)!==0||qw(c,a,l)}return l}function qw(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=ze.updateQueue,a===null?(a=Cp(),ze.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function jw(i,a,l,c){a.value=l,a.getSnapshot=c,Gw(a)&&$w(i)}function Hw(i,a,l){return l(function(){Gw(a)&&$w(i)})}function Gw(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ur(i,l)}catch{return!0}}function $w(i){var a=sa(i,2);a!==null&&jn(a,i,2)}function Q_(i){var a=Jn();if(typeof i=="function"){var l=i;if(i=l(),Uo){ni(!0);try{l()}finally{ni(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},a}function Kw(i,a,l,c){return i.baseState=l,$_(i,dt,typeof c=="function"?c:ns)}function rN(i,a,l,c,p){if(Np(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};S.T!==null?l(!0):g.isTransition=!1,c(g),l=a.pending,l===null?(g.next=a.pending=g,Qw(a,g)):(g.next=l.next,a.pending=l.next=g)}}function Qw(i,a){var l=a.action,c=a.payload,p=i.state;if(a.isTransition){var g=S.T,T={};S.T=T;try{var w=l(p,c),P=S.S;P!==null&&P(T,w),Ww(i,a,w)}catch(F){W_(i,a,F)}finally{S.T=g}}else try{g=l(p,c),Ww(i,a,g)}catch(F){W_(i,a,F)}}function Ww(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Yw(i,a,c)},function(c){return W_(i,a,c)}):Yw(i,a,l)}function Yw(i,a,l){a.status="fulfilled",a.value=l,Xw(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Qw(i,l)))}function W_(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,Xw(a),a=a.next;while(a!==c)}i.action=null}function Xw(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Zw(i,a){return a}function Jw(i,a){if(it){var l=mt.formState;if(l!==null){e:{var c=ze;if(it){if(Tn){t:{for(var p=Tn,g=fi;p.nodeType!==8;){if(!g){p=null;break t}if(p=Kr(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Tn=Kr(p.nextSibling),c=p.data==="F!";break e}}Vo(c)}c=!1}c&&(a=l[0])}}return l=Jn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zw,lastRenderedState:a},l.queue=c,l=_I.bind(null,ze,c),c.dispatch=l,c=Q_(!1),g=ty.bind(null,ze,!1,c.queue),c=Jn(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,l=rN.bind(null,ze,p,g,l),p.dispatch=l,c.memoizedState=i,[a,l,!1]}function eI(i){var a=Qt();return tI(a,dt,i)}function tI(i,a,l){a=$_(i,a,Zw)[0],i=Pp(ns)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Vh(a):a;var c=Qt(),p=c.queue,g=p.dispatch;return l!==c.memoizedState&&(ze.flags|=2048,vu(9,iN.bind(null,p,l),{destroy:void 0},null)),[a,g,i]}function iN(i,a){i.action=a}function nI(i){var a=Qt(),l=dt;if(l!==null)return tI(a,l,i);Qt(),a=a.memoizedState,l=Qt();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function vu(i,a,l,c){return i={tag:i,create:a,inst:l,deps:c,next:null},a=ze.updateQueue,a===null&&(a=Cp(),ze.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function rI(){return Qt().memoizedState}function Op(i,a,l,c){var p=Jn();ze.flags|=i,p.memoizedState=vu(1|a,l,{destroy:void 0},c===void 0?null:c)}function xp(i,a,l,c){var p=Qt();c=c===void 0?null:c;var g=p.memoizedState.inst;dt!==null&&c!==null&&B_(c,dt.memoizedState.deps)?p.memoizedState=vu(a,l,g,c):(ze.flags|=i,p.memoizedState=vu(1|a,l,g,c))}function iI(i,a){Op(8390656,8,i,a)}function Y_(i,a){xp(2048,8,i,a)}function sI(i,a){return xp(4,2,i,a)}function aI(i,a){return xp(4,4,i,a)}function oI(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function lI(i,a,l){l=l!=null?l.concat([i]):null,xp(4,4,oI.bind(null,a,i),l)}function X_(){}function uI(i,a){var l=Qt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&B_(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function cI(i,a){var l=Qt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&B_(a,c[1]))return c[0];if(c=i(),Uo){ni(!0);try{i()}finally{ni(!1)}}return l.memoizedState=[c,a],c}function Z_(i,a,l){return l===void 0||(la&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=d0(),ze.lanes|=i,ya|=i,l)}function hI(i,a,l,c){return ur(l,a)?l:pu.current!==null?(i=Z_(i,l,c),ur(i,a)||(dn=!0),i):(la&42)===0?(dn=!0,i.memoizedState=l):(i=d0(),ze.lanes|=i,ya|=i,a)}function dI(i,a,l,c,p){var g=pe.p;pe.p=g!==0&&8>g?g:8;var T=S.T,w={};S.T=w,ty(i,!1,a,l);try{var P=p(),F=S.S;if(F!==null&&F(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var re=eN(P,c);Mh(i,a,re,fr(i))}else Mh(i,a,c,fr(i))}catch(ue){Mh(i,a,{then:function(){},status:"rejected",reason:ue},fr())}finally{pe.p=g,S.T=T}}function sN(){}function J_(i,a,l,c){if(i.tag!==5)throw Error(r(476));var p=fI(i).queue;dI(i,p,a,Pe,l===null?sN:function(){return pI(i),l(c)})}function fI(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:Pe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function pI(i){var a=fI(i).next.queue;Mh(i,a,{},fr())}function ey(){return Dn(nd)}function mI(){return Qt().memoizedState}function gI(){return Qt().memoizedState}function aN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=fr();i=da(l);var c=fa(a,i,l);c!==null&&(jn(c,a,l),Fh(c,a,l)),a={cache:L_()},i.payload=a;return}a=a.return}}function oN(i,a,l){var c=fr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Np(i)?yI(a,l):(l=P_(i,a,l,c),l!==null&&(jn(l,i,c),vI(l,a,c)))}function _I(i,a,l){var c=fr();Mh(i,a,l,c)}function Mh(i,a,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Np(i))yI(a,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var T=a.lastRenderedState,w=g(T,l);if(p.hasEagerState=!0,p.eagerState=w,ur(w,T))return gp(i,a,p,0),mt===null&&mp(),!1}catch{}finally{}if(l=P_(i,a,p,c),l!==null)return jn(l,i,c),vI(l,a,c),!0}return!1}function ty(i,a,l,c){if(c={lane:2,revertLane:Hy(),action:c,hasEagerState:!1,eagerState:null,next:null},Np(i)){if(a)throw Error(r(479))}else a=P_(i,l,c,2),a!==null&&jn(a,i,2)}function Np(i){var a=i.alternate;return i===ze||a!==null&&a===ze}function yI(i,a){_u=Sp=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function vI(i,a,l){if((l&4194176)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ws(i,l)}}var mi={readContext:Dn,use:Dp,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt};mi.useCacheRefresh=jt,mi.useMemoCache=jt,mi.useHostTransitionStatus=jt,mi.useFormState=jt,mi.useActionState=jt,mi.useOptimistic=jt;var Fo={readContext:Dn,use:Dp,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Dn,useEffect:iI,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Op(4194308,4,oI.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Op(4194308,4,i,a)},useInsertionEffect:function(i,a){Op(4,2,i,a)},useMemo:function(i,a){var l=Jn();a=a===void 0?null:a;var c=i();if(Uo){ni(!0);try{i()}finally{ni(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=Jn();if(l!==void 0){var p=l(a);if(Uo){ni(!0);try{l(a)}finally{ni(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=oN.bind(null,ze,i),[c.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=Q_(i);var a=i.queue,l=_I.bind(null,ze,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:X_,useDeferredValue:function(i,a){var l=Jn();return Z_(l,i,a)},useTransition:function(){var i=Q_(!1);return i=dI.bind(null,ze,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=ze,p=Jn();if(it){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),mt===null)throw Error(r(349));(et&60)!==0||qw(c,a,l)}p.memoizedState=l;var g={value:l,getSnapshot:a};return p.queue=g,iI(Hw.bind(null,c,g,i),[i]),c.flags|=2048,vu(9,jw.bind(null,c,g,l,a),{destroy:void 0},null),l},useId:function(){var i=Jn(),a=mt.identifierPrefix;if(it){var l=es,c=Ji;l=(c&~(1<<32-Fn(c)-1)).toString(32)+l,a=":"+a+"R"+l,l=Rp++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=tN++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return Jn().memoizedState=aN.bind(null,ze)}};Fo.useMemoCache=G_,Fo.useHostTransitionStatus=ey,Fo.useFormState=Jw,Fo.useActionState=Jw,Fo.useOptimistic=function(i){var a=Jn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=ty.bind(null,ze,!0,l),l.dispatch=a,[i,a]};var ua={readContext:Dn,use:Dp,useCallback:uI,useContext:Dn,useEffect:Y_,useImperativeHandle:lI,useInsertionEffect:sI,useLayoutEffect:aI,useMemo:cI,useReducer:Pp,useRef:rI,useState:function(){return Pp(ns)},useDebugValue:X_,useDeferredValue:function(i,a){var l=Qt();return hI(l,dt.memoizedState,i,a)},useTransition:function(){var i=Pp(ns)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:Vh(i),a]},useSyncExternalStore:zw,useId:mI};ua.useCacheRefresh=gI,ua.useMemoCache=G_,ua.useHostTransitionStatus=ey,ua.useFormState=eI,ua.useActionState=eI,ua.useOptimistic=function(i,a){var l=Qt();return Kw(l,dt,i,a)};var Bo={readContext:Dn,use:Dp,useCallback:uI,useContext:Dn,useEffect:Y_,useImperativeHandle:lI,useInsertionEffect:sI,useLayoutEffect:aI,useMemo:cI,useReducer:K_,useRef:rI,useState:function(){return K_(ns)},useDebugValue:X_,useDeferredValue:function(i,a){var l=Qt();return dt===null?Z_(l,i,a):hI(l,dt.memoizedState,i,a)},useTransition:function(){var i=K_(ns)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:Vh(i),a]},useSyncExternalStore:zw,useId:mI};Bo.useCacheRefresh=gI,Bo.useMemoCache=G_,Bo.useHostTransitionStatus=ey,Bo.useFormState=nI,Bo.useActionState=nI,Bo.useOptimistic=function(i,a){var l=Qt();return dt!==null?Kw(l,dt,i,a):(l.baseState=i,[i,l.queue.dispatch])};function ny(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:D({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var ry={isMounted:function(i){return(i=i._reactInternals)?ee(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var c=fr(),p=da(c);p.payload=a,l!=null&&(p.callback=l),a=fa(i,p,c),a!==null&&(jn(a,i,c),Fh(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=fr(),p=da(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=fa(i,p,c),a!==null&&(jn(a,i,c),Fh(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=fr(),c=da(l);c.tag=2,a!=null&&(c.callback=a),a=fa(i,c,l),a!==null&&(jn(a,i,l),Fh(a,i,l))}};function EI(i,a,l,c,p,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):a.prototype&&a.prototype.isPureReactComponent?!wh(l,c)||!wh(p,g):!0}function TI(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&ry.enqueueReplaceState(a,a.state,null)}function zo(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=D({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}var kp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function bI(i){kp(i)}function wI(i){console.error(i)}function II(i){kp(i)}function Vp(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function AI(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function iy(i,a,l){return l=da(l),l.tag=3,l.payload={element:null},l.callback=function(){Vp(i,a)},l}function SI(i){return i=da(i),i.tag=3,i}function RI(i,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;i.payload=function(){return p(g)},i.callback=function(){AI(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){AI(a,l,c),typeof p!="function"&&(va===null?va=new Set([this]):va.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function lN(i,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Uh(a,l,p,!0),l=Dr.current,l!==null){switch(l.tag){case 13:return pi===null?Fy():l.alternate===null&&Mt===0&&(Mt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===k_?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),zy(i,c,p)),!1;case 22:return l.flags|=65536,c===k_?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),zy(i,c,p)),!1}throw Error(r(435,l.tag))}return zy(i,c,p),Fy(),!1}if(it)return a=Dr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==N_&&(i=Error(r(422),{cause:c}),Rh(Sr(i,l)))):(c!==N_&&(a=Error(r(423),{cause:c}),Rh(Sr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=Sr(c,l),p=iy(i.stateNode,c,p),vy(i,p),Mt!==4&&(Mt=2)),!1;var g=Error(r(520),{cause:c});if(g=Sr(g,l),Kh===null?Kh=[g]:Kh.push(g),Mt!==4&&(Mt=2),a===null)return!0;c=Sr(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=iy(l.stateNode,c,i),vy(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(va===null||!va.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=SI(p),RI(p,i,l,c),vy(l,p),!1}l=l.return}while(l!==null);return!1}var CI=Error(r(461)),dn=!1;function bn(i,a,l,c){a.child=i===null?Nw(a,null,l,c):Mo(a,i.child,l,c)}function DI(i,a,l,c,p){l=l.render;var g=a.ref;if("ref"in c){var T={};for(var w in c)w!=="ref"&&(T[w]=c[w])}else T=c;return jo(a),c=z_(i,a,l,T,g,p),w=q_(),i!==null&&!dn?(j_(i,a,p),rs(i,a,p)):(it&&w&&O_(a),a.flags|=1,bn(i,a,c,p),a.child)}function PI(i,a,l,c,p){if(i===null){var g=l.type;return typeof g=="function"&&!Ry(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,OI(i,a,g,c,p)):(i=Bp(l.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!fy(i,p)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:wh,l(T,c)&&i.ref===a.ref)return rs(i,a,p)}return a.flags|=1,i=_a(g,c),i.ref=a.ref,i.return=a,a.child=i}function OI(i,a,l,c,p){if(i!==null){var g=i.memoizedProps;if(wh(g,c)&&i.ref===a.ref)if(dn=!1,a.pendingProps=c=g,fy(i,p))(i.flags&131072)!==0&&(dn=!0);else return a.lanes=i.lanes,rs(i,a,p)}return sy(i,a,l,c,p)}function xI(i,a,l){var c=a.pendingProps,p=c.children,g=(a.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(Lh(i,a),c.mode==="hidden"||g){if((a.flags&128)!==0){if(c=T!==null?T.baseLanes|l:l,i!==null){for(p=a.child=i.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;a.childLanes=g&~c}else a.childLanes=0,a.child=null;return NI(i,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ap(a,T!==null?T.cachePool:null),T!==null?kw(a,T):V_(),Vw(a);else return a.lanes=a.childLanes=536870912,NI(i,a,T!==null?T.baseLanes|l:l,l)}else T!==null?(Ap(a,T.cachePool),kw(a,T),oa(),a.memoizedState=null):(i!==null&&Ap(a,null),V_(),oa());return bn(i,a,p,l),a.child}function NI(i,a,l,c){var p=F_();return p=p===null?null:{parent:rn._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},i!==null&&Ap(a,null),V_(),Vw(a),i!==null&&Uh(i,a,c,!0),null}function Lh(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function sy(i,a,l,c,p){return jo(a),l=z_(i,a,l,c,void 0,p),c=q_(),i!==null&&!dn?(j_(i,a,p),rs(i,a,p)):(it&&c&&O_(a),a.flags|=1,bn(i,a,l,p),a.child)}function kI(i,a,l,c,p,g){return jo(a),a.updateQueue=null,l=Bw(a,c,l,p),Fw(i),c=q_(),i!==null&&!dn?(j_(i,a,g),rs(i,a,g)):(it&&c&&O_(a),a.flags|=1,bn(i,a,l,g),a.child)}function VI(i,a,l,c,p){if(jo(a),a.stateNode===null){var g=cu,T=l.contextType;typeof T=="object"&&T!==null&&(g=Dn(T)),g=new l(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ry,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},_y(a),T=l.contextType,g.context=typeof T=="object"&&T!==null?Dn(T):cu,g.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(ny(a,l,T,c),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&ry.enqueueReplaceState(g,g.state,null),zh(a,c,g,p),Bh(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){g=a.stateNode;var w=a.memoizedProps,P=zo(l,w);g.props=P;var F=g.context,re=l.contextType;T=cu,typeof re=="object"&&re!==null&&(T=Dn(re));var ue=l.getDerivedStateFromProps;re=typeof ue=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||F!==T)&&TI(a,g,c,T),ha=!1;var W=a.memoizedState;g.state=W,zh(a,c,g,p),Bh(),F=a.memoizedState,w||W!==F||ha?(typeof ue=="function"&&(ny(a,l,ue,c),F=a.memoizedState),(P=ha||EI(a,l,P,c,W,F,T))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=F),g.props=c,g.state=F,g.context=T,c=P):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,yy(i,a),T=a.memoizedProps,re=zo(l,T),g.props=re,ue=a.pendingProps,W=g.context,F=l.contextType,P=cu,typeof F=="object"&&F!==null&&(P=Dn(F)),w=l.getDerivedStateFromProps,(F=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ue||W!==P)&&TI(a,g,c,P),ha=!1,W=a.memoizedState,g.state=W,zh(a,c,g,p),Bh();var ne=a.memoizedState;T!==ue||W!==ne||ha||i!==null&&i.dependencies!==null&&Mp(i.dependencies)?(typeof w=="function"&&(ny(a,l,w,c),ne=a.memoizedState),(re=ha||EI(a,l,re,c,W,ne,P)||i!==null&&i.dependencies!==null&&Mp(i.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ne,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ne,P)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ne),g.props=c,g.state=ne,g.context=P,c=re):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(a.flags|=1024),c=!1)}return g=c,Lh(i,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&c?(a.child=Mo(a,i.child,null,p),a.child=Mo(a,null,l,p)):bn(i,a,l,p),a.memoizedState=g.state,i=a.child):i=rs(i,a,p),i}function MI(i,a,l,c){return Sh(),a.flags|=256,bn(i,a,l,c),a.child}var ay={dehydrated:null,treeContext:null,retryLane:0};function oy(i){return{baseLanes:i,cachePool:Uw()}}function ly(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Nr),i}function LI(i,a,l){var c=a.pendingProps,p=!1,g=(a.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(nn.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(it){if(p?aa(a):oa(),it){var w=Tn,P;if(P=w){e:{for(P=w,w=fi;P.nodeType!==8;){if(!w){w=null;break e}if(P=Kr(P.nextSibling),P===null){w=null;break e}}w=P}w!==null?(a.memoizedState={dehydrated:w,treeContext:No!==null?{id:Ji,overflow:es}:null,retryLane:536870912},P=xr(18,null,null,0),P.stateNode=w,P.return=a,a.child=P,qn=a,Tn=null,P=!0):P=!1}P||Vo(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?a.lanes=16:a.lanes=536870912,null;ts(a)}return w=c.children,c=c.fallback,p?(oa(),p=a.mode,w=cy({mode:"hidden",children:w},p),c=Go(c,p,l,null),w.return=a,c.return=a,w.sibling=c,a.child=w,p=a.child,p.memoizedState=oy(l),p.childLanes=ly(i,T,l),a.memoizedState=ay,c):(aa(a),uy(a,w))}if(P=i.memoizedState,P!==null&&(w=P.dehydrated,w!==null)){if(g)a.flags&256?(aa(a),a.flags&=-257,a=hy(i,a,l)):a.memoizedState!==null?(oa(),a.child=i.child,a.flags|=128,a=null):(oa(),p=c.fallback,w=a.mode,c=cy({mode:"visible",children:c.children},w),p=Go(p,w,l,null),p.flags|=2,c.return=a,p.return=a,c.sibling=p,a.child=c,Mo(a,i.child,null,l),c=a.child,c.memoizedState=oy(l),c.childLanes=ly(i,T,l),a.memoizedState=ay,a=p);else if(aa(a),w.data==="$!"){if(T=w.nextSibling&&w.nextSibling.dataset,T)var F=T.dgst;T=F,c=Error(r(419)),c.stack="",c.digest=T,Rh({value:c,source:null,stack:null}),a=hy(i,a,l)}else if(dn||Uh(i,a,l,!1),T=(l&i.childLanes)!==0,dn||T){if(T=mt,T!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==P.retryLane)throw P.retryLane=c,sa(i,c),jn(T,i,c),CI}w.data==="$?"||Fy(),a=hy(i,a,l)}else w.data==="$?"?(a.flags|=128,a.child=i.child,a=wN.bind(null,i),w._reactRetry=a,a=null):(i=P.treeContext,Tn=Kr(w.nextSibling),qn=a,it=!0,Gr=null,fi=!1,i!==null&&(Rr[Cr++]=Ji,Rr[Cr++]=es,Rr[Cr++]=No,Ji=i.id,es=i.overflow,No=a),a=uy(a,c.children),a.flags|=4096);return a}return p?(oa(),p=c.fallback,w=a.mode,P=i.child,F=P.sibling,c=_a(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&31457280,F!==null?p=_a(F,p):(p=Go(p,w,l,null),p.flags|=2),p.return=a,c.return=a,c.sibling=p,a.child=c,c=p,p=a.child,w=i.child.memoizedState,w===null?w=oy(l):(P=w.cachePool,P!==null?(F=rn._currentValue,P=P.parent!==F?{parent:F,pool:F}:P):P=Uw(),w={baseLanes:w.baseLanes|l,cachePool:P}),p.memoizedState=w,p.childLanes=ly(i,T,l),a.memoizedState=ay,c):(aa(a),l=i.child,i=l.sibling,l=_a(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function uy(i,a){return a=cy({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function cy(i,a){return u0(i,a,0,null)}function hy(i,a,l){return Mo(a,i.child,null,l),i=uy(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function UI(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),my(i.return,a,l)}function dy(i,a,l,c,p){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=p)}function FI(i,a,l){var c=a.pendingProps,p=c.revealOrder,g=c.tail;if(bn(i,a,c.children,l),c=nn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&UI(i,l,a);else if(i.tag===19)UI(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(Me(nn,c),p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Ip(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),dy(a,!1,p,l,g);break;case"backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Ip(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}dy(a,!0,l,null,g);break;case"together":dy(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function rs(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ya|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Uh(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=_a(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=_a(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function fy(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Mp(i)))}function uN(i,a,l){switch(a.tag){case 3:js(a,a.stateNode.containerInfo),ca(a,rn,i.memoizedState.cache),Sh();break;case 27:case 5:nh(a);break;case 4:js(a,a.stateNode.containerInfo);break;case 10:ca(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(aa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?LI(i,a,l):(aa(a),i=rs(i,a,l),i!==null?i.sibling:null);aa(a);break;case 19:var p=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Uh(i,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return FI(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Me(nn,nn.current),c)break;return null;case 22:case 23:return a.lanes=0,xI(i,a,l);case 24:ca(a,rn,i.memoizedState.cache)}return rs(i,a,l)}function BI(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)dn=!0;else{if(!fy(i,l)&&(a.flags&128)===0)return dn=!1,uN(i,a,l);dn=(i.flags&131072)!==0}else dn=!1,it&&(a.flags&1048576)!==0&&Iw(a,vp,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,p=c._init;if(c=p(c._payload),a.type=c,typeof c=="function")Ry(c)?(i=zo(c,i),a.tag=1,a=VI(null,a,c,i,l)):(a.tag=0,a=sy(null,a,c,i,l));else{if(c!=null){if(p=c.$$typeof,p===C){a.tag=11,a=DI(null,a,c,i,l);break e}else if(p===B){a.tag=14,a=PI(null,a,c,i,l);break e}}throw a=R(c)||c,Error(r(306,a,""))}}return a;case 0:return sy(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=zo(c,a.pendingProps),VI(i,a,c,p,l);case 3:e:{if(js(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;p=a.memoizedState,c=p.element,yy(i,a),zh(a,g,null,l);var T=a.memoizedState;if(g=T.cache,ca(a,rn,g),g!==p.cache&&gy(a,[rn],l,!0),Bh(),g=T.element,p.isDehydrated)if(p={element:g,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=MI(i,a,g,l);break e}else if(g!==c){c=Sr(Error(r(424)),a),Rh(c),a=MI(i,a,g,l);break e}else for(Tn=Kr(a.stateNode.containerInfo.firstChild),qn=a,it=!0,Gr=null,fi=!0,l=Nw(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Sh(),g===c){a=rs(i,a,l);break e}bn(i,a,g,l)}a=a.child}return a;case 26:return Lh(i,a),i===null?(l=j0(a.type,null,a.pendingProps,null))?a.memoizedState=l:it||(l=a.type,i=a.pendingProps,c=Zp(vn.current).createElement(l),c[un]=a,c[Jt]=i,wn(c,l,i),St(c),a.stateNode=c):a.memoizedState=j0(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return nh(a),i===null&&it&&(c=a.stateNode=B0(a.type,a.pendingProps,vn.current),qn=a,fi=!0,Tn=Kr(c.firstChild)),c=a.pendingProps.children,i!==null||it?bn(i,a,c,l):a.child=Mo(a,null,c,l),Lh(i,a),a.child;case 5:return i===null&&it&&((p=c=Tn)&&(c=FN(c,a.type,a.pendingProps,fi),c!==null?(a.stateNode=c,qn=a,Tn=Kr(c.firstChild),fi=!1,p=!0):p=!1),p||Vo(a)),nh(a),p=a.type,g=a.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,Jy(p,g)?c=null:T!==null&&Jy(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=z_(i,a,nN,null,null,l),nd._currentValue=p),Lh(i,a),bn(i,a,c,l),a.child;case 6:return i===null&&it&&((i=l=Tn)&&(l=BN(l,a.pendingProps,fi),l!==null?(a.stateNode=l,qn=a,Tn=null,i=!0):i=!1),i||Vo(a)),null;case 13:return LI(i,a,l);case 4:return js(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=Mo(a,null,c,l):bn(i,a,c,l),a.child;case 11:return DI(i,a,a.type,a.pendingProps,l);case 7:return bn(i,a,a.pendingProps,l),a.child;case 8:return bn(i,a,a.pendingProps.children,l),a.child;case 12:return bn(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,ca(a,a.type,c.value),bn(i,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,jo(a),p=Dn(p),c=c(p),a.flags|=1,bn(i,a,c,l),a.child;case 14:return PI(i,a,a.type,a.pendingProps,l);case 15:return OI(i,a,a.type,a.pendingProps,l);case 19:return FI(i,a,l);case 22:return xI(i,a,l);case 24:return jo(a),c=Dn(rn),i===null?(p=F_(),p===null&&(p=mt,g=L_(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),a.memoizedState={parent:c,cache:p},_y(a),ca(a,rn,p)):((i.lanes&l)!==0&&(yy(i,a),zh(a,null,null,l),Bh()),p=i.memoizedState,g=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ca(a,rn,c)):(c=g.cache,ca(a,rn,c),c!==p.cache&&gy(a,[rn],l,!0))),bn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var py=je(null),qo=null,is=null;function ca(i,a,l){Me(py,a._currentValue),a._currentValue=l}function ss(i){i._currentValue=py.current,ot(py)}function my(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function gy(i,a,l,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var T=p.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=p;for(var P=0;P<a.length;P++)if(w.context===a[P]){g.lanes|=l,w=g.alternate,w!==null&&(w.lanes|=l),my(g.return,l,i),c||(T=null);break e}g=w.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(r(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),my(T,l,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function Uh(i,a,l,c){i=null;for(var p=a,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var w=p.type;ur(p.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(p===qs.current){if(T=p.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(nd):i=[nd])}p=p.return}i!==null&&gy(a,i,l,c),a.flags|=262144}function Mp(i){for(i=i.firstContext;i!==null;){if(!ur(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function jo(i){qo=i,is=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return zI(qo,i)}function Lp(i,a){return qo===null&&jo(i),zI(i,a)}function zI(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},is===null){if(i===null)throw Error(r(308));is=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else is=is.next=a;return l}var ha=!1;function _y(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yy(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function da(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function fa(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Ct&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=_p(i),bw(i,null,l),a}return gp(i,c,a,l),_p(i)}function Fh(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ws(i,l)}}function vy(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?p=g=a:g=g.next=a}else p=g=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Ey=!1;function Bh(){if(Ey){var i=gu;if(i!==null)throw i}}function zh(i,a,l,c){Ey=!1;var p=i.updateQueue;ha=!1;var g=p.firstBaseUpdate,T=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var P=w,F=P.next;P.next=null,T===null?g=F:T.next=F,T=P;var re=i.alternate;re!==null&&(re=re.updateQueue,w=re.lastBaseUpdate,w!==T&&(w===null?re.firstBaseUpdate=F:w.next=F,re.lastBaseUpdate=P))}if(g!==null){var ue=p.baseState;T=0,re=F=P=null,w=g;do{var W=w.lane&-536870913,ne=W!==w.lane;if(ne?(et&W)===W:(c&W)===W){W!==0&&W===mu&&(Ey=!0),re!==null&&(re=re.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ce=i,Le=w;W=a;var Lt=l;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){ue=Ce.call(Lt,ue,W);break e}ue=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,W=typeof Ce=="function"?Ce.call(Lt,ue,W):Ce,W==null)break e;ue=D({},ue,W);break e;case 2:ha=!0}}W=w.callback,W!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[W]:ne.push(W))}else ne={lane:W,tag:w.tag,payload:w.payload,callback:w.callback,next:null},re===null?(F=re=ne,P=ue):re=re.next=ne,T|=W;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;ne=w,w=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);re===null&&(P=ue),p.baseState=P,p.firstBaseUpdate=F,p.lastBaseUpdate=re,g===null&&(p.shared.lanes=0),ya|=T,i.lanes=T,i.memoizedState=ue}}function qI(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function jI(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)qI(l[i],a)}function qh(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&i)===i){c=void 0;var g=l.create,T=l.inst;c=g(),T.destroy=c}l=l.next}while(l!==p)}}catch(w){pt(a,a.return,w)}}function pa(i,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&i)===i){var T=c.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,p=a;var P=l;try{w()}catch(F){pt(p,P,F)}}}c=c.next}while(c!==g)}}catch(F){pt(a,a.return,F)}}function HI(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{jI(a,l)}catch(c){pt(i,i.return,c)}}}function GI(i,a,l){l.props=zo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){pt(i,a,c)}}function Ho(i,a){try{var l=i.ref;if(l!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var p=c;break;default:p=c}typeof l=="function"?i.refCleanup=l(p):l.current=p}}catch(g){pt(i,a,g)}}function cr(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){pt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){pt(i,a,p)}else l.current=null}function $I(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){pt(i,i.return,p)}}function KI(i,a,l){try{var c=i.stateNode;kN(c,i.type,l,a),c[Jt]=a}catch(p){pt(i,i.return,p)}}function QI(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Ty(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||QI(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function by(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Xp));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(by(i,a,l),i=i.sibling;i!==null;)by(i,a,l),i=i.sibling}function Up(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Up(i,a,l),i=i.sibling;i!==null;)Up(i,a,l),i=i.sibling}var as=!1,Vt=!1,wy=!1,WI=typeof WeakSet=="function"?WeakSet:Set,fn=null,YI=!1;function cN(i,a){if(i=i.containerInfo,Xy=im,i=fw(i),A_(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,w=-1,P=-1,F=0,re=0,ue=i,W=null;t:for(;;){for(var ne;ue!==l||p!==0&&ue.nodeType!==3||(w=T+p),ue!==g||c!==0&&ue.nodeType!==3||(P=T+c),ue.nodeType===3&&(T+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)W=ue,ue=ne;for(;;){if(ue===i)break t;if(W===l&&++F===p&&(w=T),W===g&&++re===c&&(P=T),(ne=ue.nextSibling)!==null)break;ue=W,W=ue.parentNode}ue=ne}l=w===-1||P===-1?null:{start:w,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zy={focusedElem:i,selectionRange:l},im=!1,fn=a;fn!==null;)if(a=fn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,fn=i;else for(;fn!==null;){switch(a=fn,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,p=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var Ce=zo(l.type,p,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Ce,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Le){pt(l,l.return,Le)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)nv(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":nv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,fn=i;break}fn=a.return}return Ce=YI,YI=!1,Ce}function XI(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ls(i,l),c&4&&qh(5,l);break;case 1:if(ls(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(w){pt(l,l.return,w)}else{var p=zo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(l,l.return,w)}}c&64&&HI(l),c&512&&Ho(l,l.return);break;case 3:if(ls(i,l),c&64&&(c=l.updateQueue,c!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{jI(c,i)}catch(w){pt(l,l.return,w)}}break;case 26:ls(i,l),c&512&&Ho(l,l.return);break;case 27:case 5:ls(i,l),a===null&&c&4&&$I(l),c&512&&Ho(l,l.return);break;case 12:ls(i,l);break;case 13:ls(i,l),c&4&&e0(i,l);break;case 22:if(p=l.memoizedState!==null||as,!p){a=a!==null&&a.memoizedState!==null||Vt;var g=as,T=Vt;as=p,(Vt=a)&&!T?ma(i,l,(l.subtreeFlags&8772)!==0):ls(i,l),as=g,Vt=T}c&512&&(l.memoizedProps.mode==="manual"?Ho(l,l.return):cr(l,l.return));break;default:ls(i,l)}}function ZI(i){var a=i.alternate;a!==null&&(i.alternate=null,ZI(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Eo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Wt=null,hr=!1;function os(i,a,l){for(l=l.child;l!==null;)JI(i,a,l),l=l.sibling}function JI(i,a,l){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Hs,l)}catch{}switch(l.tag){case 26:Vt||cr(l,a),os(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Vt||cr(l,a);var c=Wt,p=hr;for(Wt=l.stateNode,os(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);Eo(l),Wt=c,hr=p;break;case 5:Vt||cr(l,a);case 6:p=Wt;var g=hr;if(Wt=null,os(i,a,l),Wt=p,hr=g,Wt!==null)if(hr)try{i=Wt,c=l.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(T){pt(l,a,T)}else try{Wt.removeChild(l.stateNode)}catch(T){pt(l,a,T)}break;case 18:Wt!==null&&(hr?(a=Wt,l=l.stateNode,a.nodeType===8?tv(a.parentNode,l):a.nodeType===1&&tv(a,l),ad(a)):tv(Wt,l.stateNode));break;case 4:c=Wt,p=hr,Wt=l.stateNode.containerInfo,hr=!0,os(i,a,l),Wt=c,hr=p;break;case 0:case 11:case 14:case 15:Vt||pa(2,l,a),Vt||pa(4,l,a),os(i,a,l);break;case 1:Vt||(cr(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&GI(l,a,c)),os(i,a,l);break;case 21:os(i,a,l);break;case 22:Vt||cr(l,a),Vt=(c=Vt)||l.memoizedState!==null,os(i,a,l),Vt=c;break;default:os(i,a,l)}}function e0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ad(i)}catch(l){pt(a,a.return,l)}}function hN(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new WI),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new WI),a;default:throw Error(r(435,i.tag))}}function Iy(i,a){var l=hN(i);a.forEach(function(c){var p=IN.bind(null,i,c);l.has(c)||(l.add(c),c.then(p,p))})}function Pr(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],g=i,T=a,w=T;e:for(;w!==null;){switch(w.tag){case 27:case 5:Wt=w.stateNode,hr=!1;break e;case 3:Wt=w.stateNode.containerInfo,hr=!0;break e;case 4:Wt=w.stateNode.containerInfo,hr=!0;break e}w=w.return}if(Wt===null)throw Error(r(160));JI(g,T,p),Wt=null,hr=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)t0(a,i),a=a.sibling}var $r=null;function t0(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pr(a,i),Or(i),c&4&&(pa(3,i,i.return),qh(3,i),pa(5,i,i.return));break;case 1:Pr(a,i),Or(i),c&512&&(Vt||l===null||cr(l,l.return)),c&64&&as&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=$r;if(Pr(a,i),Or(i),c&512&&(Vt||l===null||cr(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Xs]||g[un]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),wn(g,c,l),g[un]=i,St(g),c=g;break e;case"link":var T=$0("link","href",p).get(c+(l.href||""));if(T){for(var w=0;w<T.length;w++)if(g=T[w],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(w,1);break t}}g=p.createElement(c),wn(g,c,l),p.head.appendChild(g);break;case"meta":if(T=$0("meta","content",p).get(c+(l.content||""))){for(w=0;w<T.length;w++)if(g=T[w],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(w,1);break t}}g=p.createElement(c),wn(g,c,l),p.head.appendChild(g);break;default:throw Error(r(468,c))}g[un]=i,St(g),c=g}i.stateNode=c}else K0(p,i.type,i.stateNode);else i.stateNode=G0(p,c,i.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?K0(p,i.type,i.stateNode):G0(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&KI(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){p=i.stateNode,g=i.memoizedProps;try{for(var P=p.firstChild;P;){var F=P.nextSibling,re=P.nodeName;P[Xs]||re==="HEAD"||re==="BODY"||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&P.rel.toLowerCase()==="stylesheet"||p.removeChild(P),P=F}for(var ue=i.type,W=p.attributes;W.length;)p.removeAttributeNode(W[0]);wn(p,ue,g),p[un]=i,p[Jt]=g}catch(Ce){pt(i,i.return,Ce)}}case 5:if(Pr(a,i),Or(i),c&512&&(Vt||l===null||cr(l,l.return)),i.flags&32){p=i.stateNode;try{Tr(p,"")}catch(Ce){pt(i,i.return,Ce)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,KI(i,p,l!==null?l.memoizedProps:p)),c&1024&&(wy=!0);break;case 6:if(Pr(a,i),Or(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Ce){pt(i,i.return,Ce)}}break;case 3:if(tm=null,p=$r,$r=Jp(a.containerInfo),Pr(a,i),$r=p,Or(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ad(a.containerInfo)}catch(Ce){pt(i,i.return,Ce)}wy&&(wy=!1,n0(i));break;case 4:c=$r,$r=Jp(i.stateNode.containerInfo),Pr(a,i),Or(i),$r=c;break;case 12:Pr(a,i),Or(i);break;case 13:Pr(a,i),Or(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ny=Xn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Iy(i,c)));break;case 22:if(c&512&&(Vt||l===null||cr(l,l.return)),P=i.memoizedState!==null,F=l!==null&&l.memoizedState!==null,re=as,ue=Vt,as=re||P,Vt=ue||F,Pr(a,i),Vt=ue,as=re,Or(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,c&8192&&(a._visibility=P?a._visibility&-2:a._visibility|1,P&&(a=as||Vt,l===null||F||a||Eu(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){F=l=a;try{if(p=F.stateNode,P)g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=F.stateNode,w=F.memoizedProps.style;var ne=w!=null&&w.hasOwnProperty("display")?w.display:null;T.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ce){pt(F,F.return,Ce)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=P?"":F.memoizedProps}catch(Ce){pt(F,F.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Iy(i,l))));break;case 19:Pr(a,i),Or(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Iy(i,c)));break;case 21:break;default:Pr(a,i),Or(i)}}function Or(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(QI(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 27:var p=c.stateNode,g=Ty(i);Up(i,g,p);break;case 5:var T=c.stateNode;c.flags&32&&(Tr(T,""),c.flags&=-33);var w=Ty(i);Up(i,w,T);break;case 3:case 4:var P=c.stateNode.containerInfo,F=Ty(i);by(i,F,P);break;default:throw Error(r(161))}}}catch(re){pt(i,i.return,re)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function n0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;n0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ls(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)XI(i,a.alternate,a),a=a.sibling}function Eu(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:pa(4,a,a.return),Eu(a);break;case 1:cr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&GI(a,a.return,l),Eu(a);break;case 26:case 27:case 5:cr(a,a.return),Eu(a);break;case 22:cr(a,a.return),a.memoizedState===null&&Eu(a);break;default:Eu(a)}i=i.sibling}}function ma(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,g=a,T=g.flags;switch(g.tag){case 0:case 11:case 15:ma(p,g,l),qh(4,g);break;case 1:if(ma(p,g,l),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(F){pt(c,c.return,F)}if(c=g,p=c.updateQueue,p!==null){var w=c.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)qI(P[p],w)}catch(F){pt(c,c.return,F)}}l&&T&64&&HI(g),Ho(g,g.return);break;case 26:case 27:case 5:ma(p,g,l),l&&c===null&&T&4&&$I(g),Ho(g,g.return);break;case 12:ma(p,g,l);break;case 13:ma(p,g,l),l&&T&4&&e0(p,g);break;case 22:g.memoizedState===null&&ma(p,g,l),Ho(g,g.return);break;default:ma(p,g,l)}a=a.sibling}}function Ay(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&xh(l))}function Sy(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&xh(i))}function ga(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r0(i,a,l,c),a=a.sibling}function r0(i,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ga(i,a,l,c),p&2048&&qh(9,a);break;case 3:ga(i,a,l,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&xh(i)));break;case 12:if(p&2048){ga(i,a,l,c),i=a.stateNode;try{var g=a.memoizedProps,T=g.id,w=g.onPostCommit;typeof w=="function"&&w(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){pt(a,a.return,P)}}else ga(i,a,l,c);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?ga(i,a,l,c):jh(i,a):g._visibility&4?ga(i,a,l,c):(g._visibility|=4,Tu(i,a,l,c,(a.subtreeFlags&10256)!==0)),p&2048&&Ay(a.alternate,a);break;case 24:ga(i,a,l,c),p&2048&&Sy(a.alternate,a);break;default:ga(i,a,l,c)}}function Tu(i,a,l,c,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,T=a,w=l,P=c,F=T.flags;switch(T.tag){case 0:case 11:case 15:Tu(g,T,w,P,p),qh(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&4?Tu(g,T,w,P,p):jh(g,T):(re._visibility|=4,Tu(g,T,w,P,p)),p&&F&2048&&Ay(T.alternate,T);break;case 24:Tu(g,T,w,P,p),p&&F&2048&&Sy(T.alternate,T);break;default:Tu(g,T,w,P,p)}a=a.sibling}}function jh(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,p=c.flags;switch(c.tag){case 22:jh(l,c),p&2048&&Ay(c.alternate,c);break;case 24:jh(l,c),p&2048&&Sy(c.alternate,c);break;default:jh(l,c)}a=a.sibling}}var Hh=8192;function bu(i){if(i.subtreeFlags&Hh)for(i=i.child;i!==null;)i0(i),i=i.sibling}function i0(i){switch(i.tag){case 26:bu(i),i.flags&Hh&&i.memoizedState!==null&&JN($r,i.memoizedState,i.memoizedProps);break;case 5:bu(i);break;case 3:case 4:var a=$r;$r=Jp(i.stateNode.containerInfo),bu(i),$r=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Hh,Hh=16777216,bu(i),Hh=a):bu(i));break;default:bu(i)}}function s0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Gh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];fn=c,o0(c,i)}s0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a0(i),i=i.sibling}function a0(i){switch(i.tag){case 0:case 11:case 15:Gh(i),i.flags&2048&&pa(9,i,i.return);break;case 3:Gh(i);break;case 12:Gh(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,Fp(i)):Gh(i);break;default:Gh(i)}}function Fp(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];fn=c,o0(c,i)}s0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:pa(8,a,a.return),Fp(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Fp(a));break;default:Fp(a)}i=i.sibling}}function o0(i,a){for(;fn!==null;){var l=fn;switch(l.tag){case 0:case 11:case 15:pa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xh(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,fn=c;else e:for(l=i;fn!==null;){c=fn;var p=c.sibling,g=c.return;if(ZI(c),c===l){fn=null;break e}if(p!==null){p.return=g,fn=p;break e}fn=g}}}function dN(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(i,a,l,c){return new dN(i,a,l,c)}function Ry(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _a(i,a){var l=i.alternate;return l===null?(l=xr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function l0(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Bp(i,a,l,c,p,g){var T=0;if(c=i,typeof i=="function")Ry(i)&&(T=1);else if(typeof i=="string")T=XN(i,l,Tt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case d:return Go(l.children,p,g,a);case m:T=8,p|=24;break;case _:return i=xr(12,l,a,p|2),i.elementType=_,i.lanes=g,i;case V:return i=xr(13,l,a,p),i.elementType=V,i.lanes=g,i;case N:return i=xr(19,l,a,p),i.elementType=N,i.lanes=g,i;case H:return u0(l,p,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case I:T=10;break e;case b:T=9;break e;case C:T=11;break e;case B:T=14;break e;case Y:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=xr(T,l,a,p),a.elementType=i,a.type=c,a.lanes=g,a}function Go(i,a,l,c){return i=xr(7,i,c,a),i.lanes=l,i}function u0(i,a,l,c){i=xr(22,i,c,a),i.elementType=H,i.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=p._current;if(g===null)throw Error(r(456));if((p._pendingVisibility&2)===0){var T=sa(g,2);T!==null&&(p._pendingVisibility|=2,jn(T,g,2))}},attach:function(){var g=p._current;if(g===null)throw Error(r(456));if((p._pendingVisibility&2)!==0){var T=sa(g,2);T!==null&&(p._pendingVisibility&=-3,jn(T,g,2))}}};return i.stateNode=p,i}function Cy(i,a,l){return i=xr(6,i,null,a),i.lanes=l,i}function Dy(i,a,l){return a=xr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function us(i){i.flags|=4}function c0(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Q0(a)){if(a=Dr.current,a!==null&&((et&4194176)===et?pi!==null:(et&62914560)!==et&&(et&536870912)===0||a!==pi))throw Dh=k_,Rw;i.flags|=8192}}function zp(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ks():536870912,i.lanes|=a,Iu|=a)}function $h(i,a){if(!it)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Rt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&31457280,c|=p.flags&31457280,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function fN(i,a,l){var c=a.pendingProps;switch(x_(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(a),null;case 1:return Rt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ss(rn),qi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ah(a)?us(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gr!==null&&(Ly(Gr),Gr=null))),Rt(a),null;case 26:return l=a.memoizedState,i===null?(us(a),l!==null?(Rt(a),c0(a,l)):(Rt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(us(a),Rt(a),c0(a,l)):(Rt(a),a.flags&=-16777217):(i.memoizedProps!==c&&us(a),Rt(a),a.flags&=-16777217),null;case 27:jl(a),l=vn.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&us(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Rt(a),null}i=Tt.current,Ah(a)?Aw(a):(i=B0(p,c,l),a.stateNode=i,us(a))}return Rt(a),null;case 5:if(jl(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&us(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Rt(a),null}if(i=Tt.current,Ah(a))Aw(a);else{switch(p=Zp(vn.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}i[un]=a,i[Jt]=c;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;e:switch(wn(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&us(a)}}return Rt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&us(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=vn.current,Ah(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,p=qn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[un]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||k0(i.nodeValue,l)),i||Vo(a)}else i=Zp(i).createTextNode(c),i[un]=a,a.stateNode=i}return Rt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Ah(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[un]=a}else Sh(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),p=!1}else Gr!==null&&(Ly(Gr),Gr=null),p=!0;if(!p)return a.flags&256?(ts(a),a):(ts(a),null)}if(ts(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),zp(a,a.updateQueue),Rt(a),null;case 4:return qi(),i===null&&Qy(a.stateNode.containerInfo),Rt(a),null;case 10:return ss(a.type),Rt(a),null;case 19:if(ot(nn),p=a.memoizedState,p===null)return Rt(a),null;if(c=(a.flags&128)!==0,g=p.rendering,g===null)if(c)$h(p,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=Ip(i),g!==null){for(a.flags|=128,$h(p,!1),i=g.updateQueue,a.updateQueue=i,zp(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)l0(l,i),l=l.sibling;return Me(nn,nn.current&1|2),a.child}i=i.sibling}p.tail!==null&&Xn()>qp&&(a.flags|=128,c=!0,$h(p,!1),a.lanes=4194304)}else{if(!c)if(i=Ip(g),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,zp(a,i),$h(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!it)return Rt(a),null}else 2*Xn()-p.renderingStartTime>qp&&l!==536870912&&(a.flags|=128,c=!0,$h(p,!1),a.lanes=4194304);p.isBackwards?(g.sibling=a.child,a.child=g):(i=p.last,i!==null?i.sibling=g:a.child=g,p.last=g)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Xn(),a.sibling=null,i=nn.current,Me(nn,c?i&1|2:i&1),a):(Rt(a),null);case 22:case 23:return ts(a),M_(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Rt(a),a.subtreeFlags&6&&(a.flags|=8192)):Rt(a),l=a.updateQueue,l!==null&&zp(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&ot(Lo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ss(rn),Rt(a),null;case 25:return null}throw Error(r(156,a.tag))}function pN(i,a){switch(x_(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ss(rn),qi(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return jl(a),null;case 13:if(ts(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Sh()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ot(nn),null;case 4:return qi(),null;case 10:return ss(a.type),null;case 22:case 23:return ts(a),M_(),i!==null&&ot(Lo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ss(rn),null;case 25:return null;default:return null}}function h0(i,a){switch(x_(a),a.tag){case 3:ss(rn),qi();break;case 26:case 27:case 5:jl(a);break;case 4:qi();break;case 13:ts(a);break;case 19:ot(nn);break;case 10:ss(a.type);break;case 22:case 23:ts(a),M_(),i!==null&&ot(Lo);break;case 24:ss(rn)}}var mN={getCacheForType:function(i){var a=Dn(rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},gN=typeof WeakMap=="function"?WeakMap:Map,Ct=0,mt=null,Ge=null,et=0,gt=0,dr=null,cs=!1,wu=!1,Py=!1,hs=0,Mt=0,ya=0,$o=0,Oy=0,Nr=0,Iu=0,Kh=null,gi=null,xy=!1,Ny=0,qp=1/0,jp=null,va=null,Hp=!1,Ko=null,Qh=0,ky=0,Vy=null,Wh=0,My=null;function fr(){if((Ct&2)!==0&&et!==0)return et&-et;if(S.T!==null){var i=mu;return i!==0?i:Hy()}return Yf()}function d0(){Nr===0&&(Nr=(et&536870912)===0||it?oh():536870912);var i=Dr.current;return i!==null&&(i.flags|=32),Nr}function jn(i,a,l){(i===mt&&gt===2||i.cancelPendingCommit!==null)&&(Au(i,0),ds(i,et,Nr,!1)),qt(i,l),((Ct&2)===0||i!==mt)&&(i===mt&&((Ct&2)===0&&($o|=l),Mt===4&&ds(i,et,Nr,!1)),_i(i))}function f0(i,a,l){if((Ct&6)!==0)throw Error(r(327));var c=!l&&(a&60)===0&&(a&i.expiredLanes)===0||$s(i,a),p=c?vN(i,a):By(i,a,!0),g=c;do{if(p===0){wu&&!c&&ds(i,a,0,!1);break}else if(p===6)ds(i,a,0,!cs);else{if(l=i.current.alternate,g&&!_N(l)){p=By(i,a,!1),g=!1;continue}if(p===2){if(g=a,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var w=i;p=Kh;var P=w.current.memoizedState.isDehydrated;if(P&&(Au(w,T).flags|=256),T=By(w,T,!1),T!==2){if(Py&&!P){w.errorRecoveryDisabledLanes|=g,$o|=g,p=4;break e}g=gi,gi=p,g!==null&&Ly(g)}p=T}if(g=!1,p!==2)continue}}if(p===1){Au(i,0),ds(i,a,0,!0);break}e:{switch(c=i,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){ds(c,a,Nr,!cs);break e}break;case 2:gi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=l,c.finishedLanes=a,(a&62914560)===a&&(g=Ny+300-Xn(),10<g)){if(ds(c,a,Nr,!cs),vr(c,0)!==0)break e;c.timeoutHandle=L0(p0.bind(null,c,l,gi,jp,xy,a,Nr,$o,Iu,cs,2,-0,0),g);break e}p0(c,l,gi,jp,xy,a,Nr,$o,Iu,cs,0,-0,0)}}break}while(!0);_i(i)}function Ly(i){gi===null?gi=i:gi.push.apply(gi,i)}function p0(i,a,l,c,p,g,T,w,P,F,re,ue,W){var ne=a.subtreeFlags;if((ne&8192||(ne&16785408)===16785408)&&(td={stylesheets:null,count:0,unsuspend:ZN},i0(a),a=ek(),a!==null)){i.cancelPendingCommit=a(T0.bind(null,i,l,c,p,T,w,P,1,ue,W)),ds(i,g,T,!F);return}T0(i,l,c,p,T,w,P,re,ue,W)}function _N(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],g=p.getSnapshot;p=p.value;try{if(!ur(g(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ds(i,a,l,c){a&=~Oy,a&=~$o,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var g=31-Fn(p),T=1<<g;c[g]=-1,p&=~T}l!==0&&Qs(i,l,a)}function Gp(){return(Ct&6)===0?(Yh(0),!1):!0}function Uy(){if(Ge!==null){if(gt===0)var i=Ge.return;else i=Ge,is=qo=null,H_(i),fu=null,Ph=0,i=Ge;for(;i!==null;)h0(i.alternate,i),i=i.return;Ge=null}}function Au(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,MN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Uy(),mt=i,Ge=l=_a(i.current,null),et=a,gt=0,dr=null,cs=!1,wu=$s(i,a),Py=!1,Iu=Nr=Oy=$o=ya=Mt=0,gi=Kh=null,xy=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-Fn(c),g=1<<p;a|=i[p],c&=~g}return hs=a,mp(),l}function m0(i,a){ze=null,S.H=mi,a===Ch?(a=Pw(),gt=3):a===Rw?(a=Pw(),gt=4):gt=a===CI?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,dr=a,Ge===null&&(Mt=1,Vp(i,Sr(a,i.current)))}function g0(){var i=S.H;return S.H=mi,i===null?mi:i}function _0(){var i=S.A;return S.A=mN,i}function Fy(){Mt=4,cs||(et&4194176)!==et&&Dr.current!==null||(wu=!0),(ya&134217727)===0&&($o&134217727)===0||mt===null||ds(mt,et,Nr,!1)}function By(i,a,l){var c=Ct;Ct|=2;var p=g0(),g=_0();(mt!==i||et!==a)&&(jp=null,Au(i,a)),a=!1;var T=Mt;e:do try{if(gt!==0&&Ge!==null){var w=Ge,P=dr;switch(gt){case 8:Uy(),T=6;break e;case 3:case 2:case 6:Dr.current===null&&(a=!0);var F=gt;if(gt=0,dr=null,Su(i,w,P,F),l&&wu){T=0;break e}break;default:F=gt,gt=0,dr=null,Su(i,w,P,F)}}yN(),T=Mt;break}catch(re){m0(i,re)}while(!0);return a&&i.shellSuspendCounter++,is=qo=null,Ct=c,S.H=p,S.A=g,Ge===null&&(mt=null,et=0,mp()),T}function yN(){for(;Ge!==null;)y0(Ge)}function vN(i,a){var l=Ct;Ct|=2;var c=g0(),p=_0();mt!==i||et!==a?(jp=null,qp=Xn()+500,Au(i,a)):wu=$s(i,a);e:do try{if(gt!==0&&Ge!==null){a=Ge;var g=dr;t:switch(gt){case 1:gt=0,dr=null,Su(i,a,g,1);break;case 2:if(Cw(g)){gt=0,dr=null,v0(a);break}a=function(){gt===2&&mt===i&&(gt=7),_i(i)},g.then(a,a);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Cw(g)?(gt=0,dr=null,v0(a)):(gt=0,dr=null,Su(i,a,g,7));break;case 5:var T=null;switch(Ge.tag){case 26:T=Ge.memoizedState;case 5:case 27:var w=Ge;if(!T||Q0(T)){gt=0,dr=null;var P=w.sibling;if(P!==null)Ge=P;else{var F=w.return;F!==null?(Ge=F,$p(F)):Ge=null}break t}}gt=0,dr=null,Su(i,a,g,5);break;case 6:gt=0,dr=null,Su(i,a,g,6);break;case 8:Uy(),Mt=6;break e;default:throw Error(r(462))}}EN();break}catch(re){m0(i,re)}while(!0);return is=qo=null,S.H=c,S.A=p,Ct=l,Ge!==null?0:(mt=null,et=0,mp(),Mt)}function EN(){for(;Ge!==null&&!p_();)y0(Ge)}function y0(i){var a=BI(i.alternate,i,hs);i.memoizedProps=i.pendingProps,a===null?$p(i):Ge=a}function v0(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=kI(l,a,a.pendingProps,a.type,void 0,et);break;case 11:a=kI(l,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:H_(a);default:h0(l,a),a=Ge=l0(a,hs),a=BI(l,a,hs)}i.memoizedProps=i.pendingProps,a===null?$p(i):Ge=a}function Su(i,a,l,c){is=qo=null,H_(a),fu=null,Ph=0;var p=a.return;try{if(lN(i,p,a,l,et)){Mt=1,Vp(i,Sr(l,i.current)),Ge=null;return}}catch(g){if(p!==null)throw Ge=p,g;Mt=1,Vp(i,Sr(l,i.current)),Ge=null;return}a.flags&32768?(it||c===1?i=!0:wu||(et&536870912)!==0?i=!1:(cs=i=!0,(c===2||c===3||c===6)&&(c=Dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),E0(a,i)):$p(a)}function $p(i){var a=i;do{if((a.flags&32768)!==0){E0(a,cs);return}i=a.return;var l=fN(a.alternate,a,hs);if(l!==null){Ge=l;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=i}while(a!==null);Mt===0&&(Mt=5)}function E0(i,a){do{var l=pN(i.alternate,i);if(l!==null){l.flags&=32767,Ge=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=l}while(i!==null);Mt=6,Ge=null}function T0(i,a,l,c,p,g,T,w,P,F){var re=S.T,ue=pe.p;try{pe.p=2,S.T=null,TN(i,a,l,c,ue,p,g,T,w,P,F)}finally{S.T=re,pe.p=ue}}function TN(i,a,l,c,p,g,T,w){do Ru();while(Ko!==null);if((Ct&6)!==0)throw Error(r(327));var P=i.finishedWork;if(c=i.finishedLanes,P===null)return null;if(i.finishedWork=null,i.finishedLanes=0,P===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var F=P.lanes|P.childLanes;if(F|=D_,Qf(i,c,F,g,T,w),i===mt&&(Ge=mt=null,et=0),(P.subtreeFlags&10256)===0&&(P.flags&10256)===0||Hp||(Hp=!0,ky=F,Vy=l,AN(ji,function(){return Ru(),null})),l=(P.flags&15990)!==0,(P.subtreeFlags&15990)!==0||l?(l=S.T,S.T=null,g=pe.p,pe.p=2,T=Ct,Ct|=4,cN(i,P),t0(P,i),Gx(Zy,i.containerInfo),im=!!Xy,Zy=Xy=null,i.current=P,XI(i,P.alternate,P),rh(),Ct=T,pe.p=g,S.T=l):i.current=P,Hp?(Hp=!1,Ko=i,Qh=c):b0(i,F),F=i.pendingLanes,F===0&&(va=null),sh(P.stateNode),_i(i),a!==null)for(p=i.onRecoverableError,P=0;P<a.length;P++)F=a[P],p(F.value,{componentStack:F.stack});return(Qh&3)!==0&&Ru(),F=i.pendingLanes,(c&4194218)!==0&&(F&42)!==0?i===My?Wh++:(Wh=0,My=i):Wh=0,Yh(0),null}function b0(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,xh(a)))}function Ru(){if(Ko!==null){var i=Ko,a=ky;ky=0;var l=Wf(Qh),c=S.T,p=pe.p;try{if(pe.p=32>l?32:l,S.T=null,Ko===null)var g=!1;else{l=Vy,Vy=null;var T=Ko,w=Qh;if(Ko=null,Qh=0,(Ct&6)!==0)throw Error(r(331));var P=Ct;if(Ct|=4,a0(T.current),r0(T,T.current,w,l),Ct=P,Yh(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Hs,T)}catch{}g=!0}return g}finally{pe.p=p,S.T=c,b0(i,a)}}return!1}function w0(i,a,l){a=Sr(l,a),a=iy(i.stateNode,a,2),i=fa(i,a,2),i!==null&&(qt(i,2),_i(i))}function pt(i,a,l){if(i.tag===3)w0(i,i,l);else for(;a!==null;){if(a.tag===3){w0(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(va===null||!va.has(c))){i=Sr(l,i),l=SI(2),c=fa(a,l,2),c!==null&&(RI(l,c,a,i),qt(c,2),_i(c));break}}a=a.return}}function zy(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new gN;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(Py=!0,p.add(l),i=bN.bind(null,i,a,l),a.then(i,i))}function bN(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,mt===i&&(et&l)===l&&(Mt===4||Mt===3&&(et&62914560)===et&&300>Xn()-Ny?(Ct&2)===0&&Au(i,0):Oy|=l,Iu===et&&(Iu=0)),_i(i)}function I0(i,a){a===0&&(a=Ks()),i=sa(i,a),i!==null&&(qt(i,a),_i(i))}function wN(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),I0(i,l)}function IN(i,a){var l=0;switch(i.tag){case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),I0(i,l)}function AN(i,a){return _o(i,a)}var Kp=null,Cu=null,qy=!1,Qp=!1,jy=!1,Qo=0;function _i(i){i!==Cu&&i.next===null&&(Cu===null?Kp=Cu=i:Cu=Cu.next=i),Qp=!0,qy||(qy=!0,RN(SN))}function Yh(i,a){if(!jy&&Qp){jy=!0;do for(var l=!1,c=Kp;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var T=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-Fn(42|i)+1)-1,g&=p&~(T&~w),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,R0(c,g))}else g=et,g=vr(c,c===mt?g:0),(g&3)===0||$s(c,g)||(l=!0,R0(c,g));c=c.next}while(l);jy=!1}}function SN(){Qp=qy=!1;var i=0;Qo!==0&&(VN()&&(i=Qo),Qo=0);for(var a=Xn(),l=null,c=Kp;c!==null;){var p=c.next,g=A0(c,a);g===0?(c.next=null,l===null?Kp=p:l.next=p,p===null&&(Cu=l)):(l=c,(i!==0||(g&3)!==0)&&(Qp=!0)),c=p}Yh(i)}function A0(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-Fn(g),w=1<<T,P=p[T];P===-1?((w&l)===0||(w&c)!==0)&&(p[T]=$l(w,a)):P<=a&&(i.expiredLanes|=w),g&=~w}if(a=mt,l=et,l=vr(i,i===a?l:0),c=i.callbackNode,l===0||i===a&&gt===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Gl(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||$s(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Gl(c),Wf(l)){case 2:case 8:l=ln;break;case 32:l=ji;break;case 268435456:l=ih;break;default:l=ji}return c=S0.bind(null,i),l=_o(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Gl(c),i.callbackPriority=2,i.callbackNode=null,2}function S0(i,a){var l=i.callbackNode;if(Ru()&&i.callbackNode!==l)return null;var c=et;return c=vr(i,i===mt?c:0),c===0?null:(f0(i,c,a),A0(i,Xn()),i.callbackNode!=null&&i.callbackNode===l?S0.bind(null,i):null)}function R0(i,a){if(Ru())return null;f0(i,a,!0)}function RN(i){LN(function(){(Ct&6)!==0?_o(Zt,i):i()})}function Hy(){return Qo===0&&(Qo=oh()),Qo}function C0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ai(""+i)}function D0(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function CN(i,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var g=C0((p[Jt]||null).action),T=c.submitter;T&&(a=(a=T[Jt]||null)?C0(a.formAction):T.getAttribute("formAction"),a!==null&&(g=a,T=null));var w=new Jl("action","action",null,c,p);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qo!==0){var P=T?D0(p,T):new FormData(p);J_(l,{pending:!0,data:P,method:p.method,action:g},null,P)}}else typeof g=="function"&&(w.preventDefault(),P=T?D0(p,T):new FormData(p),J_(l,{pending:!0,data:P,method:p.method,action:g},g,P))},currentTarget:p}]})}}for(var Gy=0;Gy<Tw.length;Gy++){var $y=Tw[Gy],DN=$y.toLowerCase(),PN=$y[0].toUpperCase()+$y.slice(1);Hr(DN,"on"+PN)}Hr(gw,"onAnimationEnd"),Hr(_w,"onAnimationIteration"),Hr(yw,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Kx,"onTransitionRun"),Hr(Qx,"onTransitionStart"),Hr(Wx,"onTransitionCancel"),Hr(vw,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ON=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xh));function P0(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],p=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var T=c.length-1;0<=T;T--){var w=c[T],P=w.instance,F=w.currentTarget;if(w=w.listener,P!==g&&p.isPropagationStopped())break e;g=w,p.currentTarget=F;try{g(p)}catch(re){kp(re)}p.currentTarget=null,g=P}else for(T=0;T<c.length;T++){if(w=c[T],P=w.instance,F=w.currentTarget,w=w.listener,P!==g&&p.isPropagationStopped())break e;g=w,p.currentTarget=F;try{g(p)}catch(re){kp(re)}p.currentTarget=null,g=P}}}}function Ye(i,a){var l=a[vo];l===void 0&&(l=a[vo]=new Set);var c=i+"__bubble";l.has(c)||(O0(a,i,2,!1),l.add(c))}function Ky(i,a,l){var c=0;a&&(c|=4),O0(l,i,c,a)}var Wp="_reactListening"+Math.random().toString(36).slice(2);function Qy(i){if(!i[Wp]){i[Wp]=!0,uh.forEach(function(l){l!=="selectionchange"&&(ON.has(l)||Ky(l,!1,i),Ky(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Wp]||(a[Wp]=!0,Ky("selectionchange",!1,a))}}function O0(i,a,l,c){switch(eA(a)){case 2:var p=rk;break;case 8:p=ik;break;default:p=ov}l=p.bind(null,a,l,i),p=void 0,!wr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Wy(i,a,l,c,p){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var w=c.stateNode.containerInfo;if(w===p||w.nodeType===8&&w.parentNode===p)break;if(T===4)for(T=c.return;T!==null;){var P=T.tag;if((P===3||P===4)&&(P=T.stateNode.containerInfo,P===p||P.nodeType===8&&P.parentNode===p))return;T=T.return}for(;w!==null;){if(T=jr(w),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){c=g=T;continue e}w=w.parentNode}}c=c.return}ep(function(){var F=g,re=Zl(l),ue=[];e:{var W=Ew.get(i);if(W!==void 0){var ne=Jl,Ce=i;switch(i){case"keypress":if(li(l)===0)break e;case"keydown":case"keyup":ne=su;break;case"focusin":Ce="focus",ne=nu;break;case"focusout":Ce="blur",ne=nu;break;case"beforeblur":case"afterblur":ne=nu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=T_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=lp;break;case gw:case _w:case yw:ne=ru;break;case vw:ne=cp;break;case"scroll":case"scrollend":ne=tp;break;case"wheel":ne=au;break;case"copy":case"cut":case"paste":ne=iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Th;break;case"toggle":case"beforetoggle":ne=dp}var Le=(a&4)!==0,Lt=!Le&&(i==="scroll"||i==="scrollend"),j=Le?W!==null?W+"Capture":null:W;Le=[];for(var U=F,Q;U!==null;){var ae=U;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||j===null||(ae=Io(U,j),ae!=null&&Le.push(Zh(U,ae,Q))),Lt)break;U=U.return}0<Le.length&&(W=new ne(W,Ce,null,l,re),ue.push({event:W,listeners:Le}))}}if((a&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",W&&l!==br&&(Ce=l.relatedTarget||l.fromElement)&&(jr(Ce)||Ce[Hi]))break e;if((ne||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(Ce=l.relatedTarget||l.toElement,ne=F,Ce=Ce?jr(Ce):null,Ce!==null&&(Lt=ee(Ce),Le=Ce.tag,Ce!==Lt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ne=null,Ce=F),ne!==Ce)){if(Le=Ir,ae="onMouseLeave",j="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Le=Th,ae="onPointerLeave",j="onPointerEnter",U="pointer"),Lt=ne==null?W:Zs(ne),Q=Ce==null?W:Zs(Ce),W=new Le(ae,U+"leave",ne,l,re),W.target=Lt,W.relatedTarget=Q,ae=null,jr(re)===F&&(Le=new Le(j,U+"enter",Ce,l,re),Le.target=Q,Le.relatedTarget=Lt,ae=Le),Lt=ae,ne&&Ce)t:{for(Le=ne,j=Ce,U=0,Q=Le;Q;Q=Du(Q))U++;for(Q=0,ae=j;ae;ae=Du(ae))Q++;for(;0<U-Q;)Le=Du(Le),U--;for(;0<Q-U;)j=Du(j),Q--;for(;U--;){if(Le===j||j!==null&&Le===j.alternate)break t;Le=Du(Le),j=Du(j)}Le=null}else Le=null;ne!==null&&x0(ue,W,ne,Le,!1),Ce!==null&&Lt!==null&&x0(ue,Lt,Ce,Le,!0)}}e:{if(W=F?Zs(F):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var we=sw;else if(tn(W))if(aw)we=jx;else{we=zx;var He=Bx}else ne=W.nodeName,!ne||ne.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&ph(F.elementType)&&(we=sw):we=qx;if(we&&(we=we(i,F))){Zi(ue,we,l,re);break e}He&&He(i,W,F),i==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Xl(W,"number",W.value)}switch(He=F?Zs(F):window,i){case"focusin":(tn(He)||He.contentEditable==="true")&&(ou=He,S_=F,Ih=null);break;case"focusout":Ih=S_=ou=null;break;case"mousedown":R_=!0;break;case"contextmenu":case"mouseup":case"dragend":R_=!1,pw(ue,l,re);break;case"selectionchange":if($x)break;case"keydown":case"keyup":pw(ue,l,re)}var Oe;if(hi)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ze?J(i,l)&&(ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(E&&l.locale!=="ko"&&(Ze||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ze&&(Oe=gh()):(oi=re,ia="value"in oi?oi.value:oi.textContent,Ze=!0)),He=Yp(F,ke),0<He.length&&(ke=new vh(ke,i,null,l,re),ue.push({event:ke,listeners:He}),Oe?ke.data=Oe:(Oe=ge(l),Oe!==null&&(ke.data=Oe)))),(Oe=y?en(i,l):Je(i,l))&&(ke=Yp(F,"onBeforeInput"),0<ke.length&&(He=new vh("onBeforeInput","beforeinput",null,l,re),ue.push({event:He,listeners:ke}),He.data=Oe)),CN(ue,i,F,l,re)}P0(ue,a)})}function Zh(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Yp(i,a){for(var l=a+"Capture",c=[];i!==null;){var p=i,g=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Io(i,l),p!=null&&c.unshift(Zh(i,p,g)),p=Io(i,a),p!=null&&c.push(Zh(i,p,g))),i=i.return}return c}function Du(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function x0(i,a,l,c,p){for(var g=a._reactName,T=[];l!==null&&l!==c;){var w=l,P=w.alternate,F=w.stateNode;if(w=w.tag,P!==null&&P===c)break;w!==5&&w!==26&&w!==27||F===null||(P=F,p?(F=Io(l,g),F!=null&&T.unshift(Zh(l,F,P))):p||(F=Io(l,g),F!=null&&T.push(Zh(l,F,P)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var xN=/\r\n?/g,NN=/\u0000|\uFFFD/g;function N0(i){return(typeof i=="string"?i:""+i).replace(xN,`
`).replace(NN,"")}function k0(i,a){return a=N0(a),N0(i)===a}function Xp(){}function ft(i,a,l,c,p,g){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Tr(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Tr(i,""+c);break;case"className":ta(i,"class",c);break;case"tabIndex":ta(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(i,l,c);break;case"style":Jf(i,c,g);break;case"data":if(a!=="object"){ta(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=ai(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&ft(i,a,"name",p.name,p,null),ft(i,a,"formEncType",p.formEncType,p,null),ft(i,a,"formMethod",p.formMethod,p,null),ft(i,a,"formTarget",p.formTarget,p,null)):(ft(i,a,"encType",p.encType,p,null),ft(i,a,"method",p.method,p,null),ft(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=ai(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Xp);break;case"onScroll":c!=null&&Ye("scroll",i);break;case"onScrollEnd":c!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=ai(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),ea(i,"popover",c);break;case"xlinkActuate":Er(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Er(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Er(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Er(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Er(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Er(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Er(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Er(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Er(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ea(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=v_.get(l)||l,ea(i,l,c))}}function Yy(i,a,l,c,p,g){switch(l){case"style":Jf(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?Tr(i,c):(typeof c=="number"||typeof c=="bigint")&&Tr(i,""+c);break;case"onScroll":c!=null&&Ye("scroll",i);break;case"onScrollEnd":c!=null&&Ye("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),g=i[Jt]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,p);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):ea(i,l,c)}}}function wn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var c=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ft(i,a,g,T,l,null)}}p&&ft(i,a,"srcSet",l.srcSet,l,null),c&&ft(i,a,"src",l.src,l,null);return;case"input":Ye("invalid",i);var w=g=T=p=null,P=null,F=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":p=re;break;case"type":T=re;break;case"checked":P=re;break;case"defaultChecked":F=re;break;case"value":g=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,a));break;default:ft(i,a,c,re,l,null)}}bo(i,g,w,P,F,T,p,!1),To(i);return;case"select":Ye("invalid",i),c=T=g=null;for(p in l)if(l.hasOwnProperty(p)&&(w=l[p],w!=null))switch(p){case"value":g=w;break;case"defaultValue":T=w;break;case"multiple":c=w;default:ft(i,a,p,w,l,null)}a=g,l=T,i.multiple=!!c,a!=null?rt(i,!!c,a,!1):l!=null&&rt(i,!!c,l,!0);return;case"textarea":Ye("invalid",i),g=p=c=null;for(T in l)if(l.hasOwnProperty(T)&&(w=l[T],w!=null))switch(T){case"value":c=w;break;case"defaultValue":p=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:ft(i,a,T,w,l,null)}ra(i,c,p,g),To(i);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(c=l[P],c!=null))switch(P){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(i,a,P,c,l,null)}return;case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(c=0;c<Xh.length;c++)Ye(Xh[c],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ft(i,a,F,c,l,null)}return;default:if(ph(a)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&Yy(i,a,re,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&ft(i,a,w,c,l,null))}function kN(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,T=null,w=null,P=null,F=null,re=null;for(ne in l){var ue=l[ne];if(l.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":P=ue;default:c.hasOwnProperty(ne)||ft(i,a,ne,null,c,ue)}}for(var W in c){var ne=c[W];if(ue=l[W],c.hasOwnProperty(W)&&(ne!=null||ue!=null))switch(W){case"type":g=ne;break;case"name":p=ne;break;case"checked":F=ne;break;case"defaultChecked":re=ne;break;case"value":T=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:ne!==ue&&ft(i,a,W,ne,c,ue)}}na(i,T,w,P,F,re,g,p);return;case"select":ne=T=w=W=null;for(g in l)if(P=l[g],l.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":ne=P;default:c.hasOwnProperty(g)||ft(i,a,g,null,c,P)}for(p in c)if(g=c[p],P=l[p],c.hasOwnProperty(p)&&(g!=null||P!=null))switch(p){case"value":W=g;break;case"defaultValue":w=g;break;case"multiple":T=g;default:g!==P&&ft(i,a,p,g,c,P)}a=w,l=T,c=ne,W!=null?rt(i,!!l,W,!1):!!c!=!!l&&(a!=null?rt(i,!!l,a,!0):rt(i,!!l,l?[]:"",!1));return;case"textarea":ne=W=null;for(w in l)if(p=l[w],l.hasOwnProperty(w)&&p!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ft(i,a,w,null,c,p)}for(T in c)if(p=c[T],g=l[T],c.hasOwnProperty(T)&&(p!=null||g!=null))switch(T){case"value":W=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==g&&ft(i,a,T,p,c,g)}wo(i,W,ne);return;case"option":for(var Ce in l)if(W=l[Ce],l.hasOwnProperty(Ce)&&W!=null&&!c.hasOwnProperty(Ce))switch(Ce){case"selected":i.selected=!1;break;default:ft(i,a,Ce,null,c,W)}for(P in c)if(W=c[P],ne=l[P],c.hasOwnProperty(P)&&W!==ne&&(W!=null||ne!=null))switch(P){case"selected":i.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ft(i,a,P,W,c,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)W=l[Le],l.hasOwnProperty(Le)&&W!=null&&!c.hasOwnProperty(Le)&&ft(i,a,Le,null,c,W);for(F in c)if(W=c[F],ne=l[F],c.hasOwnProperty(F)&&W!==ne&&(W!=null||ne!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:ft(i,a,F,W,c,ne)}return;default:if(ph(a)){for(var Lt in l)W=l[Lt],l.hasOwnProperty(Lt)&&W!==void 0&&!c.hasOwnProperty(Lt)&&Yy(i,a,Lt,void 0,c,W);for(re in c)W=c[re],ne=l[re],!c.hasOwnProperty(re)||W===ne||W===void 0&&ne===void 0||Yy(i,a,re,W,c,ne);return}}for(var j in l)W=l[j],l.hasOwnProperty(j)&&W!=null&&!c.hasOwnProperty(j)&&ft(i,a,j,null,c,W);for(ue in c)W=c[ue],ne=l[ue],!c.hasOwnProperty(ue)||W===ne||W==null&&ne==null||ft(i,a,ue,W,c,ne)}var Xy=null,Zy=null;function Zp(i){return i.nodeType===9?i:i.ownerDocument}function V0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Jy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ev=null;function VN(){var i=window.event;return i&&i.type==="popstate"?i===ev?!1:(ev=i,!0):(ev=null,!1)}var L0=typeof setTimeout=="function"?setTimeout:void 0,MN=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,LN=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(i){return U0.resolve(null).then(i).catch(UN)}:L0;function UN(i){setTimeout(function(){throw i})}function tv(i,a){var l=a,c=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(c===0){i.removeChild(p),ad(a);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=p}while(l);ad(a)}function nv(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":nv(l),Eo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function FN(i,a,l,c){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Xs])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Kr(i.nextSibling),i===null)break}return null}function BN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Kr(i.nextSibling),i===null))return null;return i}function Kr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function F0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function B0(i,a,l){switch(a=Zp(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var kr=new Map,z0=new Set;function Jp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var fs=pe.d;pe.d={f:zN,r:qN,D:jN,C:HN,L:GN,m:$N,X:QN,S:KN,M:WN};function zN(){var i=fs.f(),a=Gp();return i||a}function qN(i){var a=Gi(i);a!==null&&a.tag===5&&a.type==="form"?pI(a):fs.r(i)}var Pu=typeof document>"u"?null:document;function q0(i,a,l){var c=Pu;if(c&&typeof a=="string"&&a){var p=kt(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),z0.has(p)||(z0.add(p),i={rel:i,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),wn(a,"link",i),St(a),c.head.appendChild(a)))}}function jN(i){fs.D(i),q0("dns-prefetch",i,null)}function HN(i,a){fs.C(i,a),q0("preconnect",i,a)}function GN(i,a,l){fs.L(i,a,l);var c=Pu;if(c&&i&&a){var p='link[rel="preload"][as="'+kt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+kt(l.imageSizes)+'"]')):p+='[href="'+kt(i)+'"]';var g=p;switch(a){case"style":g=Ou(i);break;case"script":g=xu(i)}kr.has(g)||(i=D({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),kr.set(g,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(Jh(g))||a==="script"&&c.querySelector(ed(g))||(a=c.createElement("link"),wn(a,"link",i),St(a),c.head.appendChild(a)))}}function $N(i,a){fs.m(i,a);var l=Pu;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+kt(c)+'"][href="'+kt(i)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xu(i)}if(!kr.has(g)&&(i=D({rel:"modulepreload",href:i},a),kr.set(g,i),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ed(g)))return}c=l.createElement("link"),wn(c,"link",i),St(c),l.head.appendChild(c)}}}function KN(i,a,l){fs.S(i,a,l);var c=Pu;if(c&&i){var p=Js(c).hoistableStyles,g=Ou(i);a=a||"default";var T=p.get(g);if(!T){var w={loading:0,preload:null};if(T=c.querySelector(Jh(g)))w.loading=5;else{i=D({rel:"stylesheet",href:i,"data-precedence":a},l),(l=kr.get(g))&&rv(i,l);var P=T=c.createElement("link");St(P),wn(P,"link",i),P._p=new Promise(function(F,re){P.onload=F,P.onerror=re}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,em(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:w},p.set(g,T)}}}function QN(i,a){fs.X(i,a);var l=Pu;if(l&&i){var c=Js(l).hoistableScripts,p=xu(i),g=c.get(p);g||(g=l.querySelector(ed(p)),g||(i=D({src:i,async:!0},a),(a=kr.get(p))&&iv(i,a),g=l.createElement("script"),St(g),wn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function WN(i,a){fs.M(i,a);var l=Pu;if(l&&i){var c=Js(l).hoistableScripts,p=xu(i),g=c.get(p);g||(g=l.querySelector(ed(p)),g||(i=D({src:i,async:!0,type:"module"},a),(a=kr.get(p))&&iv(i,a),g=l.createElement("script"),St(g),wn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function j0(i,a,l,c){var p=(p=vn.current)?Jp(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ou(l.href),l=Js(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ou(l.href);var g=Js(p).hoistableStyles,T=g.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=p.querySelector(Jh(i)))&&!g._p&&(T.instance=g,T.state.loading=5),kr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},kr.set(i,l),g||YN(p,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xu(l),l=Js(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ou(i){return'href="'+kt(i)+'"'}function Jh(i){return'link[rel="stylesheet"]['+i+"]"}function H0(i){return D({},i,{"data-precedence":i.precedence,precedence:null})}function YN(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),wn(a,"link",l),St(a),i.head.appendChild(a))}function xu(i){return'[src="'+kt(i)+'"]'}function ed(i){return"script[async]"+i}function G0(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+kt(l.href)+'"]');if(c)return a.instance=c,St(c),c;var p=D({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),St(c),wn(c,"style",p),em(c,l.precedence,i),a.instance=c;case"stylesheet":p=Ou(l.href);var g=i.querySelector(Jh(p));if(g)return a.state.loading|=4,a.instance=g,St(g),g;c=H0(l),(p=kr.get(p))&&rv(c,p),g=(i.ownerDocument||i).createElement("link"),St(g);var T=g;return T._p=new Promise(function(w,P){T.onload=w,T.onerror=P}),wn(g,"link",c),a.state.loading|=4,em(g,l.precedence,i),a.instance=g;case"script":return g=xu(l.src),(p=i.querySelector(ed(g)))?(a.instance=p,St(p),p):(c=l,(p=kr.get(g))&&(c=D({},l),iv(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),St(p),wn(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,em(c,l.precedence,i));return a.instance}function em(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,T=0;T<c.length;T++){var w=c[T];if(w.dataset.precedence===a)g=w;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function rv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function iv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var tm=null;function $0(i,a,l){if(tm===null){var c=new Map,p=tm=new Map;p.set(l,c)}else p=tm,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var g=l[p];if(!(g[Xs]||g[un]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(a)||"";T=i+T;var w=c.get(T);w?w.push(g):c.set(T,[g])}}return c}function K0(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function XN(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Q0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var td=null;function ZN(){}function JN(i,a,l){if(td===null)throw Error(r(475));var c=td;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Ou(l.href),g=i.querySelector(Jh(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=nm.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=g,St(g);return}g=i.ownerDocument||i,l=H0(l),(p=kr.get(p))&&rv(l,p),g=g.createElement("link"),St(g);var T=g;T._p=new Promise(function(w,P){T.onload=w,T.onerror=P}),wn(g,"link",l),a.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=nm.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function ek(){if(td===null)throw Error(r(475));var i=td;return i.stylesheets&&i.count===0&&sv(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&sv(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function nm(){if(this.count--,this.count===0){if(this.stylesheets)sv(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rm=null;function sv(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rm=new Map,a.forEach(tk,i),rm=null,nm.call(i))}function tk(i,a){if(!(a.state.loading&4)){var l=rm.get(i);if(l)var c=l.get(null);else{l=new Map,rm.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var T=p[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),g=l.get(T)||c,g===c&&l.set(null,p),l.set(T,p),this.count++,c=nm.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var nd={$$typeof:I,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function nk(i,a,l,c,p,g,T,w){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.hiddenUpdates=Kl(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function W0(i,a,l,c,p,g,T,w,P,F,re,ue){return i=new nk(i,a,l,T,w,P,F,ue),a=1,g===!0&&(a|=24),g=xr(3,null,null,a),i.current=g,g.stateNode=i,a=L_(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:a},_y(g),i}function Y0(i){return i?(i=cu,i):cu}function X0(i,a,l,c,p,g){p=Y0(p),c.context===null?c.context=p:c.pendingContext=p,c=da(a),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=fa(i,c,a),l!==null&&(jn(l,i,a),Fh(l,i,a))}function Z0(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function av(i,a){Z0(i,a),(i=i.alternate)&&Z0(i,a)}function J0(i){if(i.tag===13){var a=sa(i,67108864);a!==null&&jn(a,i,67108864),av(i,67108864)}}var im=!0;function rk(i,a,l,c){var p=S.T;S.T=null;var g=pe.p;try{pe.p=2,ov(i,a,l,c)}finally{pe.p=g,S.T=p}}function ik(i,a,l,c){var p=S.T;S.T=null;var g=pe.p;try{pe.p=8,ov(i,a,l,c)}finally{pe.p=g,S.T=p}}function ov(i,a,l,c){if(im){var p=lv(c);if(p===null)Wy(i,a,c,sm,l),tA(i,c);else if(ak(p,i,a,l,c))c.stopPropagation();else if(tA(i,c),a&4&&-1<sk.indexOf(i)){for(;p!==null;){var g=Gi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=qr(g.pendingLanes);if(T!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var P=1<<31-Fn(T);w.entanglements[1]|=P,T&=~P}_i(g),(Ct&6)===0&&(qp=Xn()+500,Yh(0))}}break;case 13:w=sa(g,2),w!==null&&jn(w,g,2),Gp(),av(g,2)}if(g=lv(c),g===null&&Wy(i,a,c,sm,l),g===p)break;p=g}p!==null&&c.stopPropagation()}else Wy(i,a,c,null,l)}}function lv(i){return i=Zl(i),uv(i)}var sm=null;function uv(i){if(sm=null,i=jr(i),i!==null){var a=ee(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=me(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return sm=i,null}function eA(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hf()){case Zt:return 2;case ln:return 8;case ji:case Gf:return 32;case ih:return 268435456;default:return 32}default:return 32}}var cv=!1,Ea=null,Ta=null,ba=null,rd=new Map,id=new Map,wa=[],sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tA(i,a){switch(i){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":rd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(a.pointerId)}}function sd(i,a,l,c,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},a!==null&&(a=Gi(a),a!==null&&J0(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function ak(i,a,l,c,p){switch(a){case"focusin":return Ea=sd(Ea,i,a,l,c,p),!0;case"dragenter":return Ta=sd(Ta,i,a,l,c,p),!0;case"mouseover":return ba=sd(ba,i,a,l,c,p),!0;case"pointerover":var g=p.pointerId;return rd.set(g,sd(rd.get(g)||null,i,a,l,c,p)),!0;case"gotpointercapture":return g=p.pointerId,id.set(g,sd(id.get(g)||null,i,a,l,c,p)),!0}return!1}function nA(i){var a=jr(i.target);if(a!==null){var l=ee(a);if(l!==null){if(a=l.tag,a===13){if(a=me(l),a!==null){i.blockedOn=a,Ys(i.priority,function(){if(l.tag===13){var c=fr(),p=sa(l,c);p!==null&&jn(p,l,c),av(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function am(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=lv(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);br=c,l.target.dispatchEvent(c),br=null}else return a=Gi(l),a!==null&&J0(a),i.blockedOn=l,!1;a.shift()}return!0}function rA(i,a,l){am(i)&&l.delete(a)}function ok(){cv=!1,Ea!==null&&am(Ea)&&(Ea=null),Ta!==null&&am(Ta)&&(Ta=null),ba!==null&&am(ba)&&(ba=null),rd.forEach(rA),id.forEach(rA)}function om(i,a){i.blockedOn===a&&(i.blockedOn=null,cv||(cv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ok)))}var lm=null;function iA(i){lm!==i&&(lm=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){lm===i&&(lm=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(uv(c||l)===null)continue;break}var g=Gi(l);g!==null&&(i.splice(a,3),a-=3,J_(g,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function ad(i){function a(P){return om(P,i)}Ea!==null&&om(Ea,i),Ta!==null&&om(Ta,i),ba!==null&&om(ba,i),rd.forEach(a),id.forEach(a);for(var l=0;l<wa.length;l++){var c=wa[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<wa.length&&(l=wa[0],l.blockedOn===null);)nA(l),l.blockedOn===null&&wa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],g=l[c+1],T=p[Jt]||null;if(typeof g=="function")T||iA(l);else if(T){var w=null;if(g&&g.hasAttribute("formAction")){if(p=g,T=g[Jt]||null)w=T.formAction;else if(uv(p)!==null)continue}else w=T.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),iA(l)}}}function hv(i){this._internalRoot=i}um.prototype.render=hv.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=fr();X0(l,c,i,a,null,null)},um.prototype.unmount=hv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&Ru(),X0(i.current,2,null,i,null,null),Gp(),a[Hi]=null}};function um(i){this._internalRoot=i}um.prototype.unstable_scheduleHydration=function(i){if(i){var a=Yf();i={blockedOn:null,target:i,priority:a};for(var l=0;l<wa.length&&a!==0&&a<wa[l].priority;l++);wa.splice(l,0,i),l===0&&nA(i)}};var sA=e.version;if(sA!=="19.0.0")throw Error(r(527,sA,"19.0.0"));pe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=te(a),i=i!==null?_e(i):null,i=i===null?null:i.stateNode,i};var lk={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:jr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{Hs=cm.inject(lk),Cn=cm}catch{}}return ld.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",p=bI,g=wI,T=II,w=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=W0(i,1,!1,null,null,l,c,p,g,T,w,null),i[Hi]=a.current,Qy(i.nodeType===8?i.parentNode:i),new hv(a)},ld.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,p="",g=bI,T=wI,w=II,P=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),a=W0(i,1,!0,a,l??null,c,p,g,T,w,P,F),a.context=Y0(null),l=a.current,c=fr(),p=da(c),p.callback=null,fa(l,p,c),a.current.lanes=c,qt(a,c),_i(a),i[Hi]=a.current,Qy(i),new um(a)},ld.version="19.0.0",ld}var gA;function yk(){if(gA)return mv.exports;gA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mv.exports=_k(),mv.exports}var vk=yk();const Ek="modulepreload",Tk=function(n){return"/dazone/"+n},_A={},Ns=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=Tk(d),d in _A)return;_A[d]=!0;const m=d.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":Ek,m||(v.as="script"),v.crossOrigin="",v.href=d,h&&v.setAttribute("nonce",h),document.head.appendChild(v),m)return new Promise((b,I)=>{v.addEventListener("load",b),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};var ud={},yA;function bk(){if(yA)return ud;yA=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.parse=u,ud.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function u(b,I){const C=new o,V=b.length;if(V<2)return C;const N=(I==null?void 0:I.decode)||_;let B=0;do{const Y=b.indexOf("=",B);if(Y===-1)break;const H=b.indexOf(";",B),se=H===-1?V:H;if(Y>se){B=b.lastIndexOf(";",Y-1)+1;continue}const ie=h(b,B,Y),X=d(b,Y,ie),x=b.slice(ie,X);if(C[x]===void 0){let R=h(b,Y+1,se),S=d(b,se,R);const D=N(b.slice(R,S));C[x]=D}B=se+1}while(B<V);return C}function h(b,I,C){do{const V=b.charCodeAt(I);if(V!==32&&V!==9)return I}while(++I<C);return C}function d(b,I,C){for(;I>C;){const V=b.charCodeAt(--I);if(V!==32&&V!==9)return I+1}return C}function m(b,I,C){const V=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const N=V(I);if(!e.test(N))throw new TypeError(`argument val is invalid: ${I}`);let B=b+"="+N;if(!C)return B;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);B+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);B+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);B+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);B+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(B+="; HttpOnly"),C.secure&&(B+="; Secure"),C.partitioned&&(B+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return B}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return s.call(b)==="[object Date]"}return ud}bk();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vA="popstate";function wk(n={}){function e(r,s){let{pathname:o,search:u,hash:h}=r.location;return Gv("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:zd(s)}return Ak(e,t,null,n)}function Dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ik(){return Math.random().toString(36).substring(2,10)}function EA(n,e){return{usr:n.state,key:n.key,idx:e}}function Gv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Uc(e):e,state:t,key:e&&e.key||r||Ik()}}function zd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Uc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Ak(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,h="POP",d=null,m=_();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function _(){return(u.state||{idx:null}).idx}function v(){h="POP";let N=_(),B=N==null?null:N-m;m=N,d&&d({action:h,location:V.location,delta:B})}function b(N,B){h="PUSH";let Y=Gv(V.location,N,B);m=_()+1;let H=EA(Y,m),se=V.createHref(Y);try{u.pushState(H,"",se)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(se)}o&&d&&d({action:h,location:V.location,delta:1})}function I(N,B){h="REPLACE";let Y=Gv(V.location,N,B);m=_();let H=EA(Y,m),se=V.createHref(Y);u.replaceState(H,"",se),o&&d&&d({action:h,location:V.location,delta:0})}function C(N){let B=s.location.origin!=="null"?s.location.origin:s.location.href,Y=typeof N=="string"?N:zd(N);return Y=Y.replace(/ $/,"%20"),Dt(B,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,B)}let V={get action(){return h},get location(){return n(s,u)},listen(N){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(vA,v),d=N,()=>{s.removeEventListener(vA,v),d=null}},createHref(N){return e(s,N)},createURL:C,encodeLocation(N){let B=C(N);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:b,replace:I,go(N){return u.go(N)}};return V}function mC(n,e,t="/"){return Sk(n,e,t,!1)}function Sk(n,e,t,r){let s=typeof e=="string"?Uc(e):e,o=Ss(s.pathname||"/",t);if(o==null)return null;let u=gC(n);Rk(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let m=Uk(o);h=Mk(u[d],m,r)}return h}function gC(n,e=[],t=[],r=""){let s=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(Dt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let m=bs([r,d.relativePath]),_=t.concat(d);o.children&&o.children.length>0&&(Dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),gC(o.children,e,_,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:kk(m,o.index),routesMeta:_})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let d of _C(o.path))s(o,u,d)}),e}function _C(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=_C(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function Rk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Vk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Ck=/^:[\w-]+$/,Dk=3,Pk=2,Ok=1,xk=10,Nk=-2,TA=n=>n==="*";function kk(n,e){let t=n.split("/"),r=t.length;return t.some(TA)&&(r+=Nk),e&&(r+=Pk),t.filter(s=>!TA(s)).reduce((s,o)=>s+(Ck.test(o)?Dk:o===""?Ok:xk),r)}function Vk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Mk(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=$m({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},_),b=d.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=$m({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:bs([o,v.pathname]),pathnameBase:qk(bs([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=bs([o,v.pathnameBase]))}return u}function $m(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Lk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:_,isOptional:v},b)=>{if(_==="*"){let C=h[b]||"";u=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const I=h[b];return v&&!I?m[_]=void 0:m[_]=(I||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:n}}function Lk(n,e=!1,t=!0){Jr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Uk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ss(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Fk(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Uc(n):n;return{pathname:t?t.startsWith("/")?t:Bk(t,e):e,search:jk(r),hash:Hk(s)}}function Bk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yC(n){let e=zk(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function vC(n,e,t,r=!1){let s;typeof n=="string"?s=Uc(n):(s={...n},Dt(!s.pathname||!s.pathname.includes("?"),vv("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),vv("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),vv("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;s.pathname=b.join("/")}h=v>=0?e[v]:"/"}let d=Fk(s,h),m=u&&u!=="/"&&u.endsWith("/"),_=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||_)&&(d.pathname+="/"),d}var bs=n=>n.join("/").replace(/\/\/+/g,"/"),qk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Hk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Gk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var EC=["POST","PUT","PATCH","DELETE"];new Set(EC);var $k=["GET",...EC];new Set($k);var Fc=K.createContext(null);Fc.displayName="DataRouter";var Ag=K.createContext(null);Ag.displayName="DataRouterState";var TC=K.createContext({isTransitioning:!1});TC.displayName="ViewTransition";var Kk=K.createContext(new Map);Kk.displayName="Fetchers";var Qk=K.createContext(null);Qk.displayName="Await";var Bi=K.createContext(null);Bi.displayName="Navigation";var vf=K.createContext(null);vf.displayName="Location";var ti=K.createContext({outlet:null,matches:[],isDataRoute:!1});ti.displayName="Route";var tT=K.createContext(null);tT.displayName="RouteError";function Wk(n,{relative:e}={}){Dt(Ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(Bi),{hash:s,pathname:o,search:u}=Tf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:bs([t,o])),r.createHref({pathname:h,search:u,hash:s})}function Ef(){return K.useContext(vf)!=null}function lo(){return Dt(Ef(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(vf).location}var bC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wC(n){K.useContext(Bi).static||K.useLayoutEffect(n)}function IC(){let{isDataRoute:n}=K.useContext(ti);return n?cV():Yk()}function Yk(){Dt(Ef(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Fc),{basename:e,navigator:t}=K.useContext(Bi),{matches:r}=K.useContext(ti),{pathname:s}=lo(),o=JSON.stringify(yC(r)),u=K.useRef(!1);return wC(()=>{u.current=!0}),K.useCallback((d,m={})=>{if(Jr(u.current,bC),!u.current)return;if(typeof d=="number"){t.go(d);return}let _=vC(d,JSON.parse(o),s,m.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:bs([e,_.pathname])),(m.replace?t.replace:t.push)(_,m.state,m)},[e,t,o,s,n])}var Xk=K.createContext(null);function Zk(n){let e=K.useContext(ti).outlet;return e&&K.createElement(Xk.Provider,{value:n},e)}function L3(){let{matches:n}=K.useContext(ti),e=n[n.length-1];return e?e.params:{}}function Tf(n,{relative:e}={}){let{matches:t}=K.useContext(ti),{pathname:r}=lo(),s=JSON.stringify(yC(t));return K.useMemo(()=>vC(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function Jk(n,e){return AC(n,e)}function AC(n,e,t,r){var Y;Dt(Ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=K.useContext(Bi),{matches:u}=K.useContext(ti),h=u[u.length-1],d=h?h.params:{},m=h?h.pathname:"/",_=h?h.pathnameBase:"/",v=h&&h.route;{let H=v&&v.path||"";SC(m,!v||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let b=lo(),I;if(e){let H=typeof e=="string"?Uc(e):e;Dt(_==="/"||((Y=H.pathname)==null?void 0:Y.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${H.pathname}" was given in the \`location\` prop.`),I=H}else I=b;let C=I.pathname||"/",V=C;if(_!=="/"){let H=_.replace(/^\//,"").split("/");V="/"+C.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=!o&&t&&t.matches&&t.matches.length>0?t.matches:mC(n,{pathname:V});Jr(v||N!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Jr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=iV(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:bs([_,s.encodeLocation?s.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?_:bs([_,s.encodeLocation?s.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,t,r);return e&&B?K.createElement(vf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},B):B}function eV(){let n=uV(),e=Gk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:o},"ErrorBoundary")," or"," ",K.createElement("code",{style:o},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:s},t):null,u)}var tV=K.createElement(eV,null),nV=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(ti.Provider,{value:this.props.routeContext},K.createElement(tT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rV({routeContext:n,match:e,children:t}){let r=K.useContext(Fc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(ti.Provider,{value:n},t)}function iV(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Dt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:_,errors:v}=t,b=m.route.loader&&!_.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,m,_)=>{let v,b=!1,I=null,C=null;t&&(v=o&&m.route.id?o[m.route.id]:void 0,I=m.route.errorElement||tV,u&&(h<0&&_===0?(SC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):h===_&&(b=!0,C=m.route.hydrateFallbackElement||null)));let V=e.concat(s.slice(0,_+1)),N=()=>{let B;return v?B=I:b?B=C:m.route.Component?B=K.createElement(m.route.Component,null):m.route.element?B=m.route.element:B=d,K.createElement(rV,{match:m,routeContext:{outlet:d,matches:V,isDataRoute:t!=null},children:B})};return t&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?K.createElement(nV,{location:t.location,revalidation:t.revalidation,component:I,error:v,children:N(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):N()},null)}function nT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sV(n){let e=K.useContext(Fc);return Dt(e,nT(n)),e}function aV(n){let e=K.useContext(Ag);return Dt(e,nT(n)),e}function oV(n){let e=K.useContext(ti);return Dt(e,nT(n)),e}function rT(n){let e=oV(n),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lV(){return rT("useRouteId")}function uV(){var r;let n=K.useContext(tT),e=aV("useRouteError"),t=rT("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function cV(){let{router:n}=sV("useNavigate"),e=rT("useNavigate"),t=K.useRef(!1);return wC(()=>{t.current=!0}),K.useCallback(async(s,o={})=>{Jr(t.current,bC),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var bA={};function SC(n,e,t){!e&&!bA[n]&&(bA[n]=!0,Jr(!1,t))}K.memo(hV);function hV({routes:n,future:e,state:t}){return AC(n,void 0,t,e)}function U3(n){return Zk(n.context)}function er(n){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dV({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Dt(!Ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=K.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=Uc(t));let{pathname:d="/",search:m="",hash:_="",state:v=null,key:b="default"}=t,I=K.useMemo(()=>{let C=Ss(d,u);return C==null?null:{location:{pathname:C,search:m,hash:_,state:v,key:b},navigationType:r}},[u,d,m,_,v,b,r]);return Jr(I!=null,`<Router basename="${u}"> is not able to match the URL "${d}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:K.createElement(Bi.Provider,{value:h},K.createElement(vf.Provider,{children:e,value:I}))}function fV({children:n,location:e}){return Jk($v(n),e)}function $v(n,e=[]){let t=[];return K.Children.forEach(n,(r,s)=>{if(!K.isValidElement(r))return;let o=[...e,s];if(r.type===K.Fragment){t.push.apply(t,$v(r.props.children,o));return}Dt(r.type===er,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=$v(r.props.children,o)),t.push(u)}),t}var Rm="get",Cm="application/x-www-form-urlencoded";function Sg(n){return n!=null&&typeof n.tagName=="string"}function pV(n){return Sg(n)&&n.tagName.toLowerCase()==="button"}function mV(n){return Sg(n)&&n.tagName.toLowerCase()==="form"}function gV(n){return Sg(n)&&n.tagName.toLowerCase()==="input"}function _V(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function yV(n,e){return n.button===0&&(!e||e==="_self")&&!_V(n)}function Kv(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function vV(n,e){let t=Kv(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}var dm=null;function EV(){if(dm===null)try{new FormData(document.createElement("form"),0),dm=!1}catch{dm=!0}return dm}var TV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ev(n){return n!=null&&!TV.has(n)?(Jr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cm}"`),null):n}function bV(n,e){let t,r,s,o,u;if(mV(n)){let h=n.getAttribute("action");r=h?Ss(h,e):null,t=n.getAttribute("method")||Rm,s=Ev(n.getAttribute("enctype"))||Cm,o=new FormData(n)}else if(pV(n)||gV(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Ss(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Rm,s=Ev(n.getAttribute("formenctype"))||Ev(h.getAttribute("enctype"))||Cm,o=new FormData(h,n),!EV()){let{name:m,type:_,value:v}=n;if(_==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,v)}}else{if(Sg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rm,r=null,s=Cm,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}function iT(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function wV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AV(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await wV(o,t);return u.links?u.links():[]}return[]}));return DV(r.flat(1).filter(IV).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function wA(n,e,t,r,s,o){let u=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var _;return t[m].pathname!==d.pathname||((_=t[m].route.path)==null?void 0:_.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,m)=>u(d,m)||h(d,m)):o==="data"?e.filter((d,m)=>{var v;let _=r.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(u(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function SV(n,e,{includeHydrateFallback:t}={}){return RV(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function RV(n){return[...new Set(n)]}function CV(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function DV(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(CV(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function PV(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ss(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function RC(){let n=K.useContext(Fc);return iT(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OV(){let n=K.useContext(Ag);return iT(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var sT=K.createContext(void 0);sT.displayName="FrameworkContext";function CC(){let n=K.useContext(sT);return iT(n,"You must render this element inside a <HydratedRouter> element"),n}function xV(n,e){let t=K.useContext(sT),[r,s]=K.useState(!1),[o,u]=K.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:_,onTouchStart:v}=e,b=K.useRef(null);K.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let V=B=>{B.forEach(Y=>{u(Y.isIntersecting)})},N=new IntersectionObserver(V,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[n]),K.useEffect(()=>{if(r){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[r]);let I=()=>{s(!0)},C=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:cd(h,I),onBlur:cd(d,C),onMouseEnter:cd(m,I),onMouseLeave:cd(_,C),onTouchStart:cd(v,I)}]:[!1,b,{}]}function cd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function NV({page:n,...e}){let{router:t}=RC(),r=K.useMemo(()=>mC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(VV,{page:n,matches:r,...e}):null}function kV(n){let{manifest:e,routeModules:t}=CC(),[r,s]=K.useState([]);return K.useEffect(()=>{let o=!1;return AV(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function VV({page:n,matches:e,...t}){let r=lo(),{manifest:s,routeModules:o}=CC(),{basename:u}=RC(),{loaderData:h,matches:d}=OV(),m=K.useMemo(()=>wA(n,e,d,s,r,"data"),[n,e,d,s,r]),_=K.useMemo(()=>wA(n,e,d,s,r,"assets"),[n,e,d,s,r]),v=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,V=!1;if(e.forEach(B=>{var H;let Y=s.routes[B.route.id];!Y||!Y.hasLoader||(!m.some(se=>se.route.id===B.route.id)&&B.route.id in h&&((H=o[B.route.id])!=null&&H.shouldRevalidate)||Y.hasClientLoader?V=!0:C.add(B.route.id))}),C.size===0)return[];let N=PV(n,u);return V&&C.size>0&&N.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[N.pathname+N.search]},[u,h,r,s,m,e,n,o]),b=K.useMemo(()=>SV(_,s),[_,s]),I=kV(_);return K.createElement(K.Fragment,null,v.map(C=>K.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),b.map(C=>K.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),I.map(({key:C,link:V})=>K.createElement("link",{key:C,...V})))}function MV(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var DC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DC&&(window.__reactRouterVersion="7.3.0")}catch{}function LV({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=wk({window:t,v5Compat:!0}));let s=r.current,[o,u]=K.useState({action:s.action,location:s.location}),h=K.useCallback(d=>{K.startTransition(()=>u(d))},[u]);return K.useLayoutEffect(()=>s.listen(h),[s,h]),K.createElement(dV,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var PC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OC=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:m,preventScrollReset:_,viewTransition:v,...b},I){let{basename:C}=K.useContext(Bi),V=typeof m=="string"&&PC.test(m),N,B=!1;if(typeof m=="string"&&V&&(N=m,DC))try{let S=new URL(window.location.href),D=m.startsWith("//")?new URL(S.protocol+m):new URL(m),M=Ss(D.pathname,C);D.origin===S.origin&&M!=null?m=M+D.search+D.hash:B=!0}catch{Jr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=Wk(m,{relative:s}),[H,se,ie]=xV(r,b),X=zV(m,{replace:u,state:h,target:d,preventScrollReset:_,relative:s,viewTransition:v});function x(S){e&&e(S),S.defaultPrevented||X(S)}let R=K.createElement("a",{...b,...ie,href:N||Y,onClick:B||o?e:x,ref:MV(I,se),target:d,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?K.createElement(K.Fragment,null,R,K.createElement(NV,{page:Y})):R});OC.displayName="Link";var UV=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...m},_){let v=Tf(u,{relative:m.relative}),b=lo(),I=K.useContext(Ag),{navigator:C,basename:V}=K.useContext(Bi),N=I!=null&&$V(v)&&h===!0,B=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,Y=b.pathname,H=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),H=H?H.toLowerCase():null,B=B.toLowerCase()),H&&V&&(H=Ss(H,V)||H);const se=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=Y===B||!s&&Y.startsWith(B)&&Y.charAt(se)==="/",X=H!=null&&(H===B||!s&&H.startsWith(B)&&H.charAt(B.length)==="/"),x={isActive:ie,isPending:X,isTransitioning:N},R=ie?e:void 0,S;typeof r=="function"?S=r(x):S=[r,ie?"active":null,X?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(x):o;return K.createElement(OC,{...m,"aria-current":R,className:S,ref:_,style:D,to:u,viewTransition:h},typeof d=="function"?d(x):d)});UV.displayName="NavLink";var FV=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=Rm,action:h,onSubmit:d,relative:m,preventScrollReset:_,viewTransition:v,...b},I)=>{let C=HV(),V=GV(h,{relative:m}),N=u.toLowerCase()==="get"?"get":"post",B=typeof h=="string"&&PC.test(h),Y=H=>{if(d&&d(H),H.defaultPrevented)return;H.preventDefault();let se=H.nativeEvent.submitter,ie=(se==null?void 0:se.getAttribute("formmethod"))||u;C(se||H.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:s,state:o,relative:m,preventScrollReset:_,viewTransition:v})};return K.createElement("form",{ref:I,method:N,action:V,onSubmit:r?d:Y,...b,"data-discover":!B&&n==="render"?"true":void 0})});FV.displayName="Form";function BV(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xC(n){let e=K.useContext(Fc);return Dt(e,BV(n)),e}function zV(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=IC(),d=lo(),m=Tf(n,{relative:o});return K.useCallback(_=>{if(yV(_,e)){_.preventDefault();let v=t!==void 0?t:zd(d)===zd(m);h(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,m,t,r,e,n,s,o,u])}function F3(n){Jr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=K.useRef(Kv(n)),t=K.useRef(!1),r=lo(),s=K.useMemo(()=>vV(r.search,t.current?null:e.current),[r.search]),o=IC(),u=K.useCallback((h,d)=>{const m=Kv(typeof h=="function"?h(s):h);t.current=!0,o("?"+m,d)},[o,s]);return[s,u]}var qV=0,jV=()=>`__${String(++qV)}__`;function HV(){let{router:n}=xC("useSubmit"),{basename:e}=K.useContext(Bi),t=lV();return K.useCallback(async(r,s={})=>{let{action:o,method:u,encType:h,formData:d,body:m}=bV(r,e);if(s.navigate===!1){let _=s.fetcherKey||jV();await n.fetch(_,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function GV(n,{relative:e}={}){let{basename:t}=K.useContext(Bi),r=K.useContext(ti);Dt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Tf(n||".",{relative:e})},u=lo();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(_=>_==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let _=h.toString();o.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:bs([t,o.pathname])),zd(o)}function $V(n,e={}){let t=K.useContext(TC);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xC("useViewTransitionState"),s=Tf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ss(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Ss(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $m(s.pathname,u)!=null||$m(s.pathname,o)!=null}new TextEncoder;var NC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IA=Ts.createContext&&Ts.createContext(NC),KV=["attr","size","title"];function QV(n,e){if(n==null)return{};var t=WV(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function WV(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Km(){return Km=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Km.apply(this,arguments)}function AA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Qm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AA(Object(t),!0).forEach(function(r){YV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YV(n,e,t){return e=XV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XV(n){var e=ZV(n,"string");return typeof e=="symbol"?e:e+""}function ZV(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kC(n){return n&&n.map((e,t)=>Ts.createElement(e.tag,Qm({key:t},e.attr),kC(e.child)))}function JV(n){return e=>Ts.createElement(eM,Km({attr:Qm({},n.attr)},e),kC(n.child))}function eM(n){var e=t=>{var{attr:r,size:s,title:o}=n,u=QV(n,KV),h=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Ts.createElement("svg",Km({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:d,style:Qm(Qm({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&Ts.createElement("title",null,o),n.children)};return IA!==void 0?Ts.createElement(IA.Consumer,null,t=>e(t)):e(NC)}function tM(n){return JV({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"},child:[]}]})(n)}const aT="-",nM=n=>{const e=iM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{const h=u.split(aT);return h[0]===""&&h.length!==1&&h.shift(),VC(h,e)||rM(u)},getConflictingClassGroupIds:(u,h)=>{const d=t[u]||[];return h&&r[u]?[...d,...r[u]]:d}}},VC=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?VC(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(aT);return(u=e.validators.find(({validator:h})=>h(o)))==null?void 0:u.classGroupId},SA=/^\[(.+)\]$/,rM=n=>{if(SA.test(n)){const e=SA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},iM=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)Qv(t[s],r,s,e);return r},Qv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:RA(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(sM(s)){Qv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,u])=>{Qv(u,RA(e,o),t,r)})})},RA=(n,e)=>{let t=n;return e.split(aT).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},sM=n=>n.isThemeGetter,aM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,u)=>{t.set(o,u),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let u=t.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return s(o,u),u},set(o,u){t.has(o)?t.set(o,u):s(o,u)}}},Wv="!",Yv=":",oM=Yv.length,lM=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let u=0,h=0,d=0,m;for(let C=0;C<s.length;C++){let V=s[C];if(u===0&&h===0){if(V===Yv){o.push(s.slice(d,C)),d=C+oM;continue}if(V==="/"){m=C;continue}}V==="["?u++:V==="]"?u--:V==="("?h++:V===")"&&h--}const _=o.length===0?s:s.substring(d),v=uM(_),b=v!==_,I=m&&m>d?m-d:void 0;return{modifiers:o,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:I}};if(e){const s=e+Yv,o=r;r=u=>u.startsWith(s)?o(u.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},uM=n=>n.endsWith(Wv)?n.substring(0,n.length-1):n.startsWith(Wv)?n.substring(1):n,cM=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(u=>{u[0]==="["||e[u]?(s.push(...o.sort(),u),o=[]):o.push(u)}),s.push(...o.sort()),s}},hM=n=>({cache:aM(n.cacheSize),parseClassName:lM(n),sortModifiers:cM(n),...nM(n)}),dM=/\s+/,fM=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,u=[],h=n.trim().split(dM);let d="";for(let m=h.length-1;m>=0;m-=1){const _=h[m],{isExternal:v,modifiers:b,hasImportantModifier:I,baseClassName:C,maybePostfixModifierPosition:V}=t(_);if(v){d=_+(d.length>0?" "+d:d);continue}let N=!!V,B=r(N?C.substring(0,V):C);if(!B){if(!N){d=_+(d.length>0?" "+d:d);continue}if(B=r(C),!B){d=_+(d.length>0?" "+d:d);continue}N=!1}const Y=o(b).join(":"),H=I?Y+Wv:Y,se=H+B;if(u.includes(se))continue;u.push(se);const ie=s(B,N);for(let X=0;X<ie.length;++X){const x=ie[X];u.push(H+x)}d=_+(d.length>0?" "+d:d)}return d};function pM(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=MC(e))&&(r&&(r+=" "),r+=t);return r}const MC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=MC(n[r]))&&(t&&(t+=" "),t+=e);return t};function mM(n,...e){let t,r,s,o=u;function u(d){const m=e.reduce((_,v)=>v(_),n());return t=hM(m),r=t.cache.get,s=t.cache.set,o=h,h(d)}function h(d){const m=r(d);if(m)return m;const _=fM(d,t);return s(d,_),_}return function(){return o(pM.apply(null,arguments))}}const mn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},LC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,UC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gM=/^\d+\/\d+$/,_M=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Nu=n=>gM.test(n),Ke=n=>!!n&&!Number.isNaN(Number(n)),Wo=n=>!!n&&Number.isInteger(Number(n)),CA=n=>n.endsWith("%")&&Ke(n.slice(0,-1)),Aa=n=>_M.test(n),bM=()=>!0,wM=n=>yM.test(n)&&!vM.test(n),oT=()=>!1,IM=n=>EM.test(n),AM=n=>TM.test(n),SM=n=>!Ie(n)&&!Ae(n),RM=n=>Bc(n,zC,oT),Ie=n=>LC.test(n),Yo=n=>Bc(n,qC,wM),Tv=n=>Bc(n,UM,Ke),CM=n=>Bc(n,FC,oT),DM=n=>Bc(n,BC,AM),PM=n=>Bc(n,oT,IM),Ae=n=>UC.test(n),fm=n=>zc(n,qC),OM=n=>zc(n,FM),xM=n=>zc(n,FC),NM=n=>zc(n,zC),kM=n=>zc(n,BC),VM=n=>zc(n,BM,!0),Bc=(n,e,t)=>{const r=LC.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},zc=(n,e,t=!1)=>{const r=UC.exec(n);return r?r[1]?e(r[1]):t:!1},FC=n=>n==="position",MM=new Set(["image","url"]),BC=n=>MM.has(n),LM=new Set(["length","size","percentage"]),zC=n=>LM.has(n),qC=n=>n==="length",UM=n=>n==="number",FM=n=>n==="family-name",BM=n=>n==="shadow",zM=()=>{const n=mn("color"),e=mn("font"),t=mn("text"),r=mn("font-weight"),s=mn("tracking"),o=mn("leading"),u=mn("breakpoint"),h=mn("container"),d=mn("spacing"),m=mn("radius"),_=mn("shadow"),v=mn("inset-shadow"),b=mn("drop-shadow"),I=mn("blur"),C=mn("perspective"),V=mn("aspect"),N=mn("ease"),B=mn("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto","contain","none"],X=()=>[Ae,Ie,d],x=()=>[Nu,"full","auto",...X()],R=()=>[Wo,"none","subgrid",Ae,Ie],S=()=>["auto",{span:["full",Wo,Ae,Ie]},Ae,Ie],D=()=>[Wo,"auto",Ae,Ie],M=()=>["auto","min","max","fr",Ae,Ie],z=()=>["start","end","center","between","around","evenly","stretch","baseline"],k=()=>["start","end","center","stretch"],Ee=()=>["auto",...X()],de=()=>[Nu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...X()],q=()=>[n,Ae,Ie],oe=()=>[CA,Yo],ee=()=>["","none","full",m,Ae,Ie],me=()=>["",Ke,fm,Yo],O=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>["","none",I,Ae,Ie],fe=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae,Ie],pe=()=>["none",Ke,Ae,Ie],Pe=()=>["none",Ke,Ae,Ie],Ne=()=>[Ke,Ae,Ie],nt=()=>[Nu,"full",...X()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Aa],breakpoint:[Aa],color:[bM],container:[Aa],"drop-shadow":[Aa],ease:["in","out","in-out"],font:[SM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Aa],shadow:[Aa],spacing:["px",Ke],text:[Aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Nu,Ie,Ae,V]}],container:["container"],columns:[{columns:[Ke,Ie,Ae,h]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Ie,Ae]}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[Wo,"auto",Ae,Ie]}],basis:[{basis:[Nu,"full","auto",h,...X()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,Nu,"auto","initial","none",Ie]}],grow:[{grow:["",Ke,Ae,Ie]}],shrink:[{shrink:["",Ke,Ae,Ie]}],order:[{order:[Wo,"first","last","none",Ae,Ie]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:X()}],"gap-x":[{"gap-x":X()}],"gap-y":[{"gap-y":X()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...k(),"normal"]}],"justify-self":[{"justify-self":["auto",...k()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...k(),"baseline"]}],"align-self":[{self:["auto",...k(),"baseline"]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...k(),"baseline"]}],"place-self":[{"place-self":["auto",...k()]}],p:[{p:X()}],px:[{px:X()}],py:[{py:X()}],ps:[{ps:X()}],pe:[{pe:X()}],pt:[{pt:X()}],pr:[{pr:X()}],pb:[{pb:X()}],pl:[{pl:X()}],m:[{m:Ee()}],mx:[{mx:Ee()}],my:[{my:Ee()}],ms:[{ms:Ee()}],me:[{me:Ee()}],mt:[{mt:Ee()}],mr:[{mr:Ee()}],mb:[{mb:Ee()}],ml:[{ml:Ee()}],"space-x":[{"space-x":X()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":X()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[h,"screen",...de()]}],"min-w":[{"min-w":[h,"screen","none",...de()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...de()]}],h:[{h:["screen",...de()]}],"min-h":[{"min-h":["screen","none",...de()]}],"max-h":[{"max-h":["screen",...de()]}],"font-size":[{text:["base",t,fm,Yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ae,Tv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",CA,Ie]}],"font-family":[{font:[OM,Ie,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ae,Ie]}],"line-clamp":[{"line-clamp":[Ke,"none",Ae,Tv]}],leading:[{leading:[o,...X()]}],"list-image":[{"list-image":["none",Ae,Ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",Ae,Yo]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Ke,"auto",Ae,Ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),xM,CM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",NM,RM]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wo,Ae,Ie],radial:["",Ae,Ie],conic:[Wo,Ae,Ie]},kM,DM]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...O(),"hidden","none"]}],"divide-style":[{divide:[...O(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...O(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,Ae,Ie]}],"outline-w":[{outline:["",Ke,fm,Yo]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",_,VM,PM]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",Ae,Ie,v]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Ke,Yo]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":q()}],opacity:[{opacity:[Ke,Ae,Ie]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none",Ae,Ie]}],blur:[{blur:_e()}],brightness:[{brightness:[Ke,Ae,Ie]}],contrast:[{contrast:[Ke,Ae,Ie]}],"drop-shadow":[{"drop-shadow":["","none",b,Ae,Ie]}],grayscale:[{grayscale:["",Ke,Ae,Ie]}],"hue-rotate":[{"hue-rotate":[Ke,Ae,Ie]}],invert:[{invert:["",Ke,Ae,Ie]}],saturate:[{saturate:[Ke,Ae,Ie]}],sepia:[{sepia:["",Ke,Ae,Ie]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Ie]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,Ae,Ie]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,Ae,Ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,Ae,Ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,Ae,Ie]}],"backdrop-invert":[{"backdrop-invert":["",Ke,Ae,Ie]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,Ae,Ie]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,Ae,Ie]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,Ae,Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":X()}],"border-spacing-x":[{"border-spacing-x":X()}],"border-spacing-y":[{"border-spacing-y":X()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",Ae,Ie]}],ease:[{ease:["linear","initial",N,Ae,Ie]}],delay:[{delay:[Ke,Ae,Ie]}],animate:[{animate:["none",B,Ae,Ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Ae,Ie]}],"perspective-origin":[{"perspective-origin":fe()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[Ae,Ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:fe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nt()}],"translate-x":[{"translate-x":nt()}],"translate-y":[{"translate-y":nt()}],"translate-z":[{"translate-z":nt()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Ie]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Ke,fm,Yo,Tv]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},qM=mM(zM),jC=({message:n,children:e,className:t,noMessage:r})=>qe.jsx("div",{className:qM("fixed w-full h-screen flex flex-col gap-y-2.5 flex-center",t),children:e??qe.jsxs(qe.Fragment,{children:[qe.jsx(tM,{className:"text-4xl animate-spin text-theme"}),r!==!0&&qe.jsx("h1",{className:"animate-pulse",children:n??"App is Loading..."})]})}),HC={user:null,initialized:!1,isPending:!0,signin:async()=>({}),signout:async()=>({}),signup:async()=>({}),updateUser:()=>{}},GC=K.createContext(HC),$C=()=>K.useContext(GC),jM={cart:[],addToCart:async()=>({}),removeAnItem:async()=>({}),updateAnItem:async()=>({}),emptyCart:async()=>({}),isPending:!0,error:null},KC=K.createContext(jM),B3=()=>K.useContext(KC),HM=K.lazy(()=>Ns(()=>import("./Home-BYK3haEP.js"),__vite__mapDeps([0,1,2,3]))),GM=K.lazy(()=>Ns(()=>import("./Product-BNfuaHSy.js"),__vite__mapDeps([4,2,3]))),$M=K.lazy(()=>Ns(()=>import("./MyAccount-CGptxMx0.js"),__vite__mapDeps([5,6,7,8,1,9,2,3]))),KM=K.lazy(()=>Ns(()=>import("./Cart-BATjISef.js"),__vite__mapDeps([10,3,8,11,9]))),QM=K.lazy(()=>Ns(()=>import("./RootLayout-Bz4lrHsx.js"),__vite__mapDeps([12,13,6]))),WM=K.lazy(()=>Ns(()=>import("./ProdctDetail-DaMidinu.js"),__vite__mapDeps([14,2,3]))),YM=K.lazy(()=>Ns(()=>import("./Signup-CzDy0dq9.js"),__vite__mapDeps([15,6,7]))),XM=K.lazy(()=>Ns(()=>import("./Order-BRw49JZ7.js"),__vite__mapDeps([16,11,9,3,13]))),ZM=K.lazy(()=>Ns(()=>import("./NotFound-CvMLdpfQ.js"),[]));function JM(){const{user:n}=$C();return qe.jsx(K.Suspense,{fallback:qe.jsx(jC,{}),children:qe.jsx(LV,{children:qe.jsx(fV,{children:qe.jsxs(er,{path:"/",Component:QM,children:[qe.jsx(er,{index:!0,Component:HM}),qe.jsx(er,{path:"*",Component:ZM}),qe.jsx(er,{path:"signup",Component:YM}),qe.jsxs(er,{path:"product",children:[qe.jsx(er,{index:!0,Component:GM}),qe.jsx(er,{path:":pid",Component:WM})]}),qe.jsx(er,{path:"myAccount",element:qe.jsx($M,{user:n})}),n&&qe.jsxs(qe.Fragment,{children:[qe.jsxs(er,{path:"orders",children:[qe.jsx(er,{index:!0,element:qe.jsx(XM,{...n})}),qe.jsx(er,{path:":oid",element:qe.jsx(qe.Fragment,{children:"order item"})})]}),qe.jsx(er,{path:"cart",children:qe.jsx(er,{index:!0,element:qe.jsx(KM,{...n})})})]})]})})})})}const DA=n=>{let e;const t=new Set,r=(m,_)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const b=e;e=_??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(I=>I(e,b))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>d,subscribe:m=>(t.add(m),()=>t.delete(m))},d=e=n(r,s,h);return h},e2=n=>n?DA(n):DA,t2=n=>n;function n2(n,e=t2){const t=Ts.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Ts.useDebugValue(t),t}const PA=n=>{const e=e2(n),t=r=>n2(e,r);return Object.assign(t,e),t},r2=n=>n?PA(n):PA,z3=r2(n=>({target:"기본정보",changeTarget:e=>n(t=>({...t,target:e}))})),i2=()=>{};var OA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},s2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},WC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let b=(h&15)<<2|m>>6,I=m&63;d||(I=64,u||(b=64)),r.push(t[_],t[v],t[b],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):s2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||m==null||v==null)throw new a2;const b=o<<2|h>>4;if(r.push(b),m!==64){const I=h<<4&240|m>>2;if(r.push(I),v!==64){const C=m<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class a2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o2=function(n){const e=QC(n);return WC.encodeByteArray(e,!0)},Wm=function(n){return o2(n).replace(/\./g,"")},lT=function(n){try{return WC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ym(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!l2(t)||(n[t]=Ym(n[t],e[t]));return n}function l2(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=()=>YC().__FIREBASE_DEFAULTS__,c2=()=>{if(typeof process>"u"||typeof OA>"u")return;const n=OA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lT(n[1]);return e&&JSON.parse(e)},uT=()=>{try{return i2()||u2()||c2()||h2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XC=()=>{var n;return(n=uT())===null||n===void 0?void 0:n.config},d2=n=>{var e;return(e=uT())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wm(JSON.stringify(t)),Wm(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function cT(){var n;const e=(n=uT())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m2(){return typeof window<"u"||JC()}function JC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function g2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const n=Ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nD(){return!cT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qd(){try{return typeof indexedDB=="object"}catch{return!1}}function _2(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="FirebaseError";class Vn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=y2,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?v2(o,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Vn(s,h,r)}}function v2(n,e){return n.replace(E2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const E2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function T2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ya(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(NA(o)&&NA(u)){if(!Ya(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function NA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ku(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Td(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function rD(n,e){const t=new b2(n,e);return t.subscribe.bind(t)}class b2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");w2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=bv),s.error===void 0&&(s.error=bv),s.complete===void 0&&(s.complete=bv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n){return n&&n._delegate?n._delegate:n}class Br{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new f2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S2(e))try{this.getOrInitializeService({instanceIdentifier:Zo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zo){return this.instances.has(e)}getOptions(e=Zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zo){return this.component?this.component.multipleInstances?e:Zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A2(n){return n===Zo?void 0:n}function S2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=[];var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const sD={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},R2=$e.INFO,C2={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},D2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=C2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=R2,this._logHandler=D2,this._userLogHandler=null,dT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}function P2(n){dT.forEach(e=>{e.setLogLevel(n)})}function O2(n,e){for(const t of dT){let r=null;e&&e.level&&(r=sD[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,o,...u)=>{const h=u.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(r??s.logLevel)&&n({level:$e[o].toLowerCase(),message:h,args:u,type:s.name})}}}const x2=(n,e)=>e.some(t=>n instanceof t);let kA,VA;function N2(){return kA||(kA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k2(){return VA||(VA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aD=new WeakMap,Xv=new WeakMap,oD=new WeakMap,wv=new WeakMap,fT=new WeakMap;function V2(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Ga(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&aD.set(t,n)}).catch(()=>{}),fT.set(e,n),e}function M2(n){if(Xv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});Xv.set(n,e)}let Zv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ga(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function L2(n){Zv=n(Zv)}function U2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Iv(this),e,...t);return oD.set(r,e.sort?e.sort():[e]),Ga(r)}:k2().includes(n)?function(...e){return n.apply(Iv(this),e),Ga(aD.get(this))}:function(...e){return Ga(n.apply(Iv(this),e))}}function F2(n){return typeof n=="function"?U2(n):(n instanceof IDBTransaction&&M2(n),x2(n,N2())?new Proxy(n,Zv):n)}function Ga(n){if(n instanceof IDBRequest)return V2(n);if(wv.has(n))return wv.get(n);const e=F2(n);return e!==n&&(wv.set(n,e),fT.set(e,n)),e}const Iv=n=>fT.get(n);function B2(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=Ga(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Ga(u.result),d.oldVersion,d.newVersion,Ga(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const z2=["get","getKey","getAll","getAllKeys","count"],q2=["put","add","delete","clear"],Av=new Map;function MA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Av.get(e))return Av.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=q2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||z2.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return Av.set(e,o),o}L2(n=>({...n,get:(e,t,r)=>MA(e,t)||n.get(e,t,r),has:(e,t)=>!!MA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function H2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xm="@firebase/app",Jv="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Rg("@firebase/app"),G2="@firebase/app-compat",$2="@firebase/analytics-compat",K2="@firebase/analytics",Q2="@firebase/app-check-compat",W2="@firebase/app-check",Y2="@firebase/auth",X2="@firebase/auth-compat",Z2="@firebase/database",J2="@firebase/data-connect",eL="@firebase/database-compat",tL="@firebase/functions",nL="@firebase/functions-compat",rL="@firebase/installations",iL="@firebase/installations-compat",sL="@firebase/messaging",aL="@firebase/messaging-compat",oL="@firebase/performance",lL="@firebase/performance-compat",uL="@firebase/remote-config",cL="@firebase/remote-config-compat",hL="@firebase/storage",dL="@firebase/storage-compat",fL="@firebase/firestore",pL="@firebase/vertexai",mL="@firebase/firestore-compat",gL="firebase",_L="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]",yL={[Xm]:"fire-core",[G2]:"fire-core-compat",[K2]:"fire-analytics",[$2]:"fire-analytics-compat",[W2]:"fire-app-check",[Q2]:"fire-app-check-compat",[Y2]:"fire-auth",[X2]:"fire-auth-compat",[Z2]:"fire-rtdb",[J2]:"fire-data-connect",[eL]:"fire-rtdb-compat",[tL]:"fire-fn",[nL]:"fire-fn-compat",[rL]:"fire-iid",[iL]:"fire-iid-compat",[sL]:"fire-fcm",[aL]:"fire-fcm-compat",[oL]:"fire-perf",[lL]:"fire-perf-compat",[uL]:"fire-rc",[cL]:"fire-rc-compat",[hL]:"fire-gcs",[dL]:"fire-gcs-compat",[fL]:"fire-fst",[mL]:"fire-fst-compat",[pL]:"fire-vertex","fire-js":"fire-js",[gL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,mc=new Map,gc=new Map;function jd(n,e){try{n.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lD(n,e){n.container.addOrOverwriteComponent(e)}function Cs(n){const e=n.name;if(gc.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;gc.set(e,n);for(const t of Za.values())jd(t,n);for(const t of mc.values())jd(t,n);return!0}function uD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vL(n,e,t=Xa){uD(n,e).clearInstance(t)}function cD(n){return n.options!==void 0}function vt(n){return n==null?!1:n.settings!==void 0}function EL(){gc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new Ll("app","Firebase",TL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hD=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n,e){const t=lT(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class bL extends hD{constructor(e,t,r,s){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,u,s);else{const h=e;super(h.options,u,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._serverConfig.authIdToken&&LA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&LA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,_r(Xm,Jv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=_L;function pT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xa,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Fr.create("bad-app-name",{appName:String(s)});if(t||(t=XC()),!t)throw Fr.create("no-options");const o=Za.get(s);if(o){if(Ya(t,o.options)&&Ya(r,o.config))return o;throw Fr.create("duplicate-app",{appName:s})}const u=new iD(s);for(const d of gc.values())u.addComponent(d);const h=new hD(t,r,u);return Za.set(s,h),h}function wL(n,e){if(m2()&&!JC())throw Fr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;cD(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=m=>[...m].reduce((_,v)=>Math.imul(31,_)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fr.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(r)),u=mc.get(o);if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new iD(o);for(const m of gc.values())h.addComponent(m);const d=new bL(t,e,o,h);return mc.set(o,d),d}function IL(n=Xa){const e=Za.get(n);if(!e&&n===Xa&&XC())return pT();if(!e)throw Fr.create("no-app",{appName:n});return e}function AL(){return Array.from(Za.values())}async function mT(n){let e=!1;const t=n.name;Za.has(t)?(e=!0,Za.delete(t)):mc.has(t)&&n.decRefCount()<=0&&(mc.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function _r(n,e,t){var r;let s=(r=yL[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(h.join(" "));return}Cs(new Br(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function dD(n,e){if(n!==null&&typeof n!="function")throw Fr.create("invalid-log-argument");O2(n,e)}function fD(n){P2(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="firebase-heartbeat-database",RL=1,Hd="firebase-heartbeat-store";let Sv=null;function pD(){return Sv||(Sv=B2(SL,RL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fr.create("idb-open",{originalErrorMessage:n.message})})),Sv}async function CL(n){try{const t=(await pD()).transaction(Hd),r=await t.objectStore(Hd).get(mD(n));return await t.done,r}catch(e){if(e instanceof Vn)Rs.warn(e.message);else{const t=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(t.message)}}}async function UA(n,e){try{const r=(await pD()).transaction(Hd,"readwrite");await r.objectStore(Hd).put(e,mD(n)),await r.done}catch(t){if(t instanceof Vn)Rs.warn(t.message);else{const r=Fr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rs.warn(r.message)}}}function mD(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=1024,PL=30;class OL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=FA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>PL){const u=kL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FA(),{heartbeatsToSend:r,unsentEntries:s}=xL(this._heartbeatsCache.heartbeats),o=Wm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Rs.warn(t),""}}}function FA(){return new Date().toISOString().substring(0,10)}function xL(n,e=DL){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),BA(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),BA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qd()?_2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return UA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return UA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function BA(n){return Wm(JSON.stringify({version:2,heartbeats:n})).length}function kL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){Cs(new Br("platform-logger",e=>new j2(e),"PRIVATE")),Cs(new Br("heartbeat",e=>new OL(e),"PRIVATE")),_r(Xm,Jv,n),_r(Xm,Jv,"esm2017"),_r("fire-js","")}VL("");const ML=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Vn,SDK_VERSION:ks,_DEFAULT_ENTRY_NAME:Xa,_addComponent:jd,_addOrOverwriteComponent:lD,_apps:Za,_clearComponents:EL,_components:gc,_getProvider:uD,_isFirebaseApp:cD,_isFirebaseServerApp:vt,_registerComponent:Cs,_removeServiceInstance:vL,_serverApps:mc,deleteApp:mT,getApp:IL,getApps:AL,initializeApp:pT,initializeServerApp:wL,onLog:dD,registerVersion:_r,setLogLevel:fD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,t){this._delegate=e,this.firebase=t,jd(e,new Br("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mT(this._delegate)))}_getService(e,t=Xa){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Xa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){jd(this._delegate,e)}_addOrOverwriteComponent(e){lD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},zA=new Ll("app-compat","Firebase",UL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(n){const e={},t={__esModule:!0,initializeApp:o,app:s,registerVersion:_r,setLogLevel:fD,onLog:dD,apps:null,SDK_VERSION:ks,INTERNAL:{registerComponent:h,removeApp:r,useAsService:d,modularAPIs:ML}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(m){delete e[m]}function s(m){if(m=m||Xa,!xA(e,m))throw zA.create("no-app",{appName:m});return e[m]}s.App=n;function o(m,_={}){const v=pT(m,_);if(xA(e,v.name))return e[v.name];const b=new n(v,t);return e[v.name]=b,b}function u(){return Object.keys(e).map(m=>e[m])}function h(m){const _=m.name,v=_.replace("-compat","");if(Cs(m)&&m.type==="PUBLIC"){const b=(I=s())=>{if(typeof I[v]!="function")throw zA.create("invalid-app-argument",{appName:_});return I[v]()};m.serviceProps!==void 0&&Ym(b,m.serviceProps),t[v]=b,n.prototype[v]=function(...I){return this._getService.bind(this,_).apply(this,m.multipleInstances?I:[])}}return m.type==="PUBLIC"?t[v]:null}function d(m,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){const n=FL(LL);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:gD,extendNamespace:e,createSubscribe:rD,ErrorFactory:Ll,deepExtend:Ym});function e(t){Ym(n,t)}return n}const BL=gD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Rg("@firebase/app-compat"),zL="@firebase/app-compat",qL="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){_r(zL,qL,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=YC();if(n.firebase!==void 0){qA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&qA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const zi=BL;jL();var HL="firebase",GL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.registerVersion(HL,GL,"app-compat");var jA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $a,_D;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function S(){}S.prototype=R.prototype,x.D=R.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(D,M,z){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return R.prototype[M].apply(D,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,R,S){S||(S=0);var D=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)D[M]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(M=0;16>M;++M)D[M]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=x.g[0],S=x.g[1],M=x.g[2];var z=x.g[3],k=R+(z^S&(M^z))+D[0]+3614090360&4294967295;R=S+(k<<7&4294967295|k>>>25),k=z+(M^R&(S^M))+D[1]+3905402710&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(S^z&(R^S))+D[2]+606105819&4294967295,M=z+(k<<17&4294967295|k>>>15),k=S+(R^M&(z^R))+D[3]+3250441966&4294967295,S=M+(k<<22&4294967295|k>>>10),k=R+(z^S&(M^z))+D[4]+4118548399&4294967295,R=S+(k<<7&4294967295|k>>>25),k=z+(M^R&(S^M))+D[5]+1200080426&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(S^z&(R^S))+D[6]+2821735955&4294967295,M=z+(k<<17&4294967295|k>>>15),k=S+(R^M&(z^R))+D[7]+4249261313&4294967295,S=M+(k<<22&4294967295|k>>>10),k=R+(z^S&(M^z))+D[8]+1770035416&4294967295,R=S+(k<<7&4294967295|k>>>25),k=z+(M^R&(S^M))+D[9]+2336552879&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(S^z&(R^S))+D[10]+4294925233&4294967295,M=z+(k<<17&4294967295|k>>>15),k=S+(R^M&(z^R))+D[11]+2304563134&4294967295,S=M+(k<<22&4294967295|k>>>10),k=R+(z^S&(M^z))+D[12]+1804603682&4294967295,R=S+(k<<7&4294967295|k>>>25),k=z+(M^R&(S^M))+D[13]+4254626195&4294967295,z=R+(k<<12&4294967295|k>>>20),k=M+(S^z&(R^S))+D[14]+2792965006&4294967295,M=z+(k<<17&4294967295|k>>>15),k=S+(R^M&(z^R))+D[15]+1236535329&4294967295,S=M+(k<<22&4294967295|k>>>10),k=R+(M^z&(S^M))+D[1]+4129170786&4294967295,R=S+(k<<5&4294967295|k>>>27),k=z+(S^M&(R^S))+D[6]+3225465664&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^S&(z^R))+D[11]+643717713&4294967295,M=z+(k<<14&4294967295|k>>>18),k=S+(z^R&(M^z))+D[0]+3921069994&4294967295,S=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(S^M))+D[5]+3593408605&4294967295,R=S+(k<<5&4294967295|k>>>27),k=z+(S^M&(R^S))+D[10]+38016083&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^S&(z^R))+D[15]+3634488961&4294967295,M=z+(k<<14&4294967295|k>>>18),k=S+(z^R&(M^z))+D[4]+3889429448&4294967295,S=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(S^M))+D[9]+568446438&4294967295,R=S+(k<<5&4294967295|k>>>27),k=z+(S^M&(R^S))+D[14]+3275163606&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^S&(z^R))+D[3]+4107603335&4294967295,M=z+(k<<14&4294967295|k>>>18),k=S+(z^R&(M^z))+D[8]+1163531501&4294967295,S=M+(k<<20&4294967295|k>>>12),k=R+(M^z&(S^M))+D[13]+2850285829&4294967295,R=S+(k<<5&4294967295|k>>>27),k=z+(S^M&(R^S))+D[2]+4243563512&4294967295,z=R+(k<<9&4294967295|k>>>23),k=M+(R^S&(z^R))+D[7]+1735328473&4294967295,M=z+(k<<14&4294967295|k>>>18),k=S+(z^R&(M^z))+D[12]+2368359562&4294967295,S=M+(k<<20&4294967295|k>>>12),k=R+(S^M^z)+D[5]+4294588738&4294967295,R=S+(k<<4&4294967295|k>>>28),k=z+(R^S^M)+D[8]+2272392833&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^S)+D[11]+1839030562&4294967295,M=z+(k<<16&4294967295|k>>>16),k=S+(M^z^R)+D[14]+4259657740&4294967295,S=M+(k<<23&4294967295|k>>>9),k=R+(S^M^z)+D[1]+2763975236&4294967295,R=S+(k<<4&4294967295|k>>>28),k=z+(R^S^M)+D[4]+1272893353&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^S)+D[7]+4139469664&4294967295,M=z+(k<<16&4294967295|k>>>16),k=S+(M^z^R)+D[10]+3200236656&4294967295,S=M+(k<<23&4294967295|k>>>9),k=R+(S^M^z)+D[13]+681279174&4294967295,R=S+(k<<4&4294967295|k>>>28),k=z+(R^S^M)+D[0]+3936430074&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^S)+D[3]+3572445317&4294967295,M=z+(k<<16&4294967295|k>>>16),k=S+(M^z^R)+D[6]+76029189&4294967295,S=M+(k<<23&4294967295|k>>>9),k=R+(S^M^z)+D[9]+3654602809&4294967295,R=S+(k<<4&4294967295|k>>>28),k=z+(R^S^M)+D[12]+3873151461&4294967295,z=R+(k<<11&4294967295|k>>>21),k=M+(z^R^S)+D[15]+530742520&4294967295,M=z+(k<<16&4294967295|k>>>16),k=S+(M^z^R)+D[2]+3299628645&4294967295,S=M+(k<<23&4294967295|k>>>9),k=R+(M^(S|~z))+D[0]+4096336452&4294967295,R=S+(k<<6&4294967295|k>>>26),k=z+(S^(R|~M))+D[7]+1126891415&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~S))+D[14]+2878612391&4294967295,M=z+(k<<15&4294967295|k>>>17),k=S+(z^(M|~R))+D[5]+4237533241&4294967295,S=M+(k<<21&4294967295|k>>>11),k=R+(M^(S|~z))+D[12]+1700485571&4294967295,R=S+(k<<6&4294967295|k>>>26),k=z+(S^(R|~M))+D[3]+2399980690&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~S))+D[10]+4293915773&4294967295,M=z+(k<<15&4294967295|k>>>17),k=S+(z^(M|~R))+D[1]+2240044497&4294967295,S=M+(k<<21&4294967295|k>>>11),k=R+(M^(S|~z))+D[8]+1873313359&4294967295,R=S+(k<<6&4294967295|k>>>26),k=z+(S^(R|~M))+D[15]+4264355552&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~S))+D[6]+2734768916&4294967295,M=z+(k<<15&4294967295|k>>>17),k=S+(z^(M|~R))+D[13]+1309151649&4294967295,S=M+(k<<21&4294967295|k>>>11),k=R+(M^(S|~z))+D[4]+4149444226&4294967295,R=S+(k<<6&4294967295|k>>>26),k=z+(S^(R|~M))+D[11]+3174756917&4294967295,z=R+(k<<10&4294967295|k>>>22),k=M+(R^(z|~S))+D[2]+718787259&4294967295,M=z+(k<<15&4294967295|k>>>17),k=S+(z^(M|~R))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+z&4294967295}r.prototype.u=function(x,R){R===void 0&&(R=x.length);for(var S=R-this.blockSize,D=this.B,M=this.h,z=0;z<R;){if(M==0)for(;z<=S;)s(this,x,z),z+=this.blockSize;if(typeof x=="string"){for(;z<R;)if(D[M++]=x.charCodeAt(z++),M==this.blockSize){s(this,D),M=0;break}}else for(;z<R;)if(D[M++]=x[z++],M==this.blockSize){s(this,D),M=0;break}}this.h=M,this.o+=R},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;var S=8*this.o;for(R=x.length-8;R<x.length;++R)x[R]=S&255,S/=256;for(this.u(x),x=Array(16),R=S=0;4>R;++R)for(var D=0;32>D;D+=8)x[S++]=this.g[R]>>>D&255;return x};function o(x,R){var S=h;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=R(x)}function u(x,R){this.h=R;for(var S=[],D=!0,M=x.length-1;0<=M;M--){var z=x[M]|0;D&&z==R||(S[M]=z,D=!1)}this.g=S}var h={};function d(x){return-128<=x&&128>x?o(x,function(R){return new u([R|0],0>R?-1:0)}):new u([x|0],0>x?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return N(m(-x));for(var R=[],S=1,D=0;x>=S;D++)R[D]=x/S|0,S*=4294967296;return new u(R,0)}function _(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return N(_(x.substring(1),R));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(R,8)),D=v,M=0;M<x.length;M+=8){var z=Math.min(8,x.length-M),k=parseInt(x.substring(M,M+z),R);8>z?(z=m(Math.pow(R,z)),D=D.j(z).add(m(k))):(D=D.j(S),D=D.add(m(k)))}return D}var v=d(0),b=d(1),I=d(16777216);n=u.prototype,n.m=function(){if(V(this))return-N(this).m();for(var x=0,R=1,S=0;S<this.g.length;S++){var D=this.i(S);x+=(0<=D?D:4294967296+D)*R,R*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(V(this))return"-"+N(this).toString(x);for(var R=m(Math.pow(x,6)),S=this,D="";;){var M=se(S,R).g;S=B(S,M.j(R));var z=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=M,C(S))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function V(x){return x.h==-1}n.l=function(x){return x=B(this,x),V(x)?-1:C(x)?0:1};function N(x){for(var R=x.g.length,S=[],D=0;D<R;D++)S[D]=~x.g[D];return new u(S,~x.h).add(b)}n.abs=function(){return V(this)?N(this):this},n.add=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0,M=0;M<=R;M++){var z=D+(this.i(M)&65535)+(x.i(M)&65535),k=(z>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);D=k>>>16,z&=65535,k&=65535,S[M]=k<<16|z}return new u(S,S[S.length-1]&-2147483648?-1:0)};function B(x,R){return x.add(N(R))}n.j=function(x){if(C(this)||C(x))return v;if(V(this))return V(x)?N(this).j(N(x)):N(N(this).j(x));if(V(x))return N(this.j(N(x)));if(0>this.l(I)&&0>x.l(I))return m(this.m()*x.m());for(var R=this.g.length+x.g.length,S=[],D=0;D<2*R;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<x.g.length;M++){var z=this.i(D)>>>16,k=this.i(D)&65535,Ee=x.i(M)>>>16,de=x.i(M)&65535;S[2*D+2*M]+=k*de,Y(S,2*D+2*M),S[2*D+2*M+1]+=z*de,Y(S,2*D+2*M+1),S[2*D+2*M+1]+=k*Ee,Y(S,2*D+2*M+1),S[2*D+2*M+2]+=z*Ee,Y(S,2*D+2*M+2)}for(D=0;D<R;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=R;D<2*R;D++)S[D]=0;return new u(S,0)};function Y(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function H(x,R){this.g=x,this.h=R}function se(x,R){if(C(R))throw Error("division by zero");if(C(x))return new H(v,v);if(V(x))return R=se(N(x),R),new H(N(R.g),N(R.h));if(V(R))return R=se(x,N(R)),new H(N(R.g),R.h);if(30<x.g.length){if(V(x)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var S=b,D=R;0>=D.l(x);)S=ie(S),D=ie(D);var M=X(S,1),z=X(D,1);for(D=X(D,2),S=X(S,2);!C(D);){var k=z.add(D);0>=k.l(x)&&(M=M.add(S),z=k),D=X(D,1),S=X(S,1)}return R=B(x,M.j(R)),new H(M,R)}for(M=v;0<=x.l(R);){for(S=Math.max(1,Math.floor(x.m()/R.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=m(S),k=z.j(R);V(k)||0<k.l(x);)S-=D,z=m(S),k=z.j(R);C(z)&&(z=b),M=M.add(z),x=B(x,k)}return new H(M,x)}n.A=function(x){return se(this,x).h},n.and=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)&x.i(D);return new u(S,this.h&x.h)},n.or=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)|x.i(D);return new u(S,this.h|x.h)},n.xor=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)^x.i(D);return new u(S,this.h^x.h)};function ie(x){for(var R=x.g.length+1,S=[],D=0;D<R;D++)S[D]=x.i(D)<<1|x.i(D-1)>>>31;return new u(S,x.h)}function X(x,R){var S=R>>5;R%=32;for(var D=x.g.length-S,M=[],z=0;z<D;z++)M[z]=0<R?x.i(z+S)>>>R|x.i(z+S+1)<<32-R:x.i(z+S);return new u(M,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_D=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,$a=u}).apply(typeof jA<"u"?jA:typeof self<"u"?self:typeof window<"u"?window:{});var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yD,bd,vD,Dm,eE,ED,TD,bD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pm=="object"&&pm];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(f,y){if(y)e:{var E=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var G=f[A];if(!(G in E))break e;E=E[G]}f=f[f.length-1],A=E[f],y=y(A),y!=A&&y!=null&&e(E,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var E=0,A=!1,G={next:function(){if(!A&&E<f.length){var J=E++;return{value:y(J,f[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return o(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,E){return f.call.apply(f.bind,arguments)}function v(f,y,E){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,A),f.apply(y,G)}}return function(){return f.apply(y,arguments)}}function b(f,y,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,b.apply(null,arguments)}function I(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function C(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(A,G,J){for(var ge=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ge[Ze-2]=arguments[Ze];return y.prototype[G].apply(A,ge)}}function V(f){const y=f.length;if(0<y){const E=Array(y);for(let A=0;A<y;A++)E[A]=f[A];return E}return[]}function N(f,y){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(d(A)){const G=f.length||0,J=A.length||0;f.length=G+J;for(let ge=0;ge<J;ge++)f[G+ge]=A[ge]}else f.push(A)}}class B{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(f){return/^[\s\xa0]*$/.test(f)}function H(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function se(f){return se[" "](f),f}se[" "]=function(){};var ie=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function X(f,y,E){for(const A in f)y.call(E,f[A],A,f)}function x(f,y){for(const E in f)y.call(void 0,f[E],E,f)}function R(f){const y={};for(const E in f)y[E]=f[E];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,y){let E,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(E in A)f[E]=A[E];for(let J=0;J<S.length;J++)E=S[J],Object.prototype.hasOwnProperty.call(A,E)&&(f[E]=A[E])}}function M(f){var y=1;f=f.split(":");const E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function z(f){h.setTimeout(()=>{throw f},0)}function k(){var f=me;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Ee{constructor(){this.h=this.g=null}add(y,E){const A=de.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new B(()=>new q,f=>f.reset());class q{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ee=!1,me=new Ee,O=()=>{const f=h.Promise.resolve(void 0);oe=()=>{f.then(te)}};var te=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(E){z(E)}var y=de;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}ee=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return f}();function Pe(f,y){if(fe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(ie){e:{try{se(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else E=="mouseover"?y=f.fromElement:E=="mouseout"&&(y=f.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ne[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Pe.aa.h.call(this)}}C(Pe,fe);var Ne={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),je=0;function ot(f,y,E,A,G){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=G,this.key=++je,this.da=this.fa=!1}function Me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Tt(f){this.src=f,this.g={},this.h=0}Tt.prototype.add=function(f,y,E,A,G){var J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);var ge=vn(f,y,A,G);return-1<ge?(y=f[ge],E||(y.fa=!1)):(y=new ot(y,this.src,J,!!A,G),y.fa=E,f.push(y)),y};function Un(f,y){var E=y.type;if(E in f.g){var A=f.g[E],G=Array.prototype.indexOf.call(A,y,void 0),J;(J=0<=G)&&Array.prototype.splice.call(A,G,1),J&&(Me(y),f.g[E].length==0&&(delete f.g[E],f.h--))}}function vn(f,y,E,A){for(var G=0;G<f.length;++G){var J=f[G];if(!J.da&&J.listener==y&&J.capture==!!E&&J.ha==A)return G}return-1}var qs="closure_lm_"+(1e6*Math.random()|0),js={};function qi(f,y,E,A,G){if(Array.isArray(y)){for(var J=0;J<y.length;J++)qi(f,y[J],E,A,G);return null}return E=Hf(E),f&&f[nt]?f.K(y,E,m(A)?!!A.capture:!1,G):nh(f,y,E,!1,A,G)}function nh(f,y,E,A,G,J){if(!y)throw Error("Invalid event type");var ge=m(G)?!!G.capture:!!G,Ze=rh(f);if(Ze||(f[qs]=Ze=new Tt(f)),E=Ze.add(y,E,A,ge,J),E.proxy)return E;if(A=jl(),E.proxy=A,A.src=f,A.listener=E,f.addEventListener)pe||(G=ge),G===void 0&&(G=!1),f.addEventListener(y.toString(),A,G);else if(f.attachEvent)f.attachEvent(Gl(y.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function jl(){function f(E){return y.call(f.src,f.listener,E)}const y=p_;return f}function Hl(f,y,E,A,G){if(Array.isArray(y))for(var J=0;J<y.length;J++)Hl(f,y[J],E,A,G);else A=m(A)?!!A.capture:!!A,E=Hf(E),f&&f[nt]?(f=f.i,y=String(y).toString(),y in f.g&&(J=f.g[y],E=vn(J,E,A,G),-1<E&&(Me(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete f.g[y],f.h--)))):f&&(f=rh(f))&&(y=f.g[y.toString()],f=-1,y&&(f=vn(y,E,A,G)),(E=-1<f?y[f]:null)&&_o(E))}function _o(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[nt])Un(y.i,f);else{var E=f.type,A=f.proxy;y.removeEventListener?y.removeEventListener(E,A,f.capture):y.detachEvent?y.detachEvent(Gl(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=rh(y))?(Un(E,f),E.h==0&&(E.src=null,y[qs]=null)):Me(f)}}}function Gl(f){return f in js?js[f]:js[f]="on"+f}function p_(f,y){if(f.da)f=!0;else{y=new Pe(y,this);var E=f.listener,A=f.ha||f.src;f.fa&&_o(f),f=E.call(A,y)}return f}function rh(f){return f=f[qs],f instanceof Tt?f:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hf(f){return typeof f=="function"?f:(f[Xn]||(f[Xn]=function(y){return f.handleEvent(y)}),f[Xn])}function Zt(){_e.call(this),this.i=new Tt(this),this.M=this,this.F=null}C(Zt,_e),Zt.prototype[nt]=!0,Zt.prototype.removeEventListener=function(f,y,E,A){Hl(this,f,y,E,A)};function ln(f,y){var E,A=f.F;if(A)for(E=[];A;A=A.F)E.push(A);if(f=f.M,A=y.type||y,typeof y=="string")y=new fe(y,f);else if(y instanceof fe)y.target=y.target||f;else{var G=y;y=new fe(A,f),D(y,G)}if(G=!0,E)for(var J=E.length-1;0<=J;J--){var ge=y.g=E[J];G=ji(ge,A,!0,y)&&G}if(ge=y.g=f,G=ji(ge,A,!0,y)&&G,G=ji(ge,A,!1,y)&&G,E)for(J=0;J<E.length;J++)ge=y.g=E[J],G=ji(ge,A,!1,y)&&G}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var E=f.g[y],A=0;A<E.length;A++)Me(E[A]);delete f.g[y],f.h--}}this.F=null},Zt.prototype.K=function(f,y,E,A){return this.i.add(String(f),y,!1,E,A)},Zt.prototype.L=function(f,y,E,A){return this.i.add(String(f),y,!0,E,A)};function ji(f,y,E,A){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,J=0;J<y.length;++J){var ge=y[J];if(ge&&!ge.da&&ge.capture==E){var Ze=ge.listener,en=ge.ha||ge.src;ge.fa&&Un(f.i,ge),G=Ze.call(en,A)!==!1&&G}}return G&&!A.defaultPrevented}function Gf(f,y,E){if(typeof f=="function")E&&(f=b(f,E));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function ih(f){f.g=Gf(()=>{f.g=null,f.i&&(f.i=!1,ih(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class m_ extends _e{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ih(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(f){_e.call(this),this.h=f,this.g={}}C(yo,_e);var Hs=[];function Cn(f){X(f.g,function(y,E){this.g.hasOwnProperty(E)&&_o(y)},f),f.g={}}yo.prototype.N=function(){yo.aa.N.call(this),Cn(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sh=h.JSON.stringify,ni=h.JSON.parse,Fn=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function ah(){}ah.prototype.h=null;function $f(f){return f.h||(f.h=f.i())}function Kf(){}var ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gs(){fe.call(this,"d")}C(Gs,fe);function qr(){fe.call(this,"c")}C(qr,fe);var vr={},$s=null;function $l(){return $s=$s||new Zt}vr.La="serverreachability";function oh(f){fe.call(this,vr.La,f)}C(oh,fe);function Ks(f){const y=$l();ln(y,new oh(y))}vr.STAT_EVENT="statevent";function Kl(f,y){fe.call(this,vr.STAT_EVENT,f),this.stat=y}C(Kl,fe);function qt(f){const y=$l();ln(y,new Kl(y,f))}vr.Ma="timingevent";function Qf(f,y){fe.call(this,vr.Ma,f),this.size=y}C(Qf,fe);function Qs(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function Ws(){this.g=!0}Ws.prototype.xa=function(){this.g=!1};function Wf(f,y,E,A,G,J){f.info(function(){if(f.g)if(J)for(var ge="",Ze=J.split("&"),en=0;en<Ze.length;en++){var Je=Ze[en].split("=");if(1<Je.length){var hn=Je[0];Je=Je[1];var tn=hn.split("_");ge=2<=tn.length&&tn[1]=="type"?ge+(hn+"="+Je+"&"):ge+(hn+"=redacted&")}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+y+`
`+E+`
`+ge})}function Yf(f,y,E,A,G,J,ge){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+y+`
`+E+`
`+J+" "+ge})}function Ys(f,y,E,A){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+un(f,E)+(A?" "+A:"")})}function ii(f,y){f.info(function(){return"TIMEOUT: "+y})}Ws.prototype.info=function(){};function un(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var A=E[f];if(!(2>A.length)){var G=A[1];if(Array.isArray(G)&&!(1>G.length)){var J=G[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return sh(E)}catch{return y}}var Jt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vo;function Ql(){}C(Ql,ah),Ql.prototype.g=function(){return new XMLHttpRequest},Ql.prototype.i=function(){return{}},vo=new Ql;function si(f,y,E,A){this.j=f,this.i=y,this.l=E,this.R=A||1,this.U=new yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lh}function lh(){this.i=null,this.g="",this.h=!1}var Xs={},Eo={};function jr(f,y,E){f.L=1,f.v=wo(kt(y)),f.m=E,f.P=!0,Gi(f,null)}function Gi(f,y){f.F=Date.now(),St(f),f.A=kt(f.v);var E=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),Qi(E.i,"t",A),f.C=0,E=f.j.J,f.h=new lh,f.g=cp(f.j,E?y:null,!f.m),0<f.O&&(f.M=new m_(b(f.Y,f,f.g),f.O)),y=f.U,E=f.g,A=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(Hs[0]=G.toString()),G=Hs);for(var J=0;J<G.length;J++){var ge=qi(E,G[J],A||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Ks(),Wf(f.i,f.u,f.A,f.l,f.R,f.m)}si.prototype.ca=function(f){f=f.target;const y=this.M;y&&Ir(f)==3?y.j():this.Y(f)},si.prototype.Y=function(f){try{if(f==this.g)e:{const tn=Ir(this.g);var y=this.g.Ba();const Zi=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||np(this.g)))){this.J||tn!=4||y==7||(y==8||0>=Zi?Ks(3):Ks(2)),Wl(this);var E=this.g.Z();this.X=E;t:if(Zs(this)){var A=np(this.g);f="";var G=A.length,J=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),or(this);var ge="";break t}this.h.i=new h.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,f+=this.h.i.decode(A[y],{stream:!(J&&y==G-1)});A.length=0,this.h.g+=f,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=E==200,Yf(this.i,this.u,this.A,this.l,this.R,tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,en=this.g;if((Ze=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ze)){var Je=Ze;break t}}Je=null}if(E=Je)Ys(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lr(this,E);else{this.o=!1,this.s=3,qt(12),Zn(this),or(this);break e}}if(this.P){E=!0;let En;for(;!this.J&&this.C<ge.length;)if(En=Js(this,ge),En==Eo){tn==4&&(this.s=4,qt(14),E=!1),Ys(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Xs){this.s=4,qt(15),Ys(this.i,this.l,ge,"[Invalid Chunk]"),E=!1;break}else Ys(this.i,this.l,En,null),lr(this,En);if(Zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||ge.length!=0||this.h.h||(this.s=1,qt(16),E=!1),this.o=this.o&&E,!E)Ys(this.i,this.l,ge,"[Invalid Chunked Response]"),Zn(this),or(this);else if(0<ge.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Po(hn),hn.M=!0,qt(11))}}else Ys(this.i,this.l,ge,null),lr(this,ge);tn==4&&Zn(this),this.o&&!this.J&&(tn==4?op(this.j,this):(this.o=!1,St(this)))}else T_(this.g),E==400&&0<ge.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),Zn(this),or(this)}}}catch{}finally{}};function Zs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Js(f,y){var E=f.C,A=y.indexOf(`
`,E);return A==-1?Eo:(E=Number(y.substring(E,A)),isNaN(E)?Xs:(A+=1,A+E>y.length?Eo:(y=y.slice(A,A+E),f.C=A+E,y)))}si.prototype.cancel=function(){this.J=!0,Zn(this)};function St(f){f.S=Date.now()+f.I,uh(f,f.I)}function uh(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Qs(b(f.ba,f),y)}function Wl(f){f.B&&(h.clearTimeout(f.B),f.B=null)}si.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ii(this.i,this.A),this.L!=2&&(Ks(),qt(17)),Zn(this),this.s=2,or(this)):uh(this,this.S-f)};function or(f){f.j.G==0||f.J||op(f.j,f)}function Zn(f){Wl(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Cn(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function lr(f,y){try{var E=f.j;if(E.G!=0&&(E.g==f||ea(E.h,f))){if(!f.K&&ea(E.h,f)&&E.G==3){try{var A=E.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)su(E),ru(E);else break e;Eh(E),qt(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=Qs(b(E.Za,E),6e3));if(1>=Xf(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xi(E,11)}else if((f.K||E.g==f)&&su(E),!Y(y))for(G=E.Da.g.parse(y),y=0;y<G.length;y++){let Je=G[y];if(E.T=Je[0],Je=Je[1],E.G==2)if(Je[0]=="c"){E.K=Je[1],E.ia=Je[2];const hn=Je[3];hn!=null&&(E.la=hn,E.j.info("VER="+E.la));const tn=Je[4];tn!=null&&(E.Aa=tn,E.j.info("SVER="+E.Aa));const Zi=Je[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(A=1.5*Zi,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const En=f.g;if(En){const di=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var J=A.h;J.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ta(J,J.h),J.h=null))}if(A.D){const bh=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;bh&&(A.ya=bh,rt(A.I,A.D,bh))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var ge=f;if(A.qa=up(A,A.J?A.ia:null,A.W),ge.K){Er(A.h,ge);var Ze=ge,en=A.L;en&&(Ze.I=en),Ze.B&&(Wl(Ze),St(Ze)),A.g=ge}else sp(A);0<E.i.length&&iu(E)}else Je[0]!="stop"&&Je[0]!="close"||Xi(E,7);else E.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Xi(E,7):yh(E):Je[0]!="noop"&&E.l&&E.l.ta(Je),E.v=0)}}Ks(4)}catch{}}var g_=class{constructor(f,y){this.g=f,this.map=y}};function ch(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hh(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Xf(f){return f.h?1:f.g?f.g.size:0}function ea(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function ta(f,y){f.g?f.g.add(y):f.h=y}function Er(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}ch.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Bn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const E of f.g.values())y=y.concat(E.D);return y}return V(f.i)}function Zf(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],E=f.length,A=0;A<E;A++)y.push(f[A]);return y}y=[],E=0;for(A in f)y[E++]=f[A];return y}function __(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(const A in f)y[E++]=A;return y}}}function To(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var E=__(f),A=Zf(f),G=A.length,J=0;J<G;J++)y.call(void 0,A[J],E&&E[J],f)}var dh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yl(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var A=f[E].indexOf("="),G=null;if(0<=A){var J=f[E].substring(0,A);G=f[E].substring(A+1)}else J=f[E];y(J,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function $i(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof $i){this.h=f.h,na(this,f.j),this.o=f.o,this.g=f.g,bo(this,f.s),this.l=f.l;var y=f.i,E=new ai;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Xl(this,E),this.m=f.m}else f&&(y=String(f).match(dh))?(this.h=!1,na(this,y[1]||"",!0),this.o=ra(y[2]||""),this.g=ra(y[3]||"",!0),bo(this,y[4]),this.l=ra(y[5]||"",!0),Xl(this,y[6]||"",!0),this.m=ra(y[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}$i.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Tr(y,fh,!0),":");var E=this.g;return(E||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Tr(y,fh,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Tr(E,E.charAt(0)=="/"?ph:Jf,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Tr(E,E_)),f.join("")};function kt(f){return new $i(f)}function na(f,y,E){f.j=E?ra(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function bo(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Xl(f,y,E){y instanceof ai?(f.i=y,mh(f.i,f.h)):(E||(y=Tr(y,v_)),f.i=new ai(y,f.h))}function rt(f,y,E){f.i.set(y,E)}function wo(f){return rt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ra(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Tr(f,y,E){return typeof f=="string"?(f=encodeURI(f).replace(y,y_),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function y_(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var fh=/[#\/\?@]/g,Jf=/[#\?:]/g,ph=/[#\?]/g,v_=/[#\?@]/g,E_=/#/g;function ai(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function br(f){f.g||(f.g=new Map,f.h=0,f.i&&Yl(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=ai.prototype,n.add=function(f,y){br(this),this.i=null,f=Wi(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this};function Zl(f,y){br(f),y=Wi(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Ki(f,y){return br(f),y=Wi(f,y),f.g.has(y)}n.forEach=function(f,y){br(this),this.g.forEach(function(E,A){E.forEach(function(G){f.call(y,G,A,this)},this)},this)},n.na=function(){br(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let A=0;A<y.length;A++){const G=f[A];for(let J=0;J<G.length;J++)E.push(y[A])}return E},n.V=function(f){br(this);let y=[];if(typeof f=="string")Ki(this,f)&&(y=y.concat(this.g.get(Wi(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return br(this),this.i=null,f=Wi(this,f),Ki(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function Qi(f,y,E){Zl(f,y),0<E.length&&(f.i=null,f.g.set(Wi(f,y),V(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var A=y[E];const J=encodeURIComponent(String(A)),ge=this.V(A);for(A=0;A<ge.length;A++){var G=J;ge[A]!==""&&(G+="="+encodeURIComponent(String(ge[A]))),f.push(G)}}return this.i=f.join("&")};function Wi(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function mh(f,y){y&&!f.j&&(br(f),f.i=null,f.g.forEach(function(E,A){var G=A.toLowerCase();A!=G&&(Zl(this,A),Qi(this,G,E))},f)),f.j=y}function ep(f,y){const E=new Ws;if(h.Image){const A=new Image;A.onload=I(wr,E,"TestLoadImage: loaded",!0,y,A),A.onerror=I(wr,E,"TestLoadImage: error",!1,y,A),A.onabort=I(wr,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=I(wr,E,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else y(!1)}function Io(f,y){const E=new Ws,A=new AbortController,G=setTimeout(()=>{A.abort(),wr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:A.signal}).then(J=>{clearTimeout(G),J.ok?wr(E,"TestPingServer: ok",!0,y):wr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),wr(E,"TestPingServer: error",!1,y)})}function wr(f,y,E,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(E)}catch{}}function Ao(){this.g=new Fn}function oi(f,y,E){const A=E||"";try{To(f,function(G,J){let ge=G;m(G)&&(ge=sh(G)),y.push(A+J+"="+encodeURIComponent(ge))})}catch(G){throw y.push(A+"type="+encodeURIComponent("_badmap")),G}}function ia(f){this.l=f.Ub||null,this.j=f.eb||!1}C(ia,ah),ia.prototype.g=function(){return new Yi(this.l,this.j)},ia.prototype.i=function(f){return function(){return f}}({});function Yi(f,y){Zt.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Yi,Zt),n=Yi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,ui(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gh(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function gh(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?li(this):ui(this),this.readyState==3&&gh(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,li(this))},n.Qa=function(f){this.g&&(this.response=f,li(this))},n.ga=function(){this.g&&li(this)};function li(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ui(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=y.next();return f.join(`\r
`)};function ui(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _h(f){let y="";return X(f,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function cn(f,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=_h(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):rt(f,y,E))}function lt(f){Zt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(lt,Zt);var Jl=/^https?$/i,So=["POST","PUT"];n=lt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vo.g(),this.v=this.o?$f(this.o):$f(vo),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(J){tp(this,J);return}if(f=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)E.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())E.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),G=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(So,y,void 0))||A||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of E)this.g.setRequestHeader(J,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(f),this.u=!1}catch(J){tp(this,J)}};function tp(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,eu(f),ci(f)}function eu(f){f.A||(f.A=!0,ln(f,"complete"),ln(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ln(this,"complete"),ln(this,"abort"),ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tu(this):this.bb())},n.bb=function(){tu(this)};function tu(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Ir(f)!=4||f.Z()!=2)){if(f.u&&Ir(f)==4)Gf(f.Ea,0,f);else if(ln(f,"readystatechange"),Ir(f)==4){f.h=!1;try{const ge=f.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=ge===0){var G=String(f.D).match(dh)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),A=!Jl.test(G?G.toLowerCase():"")}E=A}if(E)ln(f,"complete"),ln(f,"success");else{f.m=6;try{var J=2<Ir(f)?f.g.statusText:""}catch{J=""}f.l=J+" ["+f.Z()+"]",eu(f)}}finally{ci(f)}}}}function ci(f,y){if(f.g){Ro(f);const E=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||ln(f,"ready");try{E.onreadystatechange=A}catch{}}}function Ro(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Ir(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),ni(y)}};function np(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function T_(f){const y={};f=(f.g&&2<=Ir(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(Y(f[A]))continue;var E=M(f[A]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=y[G]||[];y[G]=J,J.push(E)}x(y,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Co(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function nu(f){this.Aa=0,this.i=[],this.j=new Ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Co("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Co("baseRetryDelayMs",5e3,f),this.cb=Co("retryDelaySeedMs",1e4,f),this.Wa=Co("forwardChannelMaxRetries",2,f),this.wa=Co("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ch(f&&f.concurrentRequestLimit),this.Da=new Ao,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nu.prototype,n.la=8,n.G=1,n.connect=function(f,y,E,A){qt(0),this.W=f,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=up(this,null,this.W),iu(this)};function yh(f){if(rp(f),f.G==3){var y=f.U++,E=kt(f.I);if(rt(E,"SID",f.K),rt(E,"RID",y),rt(E,"TYPE","terminate"),Do(f,E),y=new si(f,f.j,y),y.L=2,y.v=wo(kt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.v,E=!0),E||(y.g=cp(y.j,null),y.g.ea(y.v)),y.F=Date.now(),St(y)}lp(f)}function ru(f){f.g&&(Po(f),f.g.cancel(),f.g=null)}function rp(f){ru(f),f.u&&(h.clearTimeout(f.u),f.u=null),su(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function iu(f){if(!hh(f.h)&&!f.s){f.s=!0;var y=f.Ga;oe||O(),ee||(oe(),ee=!0),me.add(y,f),f.B=0}}function b_(f,y){return Xf(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Qs(b(f.Ga,f,y),Th(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new si(this,this.j,f);let J=this.o;if(this.S&&(J?(J=R(J),D(J,this.S)):J=this.S),this.m!==null||this.O||(G.H=J,J=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=ip(this,G,y),E=kt(this.I),rt(E,"RID",f),rt(E,"CVER",22),this.D&&rt(E,"X-HTTP-Session-Id",this.D),Do(this,E),J&&(this.O?y="headers="+encodeURIComponent(String(_h(J)))+"&"+y:this.m&&cn(E,this.m,J)),ta(this.h,G),this.Ua&&rt(E,"TYPE","init"),this.P?(rt(E,"$req",y),rt(E,"SID","null"),G.T=!0,jr(G,E,null)):jr(G,E,y),this.G=2}}else this.G==3&&(f?vh(this,f):this.i.length==0||hh(this.h)||vh(this))};function vh(f,y){var E;y?E=y.l:E=f.U++;const A=kt(f.I);rt(A,"SID",f.K),rt(A,"RID",E),rt(A,"AID",f.T),Do(f,A),f.m&&f.o&&cn(A,f.m,f.o),E=new si(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=ip(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ta(f.h,E),jr(E,A,y)}function Do(f,y){f.H&&X(f.H,function(E,A){rt(y,A,E)}),f.l&&To({},function(E,A){rt(y,A,E)})}function ip(f,y,E){E=Math.min(f.i.length,E);var A=f.l?b(f.l.Na,f.l,f):null;e:{var G=f.i;let J=-1;for(;;){const ge=["count="+E];J==-1?0<E?(J=G[0].g,ge.push("ofs="+J)):J=0:ge.push("ofs="+J);let Ze=!0;for(let en=0;en<E;en++){let Je=G[en].g;const hn=G[en].map;if(Je-=J,0>Je)J=Math.max(0,G[en].g-100),Ze=!1;else try{oi(hn,ge,"req"+Je+"_")}catch{A&&A(hn)}}if(Ze){A=ge.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,A}function sp(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;oe||O(),ee||(oe(),ee=!0),me.add(y,f),f.v=0}}function Eh(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Qs(b(f.Fa,f),Th(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Qs(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),ru(this),ap(this))};function Po(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function ap(f){f.g=new si(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=kt(f.qa);rt(y,"RID","rpc"),rt(y,"SID",f.K),rt(y,"AID",f.T),rt(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&rt(y,"TO",f.ja),rt(y,"TYPE","xmlhttp"),Do(f,y),f.m&&f.o&&cn(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=wo(kt(y)),E.m=null,E.P=!0,Gi(E,f)}n.Za=function(){this.C!=null&&(this.C=null,ru(this),Eh(this),qt(19))};function su(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function op(f,y){var E=null;if(f.g==y){su(f),Po(f),f.g=null;var A=2}else if(ea(f.h,y))E=y.D,Er(f.h,y),A=1;else return;if(f.G!=0){if(y.o)if(A==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var G=f.B;A=$l(),ln(A,new Qf(A,E)),iu(f)}else sp(f);else if(G=y.s,G==3||G==0&&0<y.X||!(A==1&&b_(f,y)||A==2&&Eh(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),G){case 1:Xi(f,5);break;case 4:Xi(f,10);break;case 3:Xi(f,6);break;default:Xi(f,2)}}}function Th(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function Xi(f,y){if(f.j.info("Error code "+y),y==2){var E=b(f.fb,f),A=f.Xa;const G=!A;A=new $i(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||na(A,"https"),wo(A),G?ep(A.toString(),E):Io(A.toString(),E)}else qt(2);f.G=0,f.l&&f.l.sa(y),lp(f),rp(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function lp(f){if(f.G=0,f.ka=[],f.l){const y=Bn(f.h);(y.length!=0||f.i.length!=0)&&(N(f.ka,y),N(f.ka,f.i),f.h.i.length=0,V(f.i),f.i.length=0),f.l.ra()}}function up(f,y,E){var A=E instanceof $i?kt(E):new $i(E);if(A.g!="")y&&(A.g=y+"."+A.g),bo(A,A.s);else{var G=h.location;A=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var J=new $i(null);A&&na(J,A),y&&(J.g=y),G&&bo(J,G),E&&(J.l=E),A=J}return E=f.D,y=f.ya,E&&y&&rt(A,E,y),rt(A,"VER",f.la),Do(f,A),A}function cp(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new lt(new ia({eb:E})):new lt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hp(){}n=hp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function au(){}au.prototype.g=function(f,y){return new zn(f,y)};function zn(f,y){Zt.call(this),this.g=new nu(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!Y(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new hi(this)}C(zn,Zt),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){yh(this.g)},zn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=sh(f),f=E);y.i.push(new g_(y.Ya++,f)),y.G==3&&iu(y)},zn.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,zn.aa.N.call(this)};function dp(f){Gs.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}C(dp,Gs);function fp(){qr.call(this),this.status=1}C(fp,qr);function hi(f){this.g=f}C(hi,hp),hi.prototype.ua=function(){ln(this.g,"a")},hi.prototype.ta=function(f){ln(this.g,new dp(f))},hi.prototype.sa=function(f){ln(this.g,new fp)},hi.prototype.ra=function(){ln(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,bD=function(){return new au},TD=function(){return $l()},ED=vr,eE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jt.NO_ERROR=0,Jt.TIMEOUT=8,Jt.HTTP_ERROR=6,Dm=Jt,Hi.COMPLETE="complete",vD=Hi,Kf.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,bd=Kf,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,yD=lt}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});const HA="@firebase/firestore",GA="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new Rg("@firebase/firestore");function qu(){return Ja.logLevel}function $L(n){Ja.setLogLevel(n)}function ce(n,...e){if(Ja.logLevel<=$e.DEBUG){const t=e.map(gT);Ja.debug(`Firestore (${jc}): ${n}`,...t)}}function Ht(n,...e){if(Ja.logLevel<=$e.ERROR){const t=e.map(gT);Ja.error(`Firestore (${jc}): ${n}`,...t)}}function Mi(n,...e){if(Ja.logLevel<=$e.WARN){const t=e.map(gT);Ja.warn(`Firestore (${jc}): ${n}`,...t)}}function gT(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n="Unexpected state"){const e=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: `+n;throw Ht(e),new Error(e)}function Se(n,e){n||be()}function KL(n,e){n||be()}function ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}}class WL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YL{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sn,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sn)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new wD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new _n(e)}}class XL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ZL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new XL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $A{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,vt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new $A(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string"),this.R=t.token,new $A(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=eU(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function _c(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function AD(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-62135596800,QA=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QA);return new At(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KA)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QA}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-KA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new At(0,0))}static max(){return new De(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__name__";class vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&be(),r===void 0?r=e.length-t:r>e.length-t&&be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=vi.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=vi.isNumericId(e),s=vi.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?vi.extractNumericId(e).compare(vi.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $a.fromString(e.substring(4,e.length-2))}}class Qe extends vi{construct(e,t,r){return new Qe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Qe(t)}static emptyPath(){return new Qe([])}}const tU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends vi{construct(e,t,r){return new wt(e,t,r)}static isValidIdentifier(e){return tU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WA}static keyField(){return new wt([WA])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(o(),s++)}if(o(),u)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;class Zm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function tE(n){return n.fields.find(e=>e.kind===2)}function Jo(n){return n.fields.filter(e=>e.kind!==2)}Zm.UNKNOWN_ID=-1;class Pm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gd(0,yr.min())}}function SD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new yr(s,ye.empty(),e)}function RD(n){return new yr(n.readTime,n.key,yc)}class yr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yr(De.min(),ye.empty(),yc)}static max(){return new yr(De.max(),ye.empty(),yc)}}function _T(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==CD)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,r)=>{t(e)})}static reject(e){return new $((t,r)=>{r(e)})}static waitFor(e){return new $((t,r)=>{let s=0,o=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&t()},d=>r(d))}),u=!0,o===s&&t()})}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next(s=>s?$.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new $((r,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;t(e[m]).next(_=>{u[m]=_,++h,h===o&&r(u)},_=>s(_))}})}static doWhile(e,t){return new $((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="SimpleDb";class Cg{static open(e,t,r,s){try{return new Cg(t,e.transaction(s,r))}catch(o){throw new Cd(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Sn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Cd(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=yT(r.target.error);this.m.reject(new Cd(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ce(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rU(t)}}class Ni{static delete(e){return ce(pr,"Removing database:",e),tl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qd())return!1;if(Ni.v())return!0;const e=Ot(),t=Ni.C(e),r=0<t&&t<10,s=PD(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Ni.C(Ot())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ce(pr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{r(new Cd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new le(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new le(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Cd(e,u))},s.onupgradeneeded=o=>{ce(pr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.O.B(u,s.transaction,o.oldVersion,this.version).next(()=>{ce(pr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=Cg.open(this.db,e,o?"readonly":"readwrite",r),d=s(h).next(m=>(h.S(),m)).catch(m=>(h.abort(m),$.reject(m))).toPromise();return d.catch(()=>{}),await h.p,d}catch(h){const d=h,m=d.name!=="FirebaseError"&&u<3;if(ce(pr,"Transaction failed with error:",d.message,"Retrying:",m),this.close(),!m)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function PD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class nU{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return tl(this.q.delete())}}class Cd extends le{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function co(n){return n.name==="IndexedDbTransactionError"}class rU{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(pr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(pr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tl(r)}add(e){return ce(pr,"ADD",this.store.name,e,e),tl(this.store.add(e))}get(e){return tl(this.store.get(e)).next(t=>(t===void 0&&(t=null),ce(pr,"GET",this.store.name,e,t),t))}delete(e){return ce(pr,"DELETE",this.store.name,e),tl(this.store.delete(e))}count(){return ce(pr,"COUNT",this.store.name),tl(this.store.count())}G(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new $((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}})}{const o=this.cursor(r),u=[];return this.j(o,(h,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}J(e,t){ce(pr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.j(s,(o,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.j(s,t)}X(e){const t=this.cursor({});return new $((r,s)=>{t.onerror=o=>{const u=yT(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new $((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new nU(h),m=t(h.primaryKey,h.value,d);if(m instanceof $){const _=m.catch(v=>(d.done(),$.reject(v)));r.push(_)}d.isDone?s():d.U===null?h.continue():h.continue(d.U)}}).next(()=>$.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tl(n){return new $((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=yT(r.target.error);t(s)}})}let YA=!1;function yT(n){const e=Ni.C(Ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YA||(YA=!0,setTimeout(()=>{throw r},0)),r}}return n}const Dd="IndexBackfiller";class iU{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ce(Dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ce(Dd,`Documents written: ${t}`)}catch(t){co(t)?ce(Dd,"Ignoring IndexedDB error during index backfill: ",t):await uo(t)}await this.te(6e4)})}}class sU{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let s=t,o=!0;return $.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return ce(Dd,`Processing collection: ${u}`),this.ie(e,u,s).next(h=>{s-=h,r.add(u)});o=!1})).next(()=>t-s)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(s,o)).next(h=>(ce(Dd,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((s,o)=>{const u=RD(o);_T(u,r)>0&&(r=u)}),new yr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ir.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;function bf(n){return n==null}function $d(n){return n===0&&1/n==-1/0}function OD(n){return typeof n=="number"&&Number.isInteger(n)&&!$d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="";function Mn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XA(e)),e=aU(n.get(t),e);return XA(e)}function aU(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Jm:t+="";break;default:t+=o}}return t}function XA(n){return n+Jm+""}function Pi(n){const e=n.length;if(Se(e>=2),e===2)return Se(n.charAt(0)===Jm&&n.charAt(1)===""),Qe.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const u=n.indexOf(Jm,o);switch((u<0||u>t)&&be(),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:be()}o=u+2}return new Qe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="remoteDocuments",wf="owner",ku="owner",Kd="mutationQueues",oU="userId",Yr="mutations",ZA="batchId",al="userMutationsIndex",JA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){return[n,Mn(e)]}function xD(n,e,t){return[n,Mn(e),t]}const lU={},vc="documentMutations",eg="remoteDocumentsV14",uU=["prefixPath","collectionGroup","readTime","documentId"],xm="documentKeyIndex",cU=["prefixPath","collectionGroup","documentId"],ND="collectionGroupIndex",hU=["collectionGroup","readTime","prefixPath","documentId"],Qd="remoteDocumentGlobal",nE="remoteDocumentGlobalKey",Ec="targets",kD="queryTargetsIndex",dU=["canonicalId","targetId"],Tc="targetDocuments",fU=["targetId","path"],vT="documentTargetsIndex",pU=["path","targetId"],tg="targetGlobalKey",yl="targetGlobal",Wd="collectionParents",mU=["collectionId","parent"],bc="clientMetadata",gU="clientId",Dg="bundles",_U="bundleId",Pg="namedQueries",yU="name",ET="indexConfiguration",vU="indexId",rE="collectionGroupIndex",EU="collectionGroup",ng="indexState",TU=["indexId","uid"],VD="sequenceNumberIndex",bU=["uid","sequenceNumber"],rg="indexEntries",wU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MD="documentKeyIndex",IU=["indexId","uid","orderedDocumentKey"],Og="documentOverlays",AU=["userId","collectionPath","documentId"],iE="collectionPathOverlayIndex",SU=["userId","collectionPath","largestBatchId"],LD="collectionGroupOverlayIndex",RU=["userId","collectionGroup","largestBatchId"],TT="globals",CU="name",UD=[Kd,Yr,vc,el,Ec,wf,yl,Tc,bc,Qd,Wd,Dg,Pg],DU=[...UD,Og],FD=[Kd,Yr,vc,eg,Ec,wf,yl,Tc,bc,Qd,Wd,Dg,Pg,Og],BD=FD,bT=[...BD,ET,ng,rg],PU=bT,OU=[...bT,TT];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends DD{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function on(n,e){const t=ve(n);return Ni.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??In.RED,this.left=s??In.EMPTY,this.right=o??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new In(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,r,s,o){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tS(this.data.getIterator())}getIteratorFrom(e){return new tS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ht(this.comparator);return t.data=e,t}}class tS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new ht(wt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qD("Invalid base64 string: "+o):o}}(e);return new Ft(t)}static fromUint8Array(e){const t=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const NU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(n){if(Se(!!n),typeof n=="string"){let e=0;const t=NU.exec(n);if(Se(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="server_timestamp",HD="__type__",GD="__previous_value__",$D="__local_write_time__";function xg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[HD])===null||t===void 0?void 0:t.stringValue)===jD}function Ng(n){const e=n.mapValue.fields[GD];return xg(e)?Ng(e):e}function Yd(n){const e=Ds(n.mapValue.fields[$D].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,t,r,s,o,u,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}const aE="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||aE}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===aE}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="__type__",KD="__max__",qa={mapValue:{fields:{__type__:{stringValue:KD}}}},IT="__vector__",wc="value",Nm={nullValue:"NULL_VALUE"};function to(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:QD(n)?9007199254740991:kg(n)?10:11:be()}function Li(n,e){if(n===e)return!0;const t=to(n);if(t!==to(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yd(n).isEqual(Yd(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Ds(s.timestampValue),h=Ds(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Ps(s.bytesValue).isEqual(Ps(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return bt(s.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return bt(s.integerValue)===bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=bt(s.doubleValue),h=bt(o.doubleValue);return u===h?$d(u)===$d(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(eS(u)!==eS(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Li(u[d],h[d])))return!1;return!0}(n,e);default:return be()}}function Xd(n,e){return(n.values||[]).find(t=>Li(t,e))!==void 0}function no(n,e){if(n===e)return 0;const t=to(n),r=to(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=bt(o.integerValue||o.doubleValue),d=bt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return nS(n.timestampValue,e.timestampValue);case 4:return nS(Yd(n),Yd(e));case 5:return Ve(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Ps(o),d=Ps(u);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Ve(h[m],d[m]);if(_!==0)return _}return Ve(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Ve(bt(o.latitude),bt(u.latitude));return h!==0?h:Ve(bt(o.longitude),bt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rS(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,d,m,_;const v=o.fields||{},b=u.fields||{},I=(h=v[wc])===null||h===void 0?void 0:h.arrayValue,C=(d=b[wc])===null||d===void 0?void 0:d.arrayValue,V=Ve(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:rS(I,C)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===qa.mapValue&&u===qa.mapValue)return 0;if(o===qa.mapValue)return 1;if(u===qa.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=u.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const b=Ve(d[v],_[v]);if(b!==0)return b;const I=no(h[d[v]],m[_[v]]);if(I!==0)return I}return Ve(d.length,_.length)}(n.mapValue,e.mapValue);default:throw be()}}function nS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ds(n),r=Ds(e),s=Ve(t.seconds,r.seconds);return s!==0?s:Ve(t.nanos,r.nanos)}function rS(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=no(t[s],r[s]);if(o)return o}return Ve(t.length,r.length)}function Ic(n){return oE(n)}function oE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ds(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=oE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${oE(t.fields[u])}`;return s+"}"}(n.mapValue):be()}function km(n){switch(to(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ng(n);return e?16+km(e):16;case 5:return 2*n.stringValue.length;case 6:return Ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+km(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ho(r.fields,(o,u)=>{s+=o.length+km(u)}),s}(n.mapValue);default:throw be()}}function bl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lE(n){return!!n&&"integerValue"in n}function Zd(n){return!!n&&"arrayValue"in n}function iS(n){return!!n&&"nullValue"in n}function sS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vm(n){return!!n&&"mapValue"in n}function kg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[wT])===null||t===void 0?void 0:t.stringValue)===IT}function Pd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ho(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KD}const WD={mapValue:{fields:{[wT]:{stringValue:IT},[wc]:{arrayValue:{}}}}};function VU(n){return"nullValue"in n?Nm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bl(eo.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?kg(n)?WD:{mapValue:{}}:be()}function MU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bl(eo.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?WD:"mapValue"in n?kg(n)?{mapValue:{}}:qa:be()}function aS(n,e){const t=no(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oS(n,e){const t=no(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pd(t)}setAll(e){let t=wt.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=Pd(u):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Vm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ho(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new An(Pd(this.value))}}function YD(n){const e=[];return ho(n.fields,(t,r)=>{const s=new wt([t]);if(Vm(r)){const o=YD(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,s,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new yt(e,0,De.min(),De.min(),De.min(),An.empty(),0)}static newFoundDocument(e,t,r,s){return new yt(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new yt(e,2,t,De.min(),De.min(),An.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,De.min(),De.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){this.position=e,this.inclusive=t}}function lS(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=no(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function LU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{}class We extends XD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new UU(e,t,r):t==="array-contains"?new zU(e,r):t==="in"?new rP(e,r):t==="not-in"?new qU(e,r):t==="array-contains-any"?new jU(e,r):new We(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new FU(e,r):new BU(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(no(t,this.value)):t!==null&&to(this.value)===to(t)&&this.matchesComparison(no(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends XD{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ct(e,t)}matches(e){return Ac(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ac(n){return n.op==="and"}function uE(n){return n.op==="or"}function AT(n){return ZD(n)&&Ac(n)}function ZD(n){for(const e of n.filters)if(e instanceof ct)return!1;return!0}function cE(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+Ic(n.value);if(AT(n))return n.filters.map(e=>cE(e)).join(",");{const e=n.filters.map(t=>cE(t)).join(",");return`${n.op}(${e})`}}function JD(n,e){return n instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Li(r.value,s.value)}(n,e):n instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,h)=>o&&JD(u,s.filters[h]),!0):!1}(n,e):void be()}function eP(n,e){const t=n.filters.concat(e);return ct.create(t,n.op)}function tP(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${Ic(t.value)}`}(n):n instanceof ct?function(t){return t.op.toString()+" {"+t.getFilters().map(tP).join(" ,")+"}"}(n):"Filter"}class UU extends We{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class FU extends We{constructor(e,t){super(e,"in",t),this.keys=nP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BU extends We{constructor(e,t){super(e,"not-in",t),this.keys=nP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class zU extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zd(t)&&Xd(t.arrayValue,this.value)}}class rP extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xd(this.value.arrayValue,t)}}class qU extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Xd(this.value.arrayValue,t)}}class jU extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,t=null,r=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function hE(n,e=null,t=[],r=[],s=null,o=null,u=null){return new HU(n,e,t,r,s,o,u)}function wl(n){const e=ve(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ic(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ic(r)).join(",")),e.le=t}return e.le}function If(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uS(n.startAt,e.startAt)&&uS(n.endAt,e.endAt)}function ig(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sg(n,e){return n.filters.filter(t=>t instanceof We&&t.field.isEqual(e))}function cS(n,e,t){let r=Nm,s=!0;for(const o of sg(n,e)){let u=Nm,h=!0;switch(o.op){case"<":case"<=":u=VU(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=Nm}aS({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];aS({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function hS(n,e,t){let r=qa,s=!0;for(const o of sg(n,e)){let u=qa,h=!0;switch(o.op){case">=":case">":u=MU(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=qa}oS({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];oS({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t=null,r=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function iP(n,e,t,r,s,o,u,h){return new Vs(n,e,t,r,s,o,u,h)}function Hc(n){return new Vs(n)}function dS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ST(n){return n.collectionGroup!==null}function Qu(n){const e=ve(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ht(wt.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Jd(o,r))}),t.has(wt.keyField().canonicalString())||e.he.push(new Jd(wt.keyField(),r))}return e.he}function Wn(n){const e=ve(n);return e.Pe||(e.Pe=GU(e,Qu(n))),e.Pe}function GU(n,e){if(n.limitType==="F")return hE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Jd(s.field,o)});const t=n.endAt?new ro(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ro(n.startAt.position,n.startAt.inclusive):null;return hE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dE(n,e){const t=n.filters.concat([e]);return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ag(n,e,t){return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Af(n,e){return If(Wn(n),Wn(e))&&n.limitType===e.limitType}function sP(n){return`${wl(Wn(n))}|lt:${n.limitType}`}function ju(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>tP(s)).join(", ")}]`),bf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ic(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ic(s)).join(",")),`Target(${r})`}(Wn(n))}; limitType=${n.limitType})`}function Sf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Qu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,d){const m=lS(u,h,d);return u.inclusive?m<=0:m<0}(r.startAt,Qu(r),s)||r.endAt&&!function(u,h,d){const m=lS(u,h,d);return u.inclusive?m>=0:m>0}(r.endAt,Qu(r),s))}(n,e)}function aP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oP(n){return(e,t)=>{let r=!1;for(const s of Qu(n)){const o=$U(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function $U(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(o,u,h){const d=u.data.field(o),m=h.data.field(o);return d!==null&&m!==null?no(d,m):be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return zD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new _t(ye.comparator);function ar(){return KU}const lP=new _t(ye.comparator);function wd(...n){let e=lP;for(const t of n)e=e.insert(t.key,t);return e}function uP(n){let e=lP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oi(){return Od()}function cP(){return Od()}function Od(){return new Ms(n=>n.toString(),(n,e)=>n.isEqual(e))}const QU=new _t(ye.comparator),WU=new ht(ye.comparator);function Ue(...n){let e=WU;for(const t of n)e=e.add(t);return e}const YU=new ht(Ve);function RT(){return YU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function hP(n){return{integerValue:""+n}}function dP(n,e){return OD(e)?hP(e):CT(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this._=void 0}}function XU(n,e,t){return n instanceof Sc?function(s,o){const u={fields:{[HD]:{stringValue:jD},[$D]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&xg(o)&&(o=Ng(o)),o&&(u.fields[GD]=o),{mapValue:u}}(t,e):n instanceof Il?pP(n,e):n instanceof Al?mP(n,e):function(s,o){const u=fP(s,o),h=fS(u)+fS(s.Ie);return lE(u)&&lE(s.Ie)?hP(h):CT(s.serializer,h)}(n,e)}function ZU(n,e,t){return n instanceof Il?pP(n,e):n instanceof Al?mP(n,e):t}function fP(n,e){return n instanceof Rc?function(r){return lE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Sc extends Vg{}class Il extends Vg{constructor(e){super(),this.elements=e}}function pP(n,e){const t=gP(e);for(const r of n.elements)t.some(s=>Li(s,r))||t.push(r);return{arrayValue:{values:t}}}class Al extends Vg{constructor(e){super(),this.elements=e}}function mP(n,e){let t=gP(e);for(const r of n.elements)t=t.filter(s=>!Li(s,r));return{arrayValue:{values:t}}}class Rc extends Vg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function fS(n){return bt(n.integerValue||n.doubleValue)}function gP(n){return Zd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t){this.field=e,this.transform=t}}function JU(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Il&&s instanceof Il||r instanceof Al&&s instanceof Al?_c(r.elements,s.elements,Li):r instanceof Rc&&s instanceof Rc?Li(r.Ie,s.Ie):r instanceof Sc&&s instanceof Sc}(n.transform,e.transform)}class e4{constructor(e,t){this.version=e,this.transformResults=t}}class It{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let Mg=class{};function _P(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $c(n.key,It.none()):new Gc(n.key,n.data,It.none());{const t=n.data,r=An.empty();let s=new ht(wt.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Ls(n.key,r,new sr(s.toArray()),It.none())}}function t4(n,e,t){n instanceof Gc?function(s,o,u){const h=s.value.clone(),d=mS(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ls?function(s,o,u){if(!Mm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=mS(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(yP(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function xd(n,e,t,r){return n instanceof Gc?function(o,u,h,d){if(!Mm(o.precondition,u))return h;const m=o.value.clone(),_=gS(o.fieldTransforms,d,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ls?function(o,u,h,d){if(!Mm(o.precondition,u))return h;const m=gS(o.fieldTransforms,d,u),_=u.data;return _.setAll(yP(o)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,u,h){return Mm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function n4(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=fP(r.transform,s||null);o!=null&&(t===null&&(t=An.empty()),t.set(r.field,o))}return t||null}function pS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_c(r,s,(o,u)=>JU(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gc extends Mg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ls extends Mg{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function yP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mS(n,e,t){const r=new Map;Se(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);r.set(o.field,ZU(u,h,t[s]))}return r}function gS(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,XU(o,u,e))}return r}class $c extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DT extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&t4(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cP();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=_P(u,h);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(t,r)=>pS(t,r))&&_c(this.baseMutations,e.baseMutations,(t,r)=>pS(t,r))}}class OT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Se(e.mutations.length===r.length);let s=function(){return QU}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new OT(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,tt;function vP(n){switch(n){case Z.OK:return be();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return be()}}function EP(n){if(n===void 0)return Ht("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Yt.OK:return Z.OK;case Yt.CANCELLED:return Z.CANCELLED;case Yt.UNKNOWN:return Z.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return Z.INTERNAL;case Yt.UNAVAILABLE:return Z.UNAVAILABLE;case Yt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Yt.NOT_FOUND:return Z.NOT_FOUND;case Yt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Yt.ABORTED:return Z.ABORTED;case Yt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Yt.DATA_LOSS:return Z.DATA_LOSS;default:return be()}}(tt=Yt||(Yt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new $a([4294967295,4294967295],0);function _S(n){const e=TP().encode(n),t=new _D;return t.update(e),new Uint8Array(t.digest())}function yS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $a([t,r],0),new $a([s,o],0)]}class NT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Id(`Invalid padding: ${t}`);if(r<0)throw new Id(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Id(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Id(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=$a.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply($a.fromNumber(r)));return s.compare(i4)===1&&(s=new $a([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=_S(e),[r,s]=yS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new NT(o,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=_S(e),[r,s]=yS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Id extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Df.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cf(De.min(),s,new _t(Ve),ar(),Ue())}}class Df{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Df(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class bP{constructor(e,t){this.targetId=e,this.ge=t}}class wP{constructor(e,t,r=Ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class vS{constructor(){this.pe=0,this.ye=ES(),this.we=Ft.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ue(),t=Ue(),r=Ue();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:be()}}),new Df(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=ES()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Se(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class s4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ar(),this.$e=gm(),this.Ke=gm(),this.Ue=new _t(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(ig(o))if(r===0){const u=new ye(o.path);this.ze(t,u,yt.newNoDocument(u,De.min()))}else Se(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),d=h?this.nt(h,e,u):1;if(d!==0){this.Ye(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=Ps(r).toUint8Array()}catch(d){if(d instanceof qD)return Mi("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new NT(u,s,o)}catch(d){return Mi(d instanceof Id?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&ig(h.target)){const d=new ye(h.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,yt.newNoDocument(d,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let r=Ue();this.Ke.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const m=this.Xe(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const s=new Cf(e,t,this.Ue,this.Qe,r);return this.Qe=ar(),this.$e=gm(),this.Ke=gm(),this.Ue=new _t(Ve),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new vS,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new ht(Ve),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ht(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new vS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function gm(){return new _t(ye.comparator)}function ES(){return new _t(ye.comparator)}const a4={asc:"ASCENDING",desc:"DESCENDING"},o4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"};class u4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fE(n,e){return n.useProto3Json||bf(e)?e:{value:e}}function Cc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function c4(n,e){return Cc(n,e.toTimestamp())}function Gt(n){return Se(!!n),De.fromTimestamp(function(t){const r=Ds(t);return new At(r.seconds,r.nanos)}(n))}function kT(n,e){return pE(n,e).canonicalString()}function pE(n,e){const t=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function AP(n){const e=Qe.fromString(n);return Se(VP(e)),e}function ef(n,e){return kT(n.databaseId,e.path)}function ki(n,e){const t=AP(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(CP(t))}function SP(n,e){return kT(n.databaseId,e)}function RP(n){const e=AP(n);return e.length===4?Qe.emptyPath():CP(e)}function mE(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CP(n){return Se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function TS(n,e,t){return{name:ef(n,e),fields:t.value.mapValue.fields}}function DP(n,e,t){const r=ki(n,e.name),s=Gt(e.updateTime),o=e.createTime?Gt(e.createTime):De.min(),u=new An({mapValue:{fields:e.fields}}),h=yt.newFoundDocument(r,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function h4(n,e){return"found"in e?function(r,s){Se(!!s.found),s.found.name,s.found.updateTime;const o=ki(r,s.found.name),u=Gt(s.found.updateTime),h=s.found.createTime?Gt(s.found.createTime):De.min(),d=new An({mapValue:{fields:s.found.fields}});return yt.newFoundDocument(o,u,h,d)}(n,e):"missing"in e?function(r,s){Se(!!s.missing),Se(!!s.readTime);const o=ki(r,s.missing),u=Gt(s.readTime);return yt.newNoDocument(o,u)}(n,e):be()}function d4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Se(_===void 0||typeof _=="string"),Ft.fromBase64String(_||"")):(Se(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Ft.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const _=m.code===void 0?Z.UNKNOWN:EP(m.code);return new le(_,m.message||"")}(u);t=new wP(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ki(n,r.document.name),o=Gt(r.document.updateTime),u=r.document.createTime?Gt(r.document.createTime):De.min(),h=new An({mapValue:{fields:r.document.fields}}),d=yt.newFoundDocument(s,o,u,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new Lm(m,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ki(n,r.document),o=r.readTime?Gt(r.readTime):De.min(),u=yt.newNoDocument(s,o),h=r.removedTargetIds||[];t=new Lm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ki(n,r.document),o=r.removedTargetIds||[];t=new Lm([],o,s,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new r4(s,o),h=r.targetId;t=new bP(h,u)}}return t}function tf(n,e){let t;if(e instanceof Gc)t={update:TS(n,e.key,e.value)};else if(e instanceof $c)t={delete:ef(n,e.key)};else if(e instanceof Ls)t={update:TS(n,e.key,e.data),updateMask:y4(e.fieldMask)};else{if(!(e instanceof DT))return be();t={verify:ef(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Sc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Il)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Al)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Rc)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw be()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:c4(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be()}(n,e.precondition)),t}function gE(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?It.updateTime(Gt(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()}(e.currentDocument):It.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let d=null;if("setToServerValue"in h)Se(h.setToServerValue==="REQUEST_TIME"),d=new Sc;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];d=new Il(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];d=new Al(_)}else"increment"in h?d=new Rc(u,h.increment):be();const m=wt.fromServerFormat(h.fieldPath);return new Rf(m,d)}(n,s)):[];if(e.update){e.update.name;const s=ki(n,e.update.name),o=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const m=d.fieldPaths||[];return new sr(m.map(_=>wt.fromServerFormat(_)))}(e.updateMask);return new Ls(s,o,u,t,r)}return new Gc(s,o,t,r)}if(e.delete){const s=ki(n,e.delete);return new $c(s,t)}if(e.verify){const s=ki(n,e.verify);return new DT(s,t)}return be()}function f4(n,e){return n&&n.length>0?(Se(e!==void 0),n.map(t=>function(s,o){let u=s.updateTime?Gt(s.updateTime):Gt(o);return u.isEqual(De.min())&&(u=Gt(o)),new e4(u,s.transformResults||[])}(t,e))):[]}function PP(n,e){return{documents:[SP(n,e.path)]}}function OP(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SP(n,s);const o=function(m){if(m.length!==0)return kP(ct.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(m){if(m.length!==0)return m.map(_=>function(b){return{field:Hu(b.field),direction:m4(b.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=fE(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:s}}function xP(n){let e=RP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Se(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(v){const b=NP(v);return b instanceof ct&&AT(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(b=>function(C){return new Jd(Gu(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(v){let b;return b=typeof v=="object"?v.value:v,bf(b)?null:b}(t.limit));let d=null;t.startAt&&(d=function(v){const b=!!v.before,I=v.values||[];return new ro(I,b)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const b=!v.before,I=v.values||[];return new ro(I,b)}(t.endAt)),iP(e,s,u,o,h,"F",d,m)}function p4(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gu(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gu(t.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gu(t.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gu(t.unaryFilter.field);return We.create(u,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):n.fieldFilter!==void 0?function(t){return We.create(Gu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ct.create(t.compositeFilter.filters.map(r=>NP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be()}function m4(n){return a4[n]}function g4(n){return o4[n]}function _4(n){return l4[n]}function Hu(n){return{fieldPath:n.canonicalString()}}function Gu(n){return wt.fromServerFormat(n.fieldPath)}function kP(n){return n instanceof We?function(t){if(t.op==="=="){if(sS(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NAN"}};if(iS(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sS(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NAN"}};if(iS(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hu(t.field),op:g4(t.op),value:t.value}}}(n):n instanceof ct?function(t){const r=t.getFilters().map(s=>kP(s));return r.length===1?r[0]:{compositeFilter:{op:_4(t.op),filters:r}}}(n):be()}function y4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,r,s,o=De.min(),u=De.min(),h=Ft.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.Tt=e}}function v4(n,e){let t;if(e.document)t=DP(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),s=Rl(e.noDocument.readTime);t=yt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=ye.fromSegments(e.unknownDocument.path),s=Rl(e.unknownDocument.version);t=yt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new At(s[0],s[1]);return De.fromTimestamp(o)}(e.readTime)),t}function bS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:og(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:ef(o,u.key),fields:u.data.value.mapValue.fields,updateTime:Cc(o,u.version.toTimestamp()),createTime:Cc(o,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sl(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:t.path.toArray(),version:Sl(e.version)}}return r}function og(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rl(n){const e=new At(n.seconds,n.nanoseconds);return De.fromTimestamp(e)}function nl(n,e){const t=(e.baseMutations||[]).map(o=>gE(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>gE(n.Tt,o)),s=At.fromMillis(e.localWriteTimeMs);return new PT(e.batchId,s,t,r)}function Ad(n){const e=Rl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Rl(n.lastLimboFreeSnapshotVersion):De.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Se(o.documents.length===1),Wn(Hc(RP(o.documents[0])))}(n.query):function(o){return Wn(xP(o))}(n.query),new _s(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ft.fromBase64String(n.resumeToken))}function LP(n,e){const t=Sl(e.snapshotVersion),r=Sl(e.lastLimboFreeSnapshotVersion);let s;s=ig(e.target)?PP(n.Tt,e.target):OP(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function VT(n){const e=xP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ag(e,e.limit,"L"):e}function Rv(n,e){return new xT(e.largestBatchId,gE(n.Tt,e.overlayMutation))}function wS(n,e){const t=e.path.lastSegment();return[n,Mn(e.path.popLast()),t]}function IS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Sl(r.readTime),documentKey:Mn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{getBundleMetadata(e,t){return AS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Rl(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return AS(e).put(function(s){return{bundleId:s.id,createTime:Sl(Gt(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return SS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:VT(o.bundledQuery),readTime:Rl(o.readTime)}}(r)})}saveNamedQuery(e,t){return SS(e).put(function(s){return{name:s.name,readTime:Sl(Gt(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function AS(n){return on(n,Dg)}function SS(n){return on(n,Pg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Lg(e,r)}getOverlay(e,t){return hd(e).get(wS(this.userId,t)).next(r=>r?Rv(this.serializer,r):null)}getOverlays(e,t){const r=Oi();return $.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,u)=>{const h=new xT(t,u);s.push(this.Et(e,h))}),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(Mn(u.getCollectionPath())));const o=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(hd(e).J(iE,h))}),$.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Oi(),o=Mn(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return hd(e).G(iE,u).next(h=>{for(const d of h){const m=Rv(this.serializer,d);s.set(m.getKey(),m)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=Oi();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hd(e).Z({index:LD,range:h},(d,m,_)=>{const v=Rv(this.serializer,m);o.size()<s||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):_.done()}).next(()=>o)}Et(e,t){return hd(e).put(function(s,o,u){const[h,d,m]=wS(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:tf(s.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function hd(n){return on(n,Og)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{dt(e){return on(e,TT)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Ft.fromUint8Array(r):Ft.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(bt(e.integerValue));else if("doubleValue"in e){const r=bt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),$d(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=Ds(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Ps(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?QD(e)?this.ft(t,Number.MAX_SAFE_INTEGER):kg(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):be()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const s of Object.keys(r))this.wt(s,t),this.Rt(r[s],t)}vt(e,t){var r,s;const o=e.fields||{};this.ft(t,53);const u=wc,h=((s=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(bt(h)),this.wt(u,t),this.Rt(o[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const s of r)this.Rt(s,t)}Dt(e,t){this.ft(t,37),ye.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}rl.xt=new rl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=255;function b4(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function RS(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const u=b4(255&r[o]);if(s+=u,u!==8)break}return s}(n);return Math.ceil(e/8)}class w4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Kt(e){const t=this.Ut(e),r=RS(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Ut(e),r=RS(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(Mu),this.jt(255)}Ht(){this.Jt(Mu),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Mu?(this.jt(Mu),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Mu?(this.Jt(Mu),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class I4{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class A4{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class dd{constructor(){this.Zt=new w4,this.Xt=new I4(this.Zt),this.en=new A4(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new il(this.indexId,this.documentKey,this.arrayValue,r)}}function Sa(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=CS(n.arrayValue,e.arrayValue),t!==0?t:(t=CS(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function CS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.rn=new ht((t,r)=>wt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Se(e.collectionGroup===this.collectionId),this.an)return!1;const t=tE(e);if(t!==void 0&&!this.cn(t))return!1;const r=Jo(e);let s=new Set,o=0,u=0;for(;o<r.length&&this.cn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=r[o];if(!this.ln(h,d)||!this.hn(this.sn[u++],d))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new ht(wt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Pm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pm(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pm(r.field,r.dir==="asc"?0:1)));return new Zm(Zm.UNKNOWN_ID,this.collectionId,t,Gd.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n){var e,t;if(Se(n instanceof We||n instanceof ct),n instanceof We){if(n instanceof rP){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>We.create(n.field,"==",o)))||[];return ct.create(s,"or")}return n}const r=n.filters.map(s=>UP(s));return ct.create(r,n.op)}function S4(n){if(n.getFilters().length===0)return[];const e=vE(UP(n));return Se(FP(e)),_E(e)||yE(e)?[e]:e.getFilters()}function _E(n){return n instanceof We}function yE(n){return n instanceof ct&&AT(n)}function FP(n){return _E(n)||yE(n)||function(t){if(t instanceof ct&&uE(t)){for(const r of t.getFilters())if(!_E(r)&&!yE(r))return!1;return!0}return!1}(n)}function vE(n){if(Se(n instanceof We||n instanceof ct),n instanceof We)return n;if(n.filters.length===1)return vE(n.filters[0]);const e=n.filters.map(r=>vE(r));let t=ct.create(e,n.op);return t=lg(t),FP(t)?t:(Se(t instanceof ct),Se(Ac(t)),Se(t.filters.length>1),t.filters.reduce((r,s)=>MT(r,s)))}function MT(n,e){let t;return Se(n instanceof We||n instanceof ct),Se(e instanceof We||e instanceof ct),t=n instanceof We?e instanceof We?function(s,o){return ct.create([s,o],"and")}(n,e):PS(n,e):e instanceof We?PS(e,n):function(s,o){if(Se(s.filters.length>0&&o.filters.length>0),Ac(s)&&Ac(o))return eP(s,o.getFilters());const u=uE(s)?s:o,h=uE(s)?o:s,d=u.filters.map(m=>MT(m,h));return ct.create(d,"or")}(n,e),lg(t)}function PS(n,e){if(Ac(e))return eP(e,n.getFilters());{const t=e.filters.map(r=>MT(n,r));return ct.create(t,"or")}}function lg(n){if(Se(n instanceof We||n instanceof ct),n instanceof We)return n;const e=n.getFilters();if(e.length===1)return lg(e[0]);if(ZD(n))return n;const t=e.map(s=>lg(s)),r=[];return t.forEach(s=>{s instanceof We?r.push(s):s instanceof ct&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ct.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.Tn=new LT}addToCollectionParentIndex(e,t){return this.Tn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(yr.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class LT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ht(Qe.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="IndexedDbIndexManager",_m=new Uint8Array(0);class C4{constructor(e,t){this.databaseId=t,this.In=new LT,this.En=new Ms(r=>wl(r),(r,s)=>If(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:Mn(s)};return xS(e).put(o)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[AD(t),""],!1,!0);return xS(e).G(s).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Pi(u.parent))}return r})}addFieldIndex(e,t){const r=fd(e),s=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const u=Uu(e);return o.next(h=>{u.put(IS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=fd(e),s=Uu(e),o=Lu(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=fd(e),r=Lu(e),s=Uu(e);return t.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,t){return $.forEach(this.dn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new DS(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Lu(e);let s=!0;const o=new Map;return $.forEach(this.dn(t),u=>this.An(e,u).next(h=>{s&&(s=!!h),o.set(u,h)})).next(()=>{if(s){let u=Ue();const h=[];return $.forEach(o,(d,m)=>{ce(OS,`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`}(d)} to execute ${wl(t)}`);const _=function(H,se){const ie=tE(se);if(ie===void 0)return null;for(const X of sg(H,ie.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(m,d),v=function(H,se){const ie=new Map;for(const X of Jo(se))for(const x of sg(H,X.fieldPath))switch(x.op){case"==":case"in":ie.set(X.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ie.set(X.fieldPath.canonicalString(),x.value),Array.from(ie.values())}return null}(m,d),b=function(H,se){const ie=[];let X=!0;for(const x of Jo(se)){const R=x.kind===0?cS(H,x.fieldPath,H.startAt):hS(H,x.fieldPath,H.startAt);ie.push(R.value),X&&(X=R.inclusive)}return new ro(ie,X)}(m,d),I=function(H,se){const ie=[];let X=!0;for(const x of Jo(se)){const R=x.kind===0?hS(H,x.fieldPath,H.endAt):cS(H,x.fieldPath,H.endAt);ie.push(R.value),X&&(X=R.inclusive)}return new ro(ie,X)}(m,d),C=this.Rn(d,m,b),V=this.Rn(d,m,I),N=this.Vn(d,m,v),B=this.mn(d.indexId,_,C,b.inclusive,V,I.inclusive,N);return $.forEach(B,Y=>r.H(Y,t.limit).next(H=>{H.forEach(se=>{const ie=ye.fromSegments(se.documentKey);u.has(ie)||(u=u.add(ie),h.push(ie))})}))}).next(()=>h)}return $.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=S4(ct.create(e.filters,"and")).map(r=>hE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),m=d/(t!=null?t.length:1),_=[];for(let v=0;v<d;++v){const b=t?this.fn(t[v/m]):_m,I=this.gn(e,b,r[v%m],s),C=this.pn(e,b,o[v%m],u),V=h.map(N=>this.gn(e,b,N,!0));_.push(...this.createRange(I,C,V))}return _}gn(e,t,r,s){const o=new il(e,ye.empty(),t,r);return s?o:o.nn()}pn(e,t,r,s){const o=new il(e,ye.empty(),t,r);return s?o.nn():o}An(e,t){const r=new DS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let u=null;for(const h of o)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const s=this.dn(t);return $.forEach(s,o=>this.An(e,o).next(u=>{u?r!==0&&u.fields.length<function(d){let m=new ht(wt.comparator),_=!1;for(const v of d.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:m=m.add(b.field));for(const v of d.orderBy)v.field.isKeyField()||(m=m.add(v.field));return m.size+(_?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&s.length>1&&r===2?1:r)}yn(e,t){const r=new dd;for(const s of Jo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=r.tn(s.kind);rl.xt.At(o,u)}return r.Yt()}fn(e){const t=new dd;return rl.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new dd;return rl.xt.At(bl(this.databaseId,t),r.tn(function(o){const u=Jo(o);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let s=[];s.push(new dd);let o=0;for(const u of Jo(e)){const h=r[o++];for(const d of s)if(this.bn(t,u.fieldPath)&&Zd(h))s=this.Sn(s,u,h);else{const m=d.tn(u.kind);rl.xt.At(h,m)}}return this.Dn(s)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const s=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of s){const d=new dd;d.seed(h.Yt()),rl.xt.At(u,d.tn(t.kind)),o.push(d)}return o}bn(e,t){return!!e.filters.find(r=>r instanceof We&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=fd(e),s=Uu(e);return(t?r.G(rE,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const u=[];return $.forEach(o,h=>s.get([h.indexId,this.uid]).next(d=>{u.push(function(_,v){const b=v?new Gd(v.sequenceNumber,new yr(Rl(v.readTime),new ye(Pi(v.documentKey)),v.largestBatchId)):Gd.empty(),I=_.fields.map(([C,V])=>new Pm(wt.fromServerFormat(C),V));return new Zm(_.indexId,_.collectionGroup,I,b)}(h,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=fd(e),o=Uu(e);return this.vn(e).next(u=>s.G(rE,IDBKeyRange.bound(t,t)).next(h=>$.forEach(h,d=>o.put(IS(d.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,(s,o)=>{const u=r.get(s.collectionGroup);return(u?$.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),$.forEach(h,d=>this.Cn(e,s,d).next(m=>{const _=this.Fn(o,d);return m.isEqual(_)?$.resolve():this.Mn(e,o,d,m,_)}))))})}xn(e,t,r,s){return Lu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,s){return Lu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const s=Lu(e);let o=new ht(Sa);return s.Z({index:MD,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{o=o.add(new il(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}Fn(e,t){let r=new ht(Sa);const s=this.yn(t,e);if(s==null)return r;const o=tE(t);if(o!=null){const u=e.data.field(o.fieldPath);if(Zd(u))for(const h of u.arrayValue.values||[])r=r.add(new il(t.indexId,e.key,this.fn(h),s))}else r=r.add(new il(t.indexId,e.key,_m,s));return r}Mn(e,t,r,s,o){ce(OS,"Updating index entries for document '%s'",t.key);const u=[];return function(d,m,_,v,b){const I=d.getIterator(),C=m.getIterator();let V=Vu(I),N=Vu(C);for(;V||N;){let B=!1,Y=!1;if(V&&N){const H=_(V,N);H<0?Y=!0:H>0&&(B=!0)}else V!=null?Y=!0:B=!0;B?(v(N),N=Vu(C)):Y?(b(V),V=Vu(I)):(V=Vu(I),N=Vu(C))}}(s,o,Sa,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),$.waitFor(u)}vn(e){let t=1;return Uu(e).Z({index:VD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Sa(u,h)).filter((u,h,d)=>!h||Sa(u,d[h-1])!==0);const s=[];s.push(e);for(const u of r){const h=Sa(u,e),d=Sa(u,t);if(h===0)s[0]=e.nn();else if(h>0&&d<0)s.push(u),s.push(u.nn());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Nn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,_m,[]],d=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,_m,[]];o.push(IDBKeyRange.bound(h,d))}return o}Nn(e,t){return Sa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NS)}getMinOffset(e,t){return $.mapArray(this.dn(t),r=>this.An(e,r).next(s=>s||be())).next(NS)}}function xS(n){return on(n,Wd)}function Lu(n){return on(n,rg)}function fd(n){return on(n,ET)}function Uu(n){return on(n,ng)}function NS(n){Se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;_T(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new yr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BP=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n,e,t){const r=n.store(Yr),s=n.store(vc),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=r.Z({range:u},(_,v,b)=>(h++,b.delete()));o.push(d.next(()=>{Se(h===1)}));const m=[];for(const _ of t.mutations){const v=xD(e,_.key.path,t.batchId);o.push(s.delete(v)),m.push(_.key)}return $.waitFor(o).next(()=>m)}function ug(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw be();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(BP,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class Ug{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,t,r,s){Se(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Ug(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).Z({index:al,range:r},(s,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=$u(e),u=Ra(e);return u.add({}).next(h=>{Se(typeof h=="number");const d=new PT(h,t,r,s),m=function(I,C,V){const N=V.baseMutations.map(Y=>tf(I.Tt,Y)),B=V.mutations.map(Y=>tf(I.Tt,Y));return{userId:C,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,d),_=[];let v=new ht((b,I)=>Ve(b.canonicalString(),I.canonicalString()));for(const b of s){const I=xD(this.userId,b.key.path,h);v=v.add(b.key.path.popLast()),_.push(u.put(m)),_.push(o.put(I,lU))}return v.forEach(b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Bn[h]=d.keys()}),$.waitFor(_).next(()=>d)})}lookupMutationBatch(e,t){return Ra(e).get(t).next(r=>r?(Se(r.userId===this.userId),nl(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?$.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ra(e).Z({index:al,range:s},(u,h,d)=>{h.userId===this.userId&&(Se(h.batchId>=r),o=nl(this.serializer,h)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ka;return Ra(e).Z({index:al,range:t,reverse:!0},(s,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ka],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).G(al,t).next(r=>r.map(s=>nl(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Om(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return $u(e).Z({range:s},(u,h,d)=>{const[m,_,v]=u,b=Pi(_);if(m===this.userId&&t.path.isEqual(b))return Ra(e).get(v).next(I=>{if(!I)throw be();Se(I.userId===this.userId),o.push(nl(this.serializer,I))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ht(Ve);const s=[];return t.forEach(o=>{const u=Om(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=$u(e).Z({range:h},(m,_,v)=>{const[b,I,C]=m,V=Pi(I);b===this.userId&&o.path.isEqual(V)?r=r.add(C):v.done()});s.push(d)}),$.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=Om(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new ht(Ve);return $u(e).Z({range:u},(d,m,_)=>{const[v,b,I]=d,C=Pi(b);v===this.userId&&r.isPrefixOf(C)?C.length===s&&(h=h.add(I)):_.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],s=[];return t.forEach(o=>{s.push(Ra(e).get(o).next(u=>{if(u===null)throw be();Se(u.userId===this.userId),r.push(nl(this.serializer,u))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return zP(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return $u(e).Z({range:r},(o,u,h)=>{if(o[0]===this.userId){const d=Pi(o[1]);s.push(d)}else h.done()}).next(()=>{Se(s.length===0)})})}containsKey(e,t){return qP(e,this.userId,t)}Qn(e){return jP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ka,lastStreamToken:""})}}function qP(n,e,t){const r=Om(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return $u(n).Z({range:o,Y:!0},(h,d,m)=>{const[_,v,b]=h;_===e&&v===s&&(u=!0),m.done()}).next(()=>u)}function Ra(n){return on(n,Yr)}function $u(n){return on(n,vc)}function jP(n){return on(n,Kd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Cl(0)}static Un(){return new Cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Cl(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>De.fromTimestamp(new At(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fu(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return Fu(e).Z((u,h)=>{const d=Ad(h);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>$.waitFor(o)).next(()=>s)}forEachTarget(e,t){return Fu(e).Z((r,s)=>{const o=Ad(s);t(o)})}Wn(e){return VS(e).get(tg).next(t=>(Se(t!==null),t))}Gn(e,t){return VS(e).put(tg,t)}zn(e,t){return Fu(e).put(LP(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wl(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Fu(e).Z({range:s,index:kD},(u,h,d)=>{const m=Ad(h);If(t,m.target)&&(o=m,d.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=xa(e);return t.forEach(u=>{const h=Mn(u.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=xa(e);return $.forEach(t,o=>{const u=Mn(o.path);return $.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=xa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=xa(e);let o=Ue();return s.Z({range:r,Y:!0},(u,h,d)=>{const m=Pi(u[1]),_=new ye(m);o=o.add(_)}).next(()=>o)}containsKey(e,t){const r=Mn(t.path),s=IDBKeyRange.bound([r],[AD(r)],!1,!0);let o=0;return xa(e).Z({index:vT,Y:!0,range:s},([u,h],d,m)=>{u!==0&&(o++,m.done())}).next(()=>o>0)}lt(e,t){return Fu(e).get(t).next(r=>r?Ad(r):null)}}function Fu(n){return on(n,Ec)}function VS(n){return on(n,yl)}function xa(n){return on(n,Tc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="LruGarbageCollector",P4=1048576;function LS([n,e],[t,r]){const s=Ve(n,t);return s===0?Ve(e,r):s}class O4{constructor(e){this.Hn=e,this.buffer=new ht(LS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ce(MS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){co(t)?ce(MS,"Ignoring IndexedDB error during garbage collection: ",t):await uo(t)}await this.er(3e5)})}}class x4{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(ir.ae);const r=new O4(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(kS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,u,h,d,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,u=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),qu()<=$e.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function GP(n,e){return new x4(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t){this.db=e,this.garbageCollector=GP(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,s)=>t(s))}addReference(e,t,r){return ym(e,r)}removeReference(e,t,r){return ym(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ym(e,t)}ar(e,t){return function(s,o){let u=!1;return jP(s).X(h=>qP(s,h,o).next(d=>(d&&(u=!0),$.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this._r(e,(u,h)=>{if(h<=t){const d=this.ar(e,u).next(m=>{if(!m)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,De.min()),xa(e).delete(function(v){return[0,Mn(v.path)]}(u))))});s.push(d)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ym(e,t)}_r(e,t){const r=xa(e);let s,o=ir.ae;return r.Z({index:vT},([u,h],{path:d,sequenceNumber:m})=>{u===0?(o!==ir.ae&&t(new ye(Pi(s)),o),o=m,s=d):o=ir.ae}).next(()=>{o!==ir.ae&&t(new ye(Pi(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ym(n,e){return xa(n).put(function(r,s){return{targetId:0,path:Mn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.changes=new Ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xo(e).put(r)}removeEntry(e,t,r){return Xo(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],og(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=yt.newInvalidDocument(t);return Xo(e).Z({index:xm,range:IDBKeyRange.only(pd(t))},(s,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return Xo(e).Z({index:xm,range:IDBKeyRange.only(pd(t))},(s,o)=>{r={document:this.cr(t,o),size:ug(o)}}).next(()=>r)}getEntries(e,t){let r=ar();return this.hr(e,t,(s,o)=>{const u=this.cr(s,o);r=r.insert(s,u)}).next(()=>r)}Pr(e,t){let r=ar(),s=new _t(ye.comparator);return this.hr(e,t,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h),s=s.insert(o,ug(u))}).next(()=>({documents:r,Tr:s}))}hr(e,t,r){if(t.isEmpty())return $.resolve();let s=new ht(BS);t.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(pd(s.first()),pd(s.last())),u=s.getIterator();let h=u.getNext();return Xo(e).Z({index:xm,range:o},(d,m,_)=>{const v=ye.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&BS(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,m),h=u.hasNext()?u.getNext():null),h?_.W(pd(h)):_.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),og(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xo(e).G(IDBKeyRange.bound(h,d,!0)).next(m=>{o==null||o.incrementDocumentReadCount(m.length);let _=ar();for(const v of m){const b=this.cr(ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(Sf(t,b)||s.has(b.key))&&(_=_.insert(b.key,b))}return _})}getAllFromCollectionGroup(e,t,r,s){let o=ar();const u=FS(t,r),h=FS(t,yr.max());return Xo(e).Z({index:ND,range:IDBKeyRange.bound(u,h,!0)},(d,m,_)=>{const v=this.cr(ye.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(v.key,v),o.size===s&&_.done()}).next(()=>o)}newChangeBuffer(e){return new V4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return US(e).get(nE).next(t=>(Se(!!t),t))}ur(e,t){return US(e).put(nE,t)}cr(e,t){if(t){const r=v4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return yt.newInvalidDocument(e)}}function KP(n){return new k4(n)}class V4 extends $P{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Ms(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new ht((o,u)=>Ve(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=bS(this.Ir.serializer,u);s=s.add(o.path.popLast());const m=ug(d);r+=m-h.size,t.push(this.Ir.addEntry(e,o,d))}else if(r-=h.size,this.trackRemovals){const d=bS(this.Ir.serializer,u.convertToNoDocument(De.min()));t.push(this.Ir.addEntry(e,o,d))}}),s.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:s})=>(s.forEach((o,u)=>{this.Er.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function US(n){return on(n,Qd)}function Xo(n){return on(n,eg)}function pd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function FS(n,e){const t=e.documentKey.path.toArray();return[n,og(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BS(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=Ve(t[o],r[o]),s)return s;return s=Ve(t.length,r.length),s||(s=Ve(t[t.length-2],r[r.length-2]),s||Ve(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&xd(r.mutation,s,sr.empty(),At.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){const s=Oi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let u=wd();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Oi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let o=ar();const u=Od(),h=function(){return Od()}();return t.forEach((d,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Ls)?o=o.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),xd(_.mutation,m,_.mutation.getFieldMask(),At.now())):u.set(m.key,sr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,_)=>u.set(m,_)),t.forEach((m,_)=>{var v;return h.set(m,new M4(_,(v=u.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Od();let s=new _t((u,h)=>u-h),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(d=>{const m=t.get(d);if(m===null)return;let _=r.get(d)||sr.empty();_=h.applyToLocalView(m,_),r.set(d,_);const v=(s.get(h.batchId)||Ue()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=cP();_.forEach(b=>{if(!o.has(b)){const I=_P(t.get(b),r.get(b));I!==null&&v.set(b,I),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return $.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ST(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):$.resolve(Oi());let h=yc,d=o;return u.next(m=>$.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?$.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{d=d.insert(_,b)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Ue())).next(_=>({batchId:h,changes:uP(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let s=wd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=wd();return this.indexManager.getCollectionParents(e,o).next(h=>$.forEach(h,d=>{const m=function(v,b){return new Vs(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(_=>{_.forEach((v,b)=>{u=u.insert(v,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(u=>{o.forEach((d,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,yt.newInvalidDocument(_)))});let h=wd();return u.forEach((d,m)=>{const _=o.get(d);_!==void 0&&xd(_.mutation,m,sr.empty(),At.now()),Sf(t,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return $.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Gt(s.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:VT(s.bundledQuery),readTime:Gt(s.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new _t(ye.comparator),this.Rr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oi();return $.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=Oi(),o=t.length+1,u=new ye(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new _t((m,_)=>m-_);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=o.get(m.largestBatchId);_===null&&(_=Oi(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=Oi(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=s)););return $.resolve(h)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new xT(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ue(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.Vr=new ht(gn.mr),this.gr=new ht(gn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new gn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new gn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new ye(new Qe([])),r=new gn(t,e),s=new gn(t,e+1),o=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new Qe([])),r=new gn(t,e),s=new gn(t,e+1);let o=Ue();return this.gr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new gn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new ht(gn.mr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new PT(o,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Mr=this.Mr.add(new gn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(u)}lookupMutationBatch(e,t){return $.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Ka:this.Fr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gn(t,0),s=new gn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],u=>{const h=this.Or(u.Cr);o.push(h)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ht(Ve);return t.forEach(s=>{const o=new gn(s,0),u=new gn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{r=r.add(h.Cr)})}),$.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const u=new gn(new ye(o),0);let h=new ht(Ve);return this.Mr.forEachWhile(d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Cr)),!0)},u),$.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Se(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return $.forEach(t.mutations,s=>{const o=new gn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new gn(t,0),s=this.Mr.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.kr=e,this.docs=function(){return new _t(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():yt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ar();const u=t.path,h=new ye(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||_T(RD(_),r)<=0||(s.has(_.key)||Sf(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,s){be()}qr(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new q4(this)}getSize(e){return $.resolve(this.size)}}class q4 extends $P{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.persistence=e,this.Qr=new Ms(t=>wl(t),If),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new UT,this.targetCount=0,this.Ur=Cl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),$.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.zn(t),$.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),$.waitFor(o).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ir(0),this.zr=!1,this.zr=!0,this.jr=new F4,this.referenceDelegate=e(this),this.Hr=new j4(this),this.indexManager=new R4,this.remoteDocumentCache=function(s){return new z4(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new MP(t),this.Yr=new L4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new B4(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const s=new H4(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return $.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class H4 extends DD{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.ti=new UT,this.ni=null}static ri(e){return new Fg(e)}get ii(){if(this.ni)return this.ni;throw be()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),$.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ii,r=>{const s=ye.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return $.or([()=>$.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class cg{constructor(e,t){this.persistence=e,this.oi=new Ms(r=>Mn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=GP(this,t)}static ri(e,t){return new cg(e,t)}Zr(){}Xr(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return $.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?$.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,o.removeEntry(u,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=km(e.data.value)),t}ar(e,t,r){return $.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.serializer=e}B(e,t,r,s){const o=new Cg("createOrUpgrade",t);r<1&&s>=1&&(function(d){d.createObjectStore(wf)}(e),function(d){d.createObjectStore(Kd,{keyPath:oU}),d.createObjectStore(Yr,{keyPath:ZA,autoIncrement:!0}).createIndex(al,JA,{unique:!0}),d.createObjectStore(vc)}(e),zS(e),function(d){d.createObjectStore(el)}(e));let u=$.resolve();return r<3&&s>=3&&(r!==0&&(function(d){d.deleteObjectStore(Tc),d.deleteObjectStore(Ec),d.deleteObjectStore(yl)}(e),zS(e)),u=u.next(()=>function(d){const m=d.store(yl),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return m.put(tg,_)}(o))),r<4&&s>=4&&(r!==0&&(u=u.next(()=>function(d,m){return m.store(Yr).G().next(v=>{d.deleteObjectStore(Yr),d.createObjectStore(Yr,{keyPath:ZA,autoIncrement:!0}).createIndex(al,JA,{unique:!0});const b=m.store(Yr),I=v.map(C=>b.put(C));return $.waitFor(I)})}(e,o))),u=u.next(()=>{(function(d){d.createObjectStore(bc,{keyPath:gU})})(e)})),r<5&&s>=5&&(u=u.next(()=>this._i(o))),r<6&&s>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Qd)}(e),this.ai(o)))),r<7&&s>=7&&(u=u.next(()=>this.ui(o))),r<8&&s>=8&&(u=u.next(()=>this.ci(e,o))),r<9&&s>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(u=u.next(()=>this.li(o))),r<11&&s>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(Dg,{keyPath:_U})})(e),function(d){d.createObjectStore(Pg,{keyPath:yU})}(e)})),r<12&&s>=12&&(u=u.next(()=>{(function(d){const m=d.createObjectStore(Og,{keyPath:AU});m.createIndex(iE,SU,{unique:!1}),m.createIndex(LD,RU,{unique:!1})})(e)})),r<13&&s>=13&&(u=u.next(()=>function(d){const m=d.createObjectStore(eg,{keyPath:uU});m.createIndex(xm,cU),m.createIndex(ND,hU)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(el))),r<14&&s>=14&&(u=u.next(()=>this.Pi(e,o))),r<15&&s>=15&&(u=u.next(()=>function(d){d.createObjectStore(ET,{keyPath:vU,autoIncrement:!0}).createIndex(rE,EU,{unique:!1}),d.createObjectStore(ng,{keyPath:TU}).createIndex(VD,bU,{unique:!1}),d.createObjectStore(rg,{keyPath:wU}).createIndex(MD,IU,{unique:!1})}(e))),r<16&&s>=16&&(u=u.next(()=>{t.objectStore(ng).clear()}).next(()=>{t.objectStore(rg).clear()})),r<17&&s>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(TT,{keyPath:CU})})(e)})),u}ai(e){let t=0;return e.store(el).Z((r,s)=>{t+=ug(s)}).next(()=>{const r={byteSize:t};return e.store(Qd).put(nE,r)})}_i(e){const t=e.store(Kd),r=e.store(Yr);return t.G().next(s=>$.forEach(s,o=>{const u=IDBKeyRange.bound([o.userId,Ka],[o.userId,o.lastAcknowledgedBatchId]);return r.G(al,u).next(h=>$.forEach(h,d=>{Se(d.userId===o.userId);const m=nl(this.serializer,d);return zP(e,o.userId,m).next(()=>{})}))}))}ui(e){const t=e.store(Tc),r=e.store(el);return e.store(yl).get(tg).next(s=>{const o=[];return r.Z((u,h)=>{const d=new Qe(u),m=function(v){return[0,Mn(v)]}(d);o.push(t.get(m).next(_=>_?$.resolve():(v=>t.put({targetId:0,path:Mn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>$.waitFor(o))})}ci(e,t){e.createObjectStore(Wd,{keyPath:mU});const r=t.store(Wd),s=new LT,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return r.put({collectionId:h,parent:Mn(d)})}};return t.store(el).Z({Y:!0},(u,h)=>{const d=new Qe(u);return o(d.popLast())}).next(()=>t.store(vc).Z({Y:!0},([u,h,d],m)=>{const _=Pi(h);return o(_.popLast())}))}li(e){const t=e.store(Ec);return t.Z((r,s)=>{const o=Ad(s),u=LP(this.serializer,o);return t.put(u)})}hi(e,t){const r=t.store(el),s=[];return r.Z((o,u)=>{const h=t.store(eg),d=function(v){return v.document?new ye(Qe.fromString(v.document.name).popFirst(5)):v.noDocument?ye.fromSegments(v.noDocument.path):v.unknownDocument?ye.fromSegments(v.unknownDocument.path):be()}(u).path.toArray(),m={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(m))}).next(()=>$.waitFor(s))}Pi(e,t){const r=t.store(Yr),s=KP(this.serializer),o=new FT(Fg.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(d=>{var m;let _=(m=h.get(d.userId))!==null&&m!==void 0?m:Ue();nl(this.serializer,d).keys().forEach(v=>_=_.add(v)),h.set(d.userId,_)}),$.forEach(h,(d,m)=>{const _=new _n(m),v=Lg.It(this.serializer,_),b=o.getIndexManager(_),I=Ug.It(_,this.serializer,b,o.referenceDelegate);return new QP(s,I,v,b).recalculateAndSaveOverlaysForDocumentKeys(new sE(t,ir.ae),d).next()})})}}function zS(n){n.createObjectStore(Tc,{keyPath:fU}).createIndex(vT,pU,{unique:!0}),n.createObjectStore(Ec,{keyPath:"targetId"}).createIndex(kD,dU,{unique:!0}),n.createObjectStore(yl)}const Ca="IndexedDbPersistence",Cv=18e5,Dv=5e3,Pv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WP="main";class BT{constructor(e,t,r,s,o,u,h,d,m,_,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=u,this.document=h,this.Ii=m,this.Ei=_,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!BT.D())throw new le(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N4(this,s),this.gi=t+WP,this.serializer=new MP(d),this.pi=new Ni(this.gi,this.di,new G4(this.serializer)),this.jr=new T4,this.Hr=new D4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KP(this.serializer),this.Yr=new E4,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&Ht(Ca,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,Pv);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new ir(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(co(e))return ce(Ca,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Ca,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return md(e).get(ku).next(t=>$.resolve(this.Ni(t)))}Bi(e){return vm(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Cv)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=on(t,bc);return r.G().next(s=>{const o=this.qi(s,Cv),u=s.filter(h=>o.indexOf(h)===-1);return $.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?$.resolve(!0):md(e).get(ku).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Dv)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,Pv);return!1}}return!(!this.networkEnabled||!this.inForeground)||vm(e).G().next(r=>this.qi(r,Dv).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ce(Ca,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[wf,bc],e=>{const t=new sE(e,ir.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>vm(e).G().next(t=>this.qi(t,Cv).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Ug.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new C4(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Lg.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){ce(Ca,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(d){return d===17?OU:d===16?PU:d===15?bT:d===14?BD:d===13?FD:d===12?DU:d===11?UD:void be()}(this.di);let u;return this.pi.runTransaction(e,s,o,h=>(u=new sE(h,this.Gr?this.Gr.next():ir.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new le(Z.FAILED_PRECONDITION,CD);return r(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return md(e).get(ku).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Dv)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(Z.FAILED_PRECONDITION,Pv)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return md(e).put(ku,t)}static D(){return Ni.D()}xi(e){const t=md(e);return t.get(ku).next(r=>this.Ni(r)?(ce(Ca,"Releasing primary lease."),t.delete(ku)):$.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;nD()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ce(Ca,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht(Ca,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function md(n){return on(n,wf)}function vm(n){return on(n,bc)}function zT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ue(),s=Ue();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new qT(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return nD()?8:PD(Ot())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new $4;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(qu()<=$e.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),$.resolve()):(qu()<=$e.DEBUG&&ce("QueryEngine","Query:",ju(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(qu()<=$e.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(t))):$.resolve())}rs(e,t){if(dS(t))return $.resolve(null);let r=Wn(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=ag(t,null,"F"),r=Wn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Ue(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const m=this.cs(t,h);return this.ls(t,m,u,d.readTime)?this.rs(e,ag(t,null,"F")):this.hs(e,m,t,d)}))})))}ss(e,t,r,s){return dS(t)||s.isEqual(De.min())?$.resolve(null):this.ns.getDocuments(e,r).next(o=>{const u=this.cs(t,o);return this.ls(t,u,r,s)?$.resolve(null):(qu()<=$e.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ju(t)),this.hs(e,u,t,SD(s,yc)).next(h=>h))})}cs(e,t){let r=new ht(oP(e));return t.forEach((s,o)=>{Sf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return qu()<=$e.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ju(t)),this.ns.getDocumentsMatchingQuery(e,t,yr.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LocalStore",K4=3e8;class Q4{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new _t(Ve),this.Is=new Ms(o=>wl(o),If),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QP(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function XP(n,e,t,r){return new Q4(n,e,t,r)}async function ZP(n,e){const t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let d=Ue();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(r,d).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:h}))})})}function W4(n,e){const t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,b=v.keys();let I=$.resolve();return b.forEach(C=>{I=I.next(()=>_.getEntry(d,C)).next(V=>{const N=m.docVersions.get(C);Se(N!==null),V.version.compareTo(N)<0&&(v.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),_.addEntry(V)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=Ue();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function JP(n){const e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Y4(n,e){const t=ve(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const h=[];e.targetChanges.forEach((_,v)=>{const b=s.get(v);if(!b)return;h.push(t.Hr.removeMatchingKeys(o,_.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,_.addedDocuments,v)));let I=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(Ft.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,r)),s=s.insert(v,I),function(V,N,B){return V.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=K4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(b,I,_)&&h.push(t.Hr.updateTargetData(o,I))});let d=ar(),m=Ue();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(eO(o,u,e.documentUpdates).next(_=>{d=_.Vs,m=_.fs})),!r.isEqual(De.min())){const _=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return $.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(t.Ts=s,o))}function eO(n,e,t){let r=Ue(),s=Ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ar();return t.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):ce(jT,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Vs:u,fs:s}})}function X4(n,e){const t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ka),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dc(n,e){const t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,$.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new _s(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Pc(n,e,t){const r=ve(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!co(u))throw u;ce(jT,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function hg(n,e,t){const r=ve(n);let s=De.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,m,_){const v=ve(d),b=v.Is.get(_);return b!==void 0?$.resolve(v.Ts.get(b)):v.Hr.getTargetData(m,_)}(r,u,Wn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:De.min(),t?o:Ue())).next(h=>(rO(r,aP(e),h),{documents:h,gs:o})))}function tO(n,e){const t=ve(n),r=ve(t.Hr),s=t.Ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(u=>u?u.target:null))}function nO(n,e){const t=ve(n),r=t.Es.get(e)||De.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ds.getAllFromCollectionGroup(s,e,SD(r,yc),Number.MAX_SAFE_INTEGER)).then(s=>(rO(t,e,s),s))}function rO(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}async function Z4(n,e,t,r){const s=ve(n);let o=Ue(),u=ar();for(const m of t){const _=e.ps(m.metadata.name);m.document&&(o=o.add(_));const v=e.ys(m);v.setReadTime(e.ws(m.metadata.readTime)),u=u.insert(_,v)}const h=s.ds.newChangeBuffer({trackRemovals:!0}),d=await Dc(s,function(_){return Wn(Hc(Qe.fromString(`__bundle__/docs/${_}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",m=>eO(m,h,u).next(_=>(h.apply(m),_)).next(_=>s.Hr.removeMatchingKeysForTargetId(m,d.targetId).next(()=>s.Hr.addMatchingKeys(m,o,d.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(m,_.Vs,_.fs)).next(()=>_.Vs)))}async function J4(n,e,t=Ue()){const r=await Dc(n,Wn(VT(e.bundledQuery))),s=ve(n);return s.persistence.runTransaction("Save named query","readwrite",o=>{const u=Gt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(o,e);const h=r.withResumeToken(Ft.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(h.targetId,h),s.Hr.updateTargetData(o,h).next(()=>s.Hr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>s.Hr.addMatchingKeys(o,t,r.targetId)).next(()=>s.Yr.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="firestore_clients";function qS(n,e){return`${iO}_${n}_${e}`}const sO="firestore_mutations";function jS(n,e,t){let r=`${sO}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const aO="firestore_targets";function Ov(n,e){return`${aO}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="SharedClientState";class dg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static bs(e,t,r){const s=JSON.parse(r);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new le(s.error.code,s.error.message))),u?new dg(e,t,s.state,o):(Ht(Ii,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static bs(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new le(r.error.code,r.error.message))),o?new Nd(e,r.state,s):(Ht(Ii,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=RT();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=OD(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return s?new fg(e,o):(Ht(Ii,`Failed to parse client data for instance '${e}': ${t}`),null)}}class HT{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new HT(t.clientId,t.onlineState):(Ht(Ii,`Failed to parse online state: ${e}`),null)}}class EE{constructor(){this.activeTargetIds=RT()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xv{constructor(e,t,r,s,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new _t(Ve),this.started=!1,this.Os=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=qS(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new EE),this.Ls=new RegExp(`^${iO}_${u}_([^_]*)$`),this.ks=new RegExp(`^${sO}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${aO}_${u}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const s=this.getItem(qS(this.persistenceKey,r));if(s){const o=fg.bs(r,s);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const r=this.Us(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ov(this.persistenceKey,e));if(s){const o=Nd.bs(e,s);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ov(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.js(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(Ii,"READ",e,t),t}setItem(e,t){ce(Ii,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(Ii,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ce(Ii,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(o){let u=ir.ae;if(o!=null)try{const h=JSON.parse(o);Se(typeof h=="number"),u=h}catch(h){Ht(Ii,"Failed to read sequence number from WebStorage",h)}return u}(t.newValue);r!==ir.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(s=>this.syncEngine.ao(s)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,r){const s=new dg(this.currentUser,e,t,r),o=jS(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Ss())}js(e){const t=jS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const s=Ov(this.persistenceKey,e),o=new Nd(e,t,r);this.setItem(s,o.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return fg.bs(r,t)}ro(e,t){const r=this.ks.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return dg.bs(new _n(o),s,t)}so(e,t){const r=this.qs.exec(e),s=Number(r[1]);return Nd.bs(s,t)}Us(e){return HT.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ce(Ii,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),s=this.Gs(this.xs),o=this.Gs(r),u=[],h=[];return o.forEach(d=>{s.has(d)||u.push(d)}),s.forEach(d=>{o.has(d)||h.push(d)}),this.syncEngine.lo(u,h).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=RT();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class oO{constructor(){this.ho=new EE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new EE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="ConnectivityMonitor";class GS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ce(HS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ce(HS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em=null;function TE(){return Em===null?Em=function(){return 268435456+Math.round(2147483648*Math.random())}():Em++,"0x"+Em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="RestConnection",tF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===aE?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const u=TE(),h=this.So(e,t.toUriEncodedString());ce(Nv,`Sending RPC '${e}' ${u}:`,h,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,h,d,r).then(m=>(ce(Nv,`Received RPC '${e}' ${u}: `,m),m),m=>{throw Mi(Nv,`RPC '${e}' ${u} failed with error: `,m,"url: ",h,"request:",r),m})}Co(e,t,r,s,o,u){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=tF[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class iF extends nF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=TE();return new Promise((u,h)=>{const d=new yD;d.setWithCredentials(!0),d.listenOnce(vD.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Dm.NO_ERROR:const _=d.getResponseJson();ce(On,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),u(_);break;case Dm.TIMEOUT:ce(On,`RPC '${e}' ${o} timed out`),h(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Dm.HTTP_ERROR:const v=d.getStatus();if(ce(On,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b==null?void 0:b.error;if(I&&I.status&&I.message){const C=function(N){const B=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(B)>=0?B:Z.UNKNOWN}(I.status);h(new le(C,I.message))}else h(new le(Z.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new le(Z.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ce(On,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ce(On,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",m,r,15)})}Wo(e,t,r){const s=TE(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bD(),h=TD(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const _=o.join("");ce(On,`Creating RPC '${e}' stream ${s}: ${_}`,d);const v=u.createWebChannel(_,d);let b=!1,I=!1;const C=new rF({Fo:N=>{I?ce(On,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(b||(ce(On,`Opening RPC '${e}' stream ${s} transport.`),v.open(),b=!0),ce(On,`RPC '${e}' stream ${s} sending:`,N),v.send(N))},Mo:()=>v.close()}),V=(N,B,Y)=>{N.listen(B,H=>{try{Y(H)}catch(se){setTimeout(()=>{throw se},0)}})};return V(v,bd.EventType.OPEN,()=>{I||(ce(On,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),V(v,bd.EventType.CLOSE,()=>{I||(I=!0,ce(On,`RPC '${e}' stream ${s} transport closed`),C.Ko())}),V(v,bd.EventType.ERROR,N=>{I||(I=!0,Mi(On,`RPC '${e}' stream ${s} transport errored:`,N),C.Ko(new le(Z.UNAVAILABLE,"The operation could not be completed")))}),V(v,bd.EventType.MESSAGE,N=>{var B;if(!I){const Y=N.data[0];Se(!!Y);const H=Y,se=(H==null?void 0:H.error)||((B=H[0])===null||B===void 0?void 0:B.error);if(se){ce(On,`RPC '${e}' stream ${s} received error:`,se);const ie=se.status;let X=function(S){const D=Yt[S];if(D!==void 0)return EP(D)}(ie),x=se.message;X===void 0&&(X=Z.INTERNAL,x="Unknown error status: "+ie+" with message "+se.message),I=!0,C.Ko(new le(X,x)),v.close()}else ce(On,`RPC '${e}' stream ${s} received:`,Y),C.Uo(Y)}}),V(h,ED.STAT_EVENT,N=>{N.stat===eE.PROXY?ce(On,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===eE.NOPROXY&&ce(On,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(){return typeof window<"u"?window:null}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n){return new u4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="PersistentStream";class uO{constructor(e,t,r,s,o,u,h,d){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new GT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new le(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ce($S,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ce($S,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sF extends uO{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=d4(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Gt(u.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=mE(this.serializer),t.addTarget=function(o,u){let h;const d=u.target;if(h=ig(d)?{documents:PP(o,d)}:{query:OP(o,d).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=IP(o,u.resumeToken);const m=fE(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(De.min())>0){h.readTime=Cc(o,u.snapshotVersion.toTimestamp());const m=fE(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=p4(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=mE(this.serializer),t.removeTarget=e,this.I_(t)}}class aF extends uO{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=f4(e.writeResults,e.commitTime),r=Gt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=mE(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tf(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{}class lF extends oF{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.bo(e,pE(t,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Z.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,pE(t,r),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(Z.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class uF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ht(t),this.N_=!1):ce("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="RemoteStore";class cF{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{r.enqueueAndForget(async()=>{fo(this)&&(ce(Dl,"Restarting streams for network reachability change."),await async function(d){const m=ve(d);m.W_.add(4),await Kc(m),m.j_.set("Unknown"),m.W_.delete(4),await Of(m)}(this))})}),this.j_=new uF(r,s)}}async function Of(n){if(fo(n))for(const e of n.G_)await e(!0)}async function Kc(n){for(const e of n.G_)await e(!1)}function Bg(n,e){const t=ve(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),QT(t)?KT(t):Wc(t).c_()&&$T(t,e))}function Oc(n,e){const t=ve(n),r=Wc(t);t.U_.delete(e),r.c_()&&cO(t,e),t.U_.size===0&&(r.c_()?r.P_():fo(t)&&t.j_.set("Unknown"))}function $T(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wc(n).y_(e)}function cO(n,e){n.H_.Ne(e),Wc(n).w_(e)}function KT(n){n.H_=new s4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Wc(n).start(),n.j_.B_()}function QT(n){return fo(n)&&!Wc(n).u_()&&n.U_.size>0}function fo(n){return ve(n).W_.size===0}function hO(n){n.H_=void 0}async function hF(n){n.j_.set("Online")}async function dF(n){n.U_.forEach((e,t)=>{$T(n,e)})}async function fF(n,e){hO(n),QT(n)?(n.j_.q_(e),KT(n)):n.j_.set("Unknown")}async function pF(n,e,t){if(n.j_.set("Online"),e instanceof wP&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.U_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.U_.delete(h),s.H_.removeTarget(h))}(n,e)}catch(r){ce(Dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pg(n,r)}else if(e instanceof Lm?n.H_.We(e):e instanceof bP?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await JP(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.U_.get(m);_&&o.U_.set(m,_.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,m)=>{const _=o.U_.get(d);if(!_)return;o.U_.set(d,_.withResumeToken(Ft.EMPTY_BYTE_STRING,_.snapshotVersion)),cO(o,d);const v=new _s(_.target,d,m,_.sequenceNumber);$T(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ce(Dl,"Failed to raise snapshot:",r),await pg(n,r)}}async function pg(n,e,t){if(!co(e))throw e;n.W_.add(1),await Kc(n),n.j_.set("Offline"),t||(t=()=>JP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ce(Dl,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Of(n)})}function dO(n,e){return e().catch(t=>pg(n,t,e))}async function Qc(n){const e=ve(n),t=io(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Ka;for(;mF(e);)try{const s=await X4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,gF(e,s)}catch(s){await pg(e,s)}fO(e)&&pO(e)}function mF(n){return fo(n)&&n.K_.length<10}function gF(n,e){n.K_.push(e);const t=io(n);t.c_()&&t.b_&&t.S_(e.mutations)}function fO(n){return fo(n)&&!io(n).u_()&&n.K_.length>0}function pO(n){io(n).start()}async function _F(n){io(n).C_()}async function yF(n){const e=io(n);for(const t of n.K_)e.S_(t.mutations)}async function vF(n,e,t){const r=n.K_.shift(),s=OT.from(r,e,t);await dO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Qc(n)}async function EF(n,e){e&&io(n).b_&&await async function(r,s){if(function(u){return vP(u)&&u!==Z.ABORTED}(s.code)){const o=r.K_.shift();io(r).h_(),await dO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Qc(r)}}(n,e),fO(n)&&pO(n)}async function KS(n,e){const t=ve(n);t.asyncQueue.verifyOperationInProgress(),ce(Dl,"RemoteStore received new credentials");const r=fo(t);t.W_.add(3),await Kc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Of(t)}async function bE(n,e){const t=ve(n);e?(t.W_.delete(2),await Of(t)):e||(t.W_.add(2),await Kc(t),t.j_.set("Unknown"))}function Wc(n){return n.J_||(n.J_=function(t,r,s){const o=ve(t);return o.M_(),new sF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:hF.bind(null,n),No:dF.bind(null,n),Lo:fF.bind(null,n),p_:pF.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),QT(n)?KT(n):n.j_.set("Unknown")):(await n.J_.stop(),hO(n))})),n.J_}function io(n){return n.Y_||(n.Y_=function(t,r,s){const o=ve(t);return o.M_(),new aF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:_F.bind(null,n),Lo:EF.bind(null,n),D_:yF.bind(null,n),v_:vF.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Qc(n)):(await n.Y_.stop(),n.K_.length>0&&(ce(Dl,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,h=new WT(e,t,u,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yc(n,e){if(Ht("AsyncQueue",`${e}: ${n}`),co(n))return new le(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{static emptySet(e){return new Wu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=wd(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.Z_=new _t(ye.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):be():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class xc{constructor(e,t,r,s,o,u,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new xc(e,t,Wu.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class bF{constructor(){this.queries=WS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ve(t),o=s.queries;s.queries=WS(),o.forEach((u,h)=>{for(const d of h.ta)d.onError(r)})})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function WS(){return new Ms(n=>sP(n),Af)}async function YT(n,e){const t=ve(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new TF,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=Yc(u,`Initialization of query '${ju(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&ZT(t)}async function XT(n,e){const t=ve(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wF(n,e){const t=ve(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(s)&&(r=!0);u.ea=s}}r&&ZT(t)}function IF(n,e,t){const r=ve(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function ZT(n){n.ia.forEach(e=>{e.next()})}var wE,YS;(YS=wE||(wE={}))._a="default",YS.Cache="cache";class JT{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==wE.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.serializer=e}ps(e){return ki(this.serializer,e)}ys(e){return e.metadata.exists?DP(this.serializer,e.document,!1):yt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Gt(e)}}class SF{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mO(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Qe.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new XS(this.serializer);for(const s of e)if(s.metadata.queries){const o=r.ps(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||Ue()).add(o);t.set(u,h)}}return t}async complete(){const e=await Z4(this.localStore,new XS(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await J4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function mO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.key=e}}class _O{constructor(e){this.key=e}}class yO{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=oP(e),this.wa=new Wu(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new QS,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const b=s.get(_),I=Sf(this.query,v)?v:null,C=!!b&&this.mutatedKeys.has(b.key),V=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let N=!1;b&&I?b.data.isEqual(I.data)?C!==V&&(r.track({type:3,doc:I}),N=!0):this.va(b,I)||(r.track({type:2,doc:I}),N=!0,(d&&this.ya(I,d)>0||m&&this.ya(I,m)<0)&&(h=!0)):!b&&I?(r.track({type:0,doc:I}),N=!0):b&&!I&&(r.track({type:1,doc:b}),N=!0,(d||m)&&(h=!0)),N&&(I?(u=u.add(I),o=V?o.add(_):o.delete(_)):(u=u.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{wa:u,Da:r,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((_,v)=>function(I,C){const V=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return V(I)-V(C)}(_.type,v.type)||this.ya(_.doc,v.doc)),this.Ca(r),s=s!=null&&s;const h=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,m=d!==this.ga;return this.ga=d,u.length!==0||m?{snapshot:new xc(this.query,e.wa,o,u,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new QS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new _O(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new gO(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ue();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return xc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const po="SyncEngine";class RF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CF{constructor(e){this.key=e,this.Ba=!1}}class DF{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ms(h=>sP(h),Af),this.qa=new Map,this.Qa=new Set,this.$a=new _t(ye.comparator),this.Ka=new Map,this.Ua=new UT,this.Wa={},this.Ga=new Map,this.za=Cl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function PF(n,e,t=!0){const r=zg(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await vO(r,e,t,!0),s}async function OF(n,e){const t=zg(n);await vO(t,e,!0,!1)}async function vO(n,e,t,r){const s=await Dc(n.localStore,Wn(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await eb(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&Bg(n.remoteStore,s),h}async function eb(n,e,t,r,s){n.Ha=(v,b,I)=>async function(V,N,B,Y){let H=N.view.Sa(B);H.ls&&(H=await hg(V.localStore,N.query,!1).then(({documents:x})=>N.view.Sa(x,H)));const se=Y&&Y.targetChanges.get(N.targetId),ie=Y&&Y.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(H,V.isPrimaryClient,se,ie);return IE(V,N.targetId,X.Ma),X.snapshot}(n,v,b,I);const o=await hg(n.localStore,e,!0),u=new yO(e,o.gs),h=u.Sa(o.documents),d=Df.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,d);IE(n,t,m.Ma);const _=new RF(e,t,u);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function xF(n,e,t){const r=ve(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(u=>!Af(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Oc(r.remoteStore,s.targetId),Nc(r,s.targetId)}).catch(uo)):(Nc(r,s.targetId),await Pc(r.localStore,s.targetId,!0))}async function NF(n,e){const t=ve(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Oc(t.remoteStore,r.targetId))}async function kF(n,e,t){const r=ib(n);try{const s=await function(u,h){const d=ve(u),m=At.now(),_=h.reduce((I,C)=>I.add(C.key),Ue());let v,b;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=ar(),V=Ue();return d.ds.getEntries(I,_).next(N=>{C=N,C.forEach((B,Y)=>{Y.isValidDocument()||(V=V.add(B))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,C)).next(N=>{v=N;const B=[];for(const Y of h){const H=n4(Y,v.get(Y.key).overlayedDocument);H!=null&&B.push(new Ls(Y.key,H,YD(H.value.mapValue),It.exists(!0)))}return d.mutationQueue.addMutationBatch(I,m,B,h)}).next(N=>{b=N;const B=N.applyToLocalDocumentSet(v,V);return d.documentOverlayCache.saveOverlays(I,N.batchId,B)})}).then(()=>({batchId:b.batchId,changes:uP(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let m=u.Wa[u.currentUser.toKey()];m||(m=new _t(Ve)),m=m.insert(h,d),u.Wa[u.currentUser.toKey()]=m}(r,s.batchId,t),await Us(r,s.changes),await Qc(r.remoteStore)}catch(s){const o=Yc(s,"Failed to persist write");t.reject(o)}}async function EO(n,e){const t=ve(n);try{const r=await Y4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const u=t.Ka.get(o);u&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?Se(u.Ba):s.removedDocuments.size>0&&(Se(u.Ba),u.Ba=!1))}),await Us(t,r,e)}catch(r){await uo(r)}}function ZS(n,e,t){const r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=ve(u);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const b of v.ta)b.sa(h)&&(m=!0)}),m&&ZT(d)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VF(n,e,t){const r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let u=new _t(ye.comparator);u=u.insert(o,yt.newNoDocument(o,De.min()));const h=Ue().add(o),d=new Cf(De.min(),new Map,new _t(Ve),u,h);await EO(r,d),r.$a=r.$a.remove(o),r.Ka.delete(e),rb(r)}else await Pc(r.localStore,e,!1).then(()=>Nc(r,e,t)).catch(uo)}async function MF(n,e){const t=ve(n),r=e.batch.batchId;try{const s=await W4(t.localStore,e);nb(t,r,null),tb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Us(t,s)}catch(s){await uo(s)}}async function LF(n,e,t){const r=ve(n);try{const s=await function(u,h){const d=ve(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Se(v!==null),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(r.localStore,e);nb(r,e,t),tb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Us(r,s)}catch(s){await uo(s)}}async function UF(n,e){const t=ve(n);fo(t.remoteStore)||ce(po,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=ve(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>h.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(r===Ka)return void e.resolve();const s=t.Ga.get(r)||[];s.push(e),t.Ga.set(r,s)}catch(r){const s=Yc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function tb(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function nb(n,e,t){const r=ve(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Nc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||TO(n,r)})}function TO(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Oc(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),rb(n))}function IE(n,e,t){for(const r of t)r instanceof gO?(n.Ua.addReference(r.key,e),FF(n,r)):r instanceof _O?(ce(po,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||TO(n,r.key)):be()}function FF(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ce(po,"New document in limbo: "+t),n.Qa.add(r),rb(n))}function rb(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ye(Qe.fromString(e)),r=n.za.next();n.Ka.set(r,new CF(t)),n.$a=n.$a.insert(t,r),Bg(n.remoteStore,new _s(Wn(Hc(t.path)),r,"TargetPurposeLimboResolution",ir.ae))}}async function Us(n,e,t){const r=ve(n),s=[],o=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,d)=>{u.push(r.Ha(d,e,t).then(m=>{var _;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){s.push(m);const v=qT.Yi(d.targetId,m);o.push(v)}}))}),await Promise.all(u),r.La.p_(s),await async function(d,m){const _=ve(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>$.forEach(m,b=>$.forEach(b.Hi,I=>_.persistence.referenceDelegate.addReference(v,b.targetId,I)).next(()=>$.forEach(b.Ji,I=>_.persistence.referenceDelegate.removeReference(v,b.targetId,I)))))}catch(v){if(!co(v))throw v;ce(jT,"Failed to update sequence numbers: "+v)}for(const v of m){const b=v.targetId;if(!v.fromCache){const I=_.Ts.get(b),C=I.snapshotVersion,V=I.withLastLimboFreeSnapshotVersion(C);_.Ts=_.Ts.insert(b,V)}}}(r.localStore,o))}async function BF(n,e){const t=ve(n);if(!t.currentUser.isEqual(e)){ce(po,"User change. New user:",e.toKey());const r=await ZP(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(d=>{d.reject(new le(Z.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Us(t,r.Rs)}}function zF(n,e){const t=ve(n),r=t.Ka.get(e);if(r&&r.Ba)return Ue().add(r.key);{let s=Ue();const o=t.qa.get(e);if(!o)return s;for(const u of o){const h=t.ka.get(u);s=s.unionWith(h.view.ba)}return s}}async function qF(n,e){const t=ve(n),r=await hg(t.localStore,e.query,!0),s=e.view.Oa(r);return t.isPrimaryClient&&IE(t,e.targetId,s.Ma),s}async function jF(n,e){const t=ve(n);return nO(t.localStore,e).then(r=>Us(t,r))}async function HF(n,e,t,r){const s=ve(n),o=await function(h,d){const m=ve(h),_=ve(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",v=>_.Ln(v,d).next(b=>b?m.localDocuments.getDocuments(v,b):$.resolve(null)))}(s.localStore,e);o!==null?(t==="pending"?await Qc(s.remoteStore):t==="acknowledged"||t==="rejected"?(nb(s,e,r||null),tb(s,e),function(h,d){ve(ve(h).mutationQueue).qn(d)}(s.localStore,e)):be(),await Us(s,o)):ce(po,"Cannot apply mutation batch with id: "+e)}async function GF(n,e){const t=ve(n);if(zg(t),ib(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await JS(t,r.toArray());t.ja=!0,await bE(t.remoteStore,!0);for(const o of s)Bg(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){const r=[];let s=Promise.resolve();t.qa.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Nc(t,u),Pc(t.localStore,u,!0))),Oc(t.remoteStore,u)}),await s,await JS(t,r),function(u){const h=ve(u);h.Ka.forEach((d,m)=>{Oc(h.remoteStore,m)}),h.Ua.Dr(),h.Ka=new Map,h.$a=new _t(ye.comparator)}(t),t.ja=!1,await bE(t.remoteStore,!1)}}async function JS(n,e,t){const r=ve(n),s=[],o=[];for(const u of e){let h;const d=r.qa.get(u);if(d&&d.length!==0){h=await Dc(r.localStore,Wn(d[0]));for(const m of d){const _=r.ka.get(m),v=await qF(r,_);v.snapshot&&o.push(v.snapshot)}}else{const m=await tO(r.localStore,u);h=await Dc(r.localStore,m),await eb(r,bO(m),u,!1,h.resumeToken)}s.push(h)}return r.La.p_(o),s}function bO(n){return iP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $F(n){return function(t){return ve(ve(t).persistence).zi()}(ve(n).localStore)}async function KF(n,e,t,r){const s=ve(n);if(s.ja)return void ce(po,"Ignoring unexpected query state notification.");const o=s.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await nO(s.localStore,aP(o[0])),h=Cf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ft.EMPTY_BYTE_STRING);await Us(s,u,h);break}case"rejected":await Pc(s.localStore,e,!0),Nc(s,e,r);break;default:be()}}async function QF(n,e,t){const r=zg(n);if(r.ja){for(const s of e){if(r.qa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ce(po,"Adding an already active target "+s);continue}const o=await tO(r.localStore,s),u=await Dc(r.localStore,o);await eb(r,bO(o),u.targetId,!1,u.resumeToken),Bg(r.remoteStore,u)}for(const s of t)r.qa.has(s)&&await Pc(r.localStore,s,!1).then(()=>{Oc(r.remoteStore,s),Nc(r,s)}).catch(uo)}}function zg(n){const e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VF.bind(null,e),e.La.p_=wF.bind(null,e.eventManager),e.La.Ja=IF.bind(null,e.eventManager),e}function ib(n){const e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LF.bind(null,e),e}function WF(n,e,t){const r=ve(n);(async function(o,u,h){try{const d=await u.getMetadata();if(await function(I,C){const V=ve(I),N=Gt(C.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",B=>V.Yr.getBundleMetadata(B,C.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,d))return await u.close(),h._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(d)),Promise.resolve(new Set);h._updateProgress(mO(d));const m=new SF(d,o.localStore,u.serializer);let _=await u.Ya();for(;_;){const b=await m.Aa(_);b&&h._updateProgress(b),_=await u.Ya()}const v=await m.complete();return await Us(o,v.ma,void 0),await function(I,C){const V=ve(I);return V.persistence.runTransaction("Save bundle","readwrite",N=>V.Yr.saveBundleMetadata(N,C))}(o.localStore,d),h._completeWith(v.progress),Promise.resolve(v.Va)}catch(d){return Mi(po,`Loading bundle failed with ${d}`),h._failWith(d),Promise.resolve(new Set)}})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return XP(this.persistence,new YP,e.initialUser,this.serializer)}Xa(e){return new FT(Fg.ri,this.serializer)}Za(e){return new oO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class YF extends nf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Se(this.persistence.referenceDelegate instanceof cg);const r=this.persistence.referenceDelegate.garbageCollector;return new HP(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new FT(r=>cg.ri(r,t),this.serializer)}}class wO extends nf{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await ib(this.ru.syncEngine),await Qc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return XP(this.persistence,new YP,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new HP(r,e.asyncQueue,t)}nu(e,t){const r=new sU(t,this.persistence);return new iU(e.asyncQueue,r)}Xa(e){const t=zT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new BT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lO(),Um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new oO}}class XF extends wO{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof xv&&(this.sharedClientState.syncEngine={uo:HF.bind(null,t),co:KF.bind(null,t),lo:QF.bind(null,t),zi:$F.bind(null,t),ao:jF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await GF(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=lO();if(!xv.D(t))throw new le(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BF.bind(null,this.syncEngine),await bE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bF}()}createDatastore(e){const t=Pf(e.databaseInfo.databaseId),r=function(o){return new iF(o)}(e.databaseInfo);return function(o,u,h,d){return new lF(o,u,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,u,h){return new cF(r,s,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>ZS(this.syncEngine,t,0),function(){return GS.D()?new GS:new eF}())}createSyncEngine(e,t){return function(s,o,u,h,d,m,_){const v=new DF(s,o,u,h,d,m);return _&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=ve(s);ce(Dl,"RemoteStore shutting down."),o.W_.add(5),await Kc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}rf.provider={build:()=>new rf};function eR(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Sn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const s=await this.lu(r);return new AF(JSON.parse(s),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,o){const u=ve(s),h={documents:o.map(v=>ef(u.serializer,v))},d=await u.Co("BatchGetDocuments",u.serializer.databaseId,Qe.emptyPath(),h,o.length),m=new Map;d.forEach(v=>{const b=h4(u.serializer,v);m.set(b.key.toString(),b)});const _=[];return o.forEach(v=>{const b=m.get(v.toString());Se(!!b),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const s=ye.fromPath(r);this.mutations.push(new DT(s,this.precondition(s)))}),await async function(r,s){const o=ve(r),u={writes:s.map(h=>tf(o.serializer,h))};await o.bo("Commit",o.serializer.databaseId,Qe.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw be();t=De.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(De.min())?It.exists(!1):It.updateTime(t):It.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(De.min()))throw new le(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(t)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,t,r,s,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new GT(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new JF(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Au(s)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!bf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!vP(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class tB{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=ID.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{ce(so,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ce(so,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kv(n,e){n.asyncQueue.verifyOperationInProgress(),ce(so,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ZP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function tR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sb(n);ce(so,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>KS(e.remoteStore,s)),n._onlineComponents=e}async function sb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(so,"Using user provided OfflineComponentProvider");try{await kv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Mi("Error using user provided cache. Falling back to memory cache: "+t),await kv(n,new nf)}}else ce(so,"Using default OfflineComponentProvider"),await kv(n,new YF(void 0));return n._offlineComponents}async function jg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(so,"Using user provided OnlineComponentProvider"),await tR(n,n._uninitializedComponentsProvider._online)):(ce(so,"Using default OnlineComponentProvider"),await tR(n,new rf))),n._onlineComponents}function IO(n){return sb(n).then(e=>e.persistence)}function ab(n){return sb(n).then(e=>e.localStore)}function AO(n){return jg(n).then(e=>e.remoteStore)}function ob(n){return jg(n).then(e=>e.syncEngine)}function nB(n){return jg(n).then(e=>e.datastore)}async function kc(n){const e=await jg(n),t=e.eventManager;return t.onListen=PF.bind(null,e.syncEngine),t.onUnlisten=xF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),t}function rB(n){return n.asyncQueue.enqueue(async()=>{const e=await IO(n),t=await AO(n);return e.setNetworkEnabled(!0),function(s){const o=ve(s);return o.W_.delete(0),Of(o)}(t)})}function iB(n){return n.asyncQueue.enqueue(async()=>{const e=await IO(n),t=await AO(n);return e.setNetworkEnabled(!1),async function(s){const o=ve(s);o.W_.add(0),await Kc(o),o.j_.set("Offline")}(t)})}function sB(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await function(m,_){const v=ve(m);return v.persistence.runTransaction("read document","readonly",b=>v.localDocuments.getDocument(b,_))}(s,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new le(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const d=Yc(h,`Failed to get document '${o} from cache`);u.reject(d)}}(await ab(n),e,t)),t.promise}function SO(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,m){const _=new qg({next:b=>{_.su(),u.enqueueAndForget(()=>XT(o,v));const I=b.docs.has(h);!I&&b.fromCache?m.reject(new le(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&d&&d.source==="server"?m.reject(new le(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new JT(Hc(h.path),_,{includeMetadataChanges:!0,Ta:!0});return YT(o,v)}(await kc(n),n.asyncQueue,e,t,r)),r.promise}function aB(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await hg(s,o,!0),d=new yO(o,h.gs),m=d.Sa(h.documents),_=d.applyChanges(m,!1);u.resolve(_.snapshot)}catch(h){const d=Yc(h,`Failed to execute query '${o} against cache`);u.reject(d)}}(await ab(n),e,t)),t.promise}function RO(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,m){const _=new qg({next:b=>{_.su(),u.enqueueAndForget(()=>XT(o,v)),b.fromCache&&d.source==="server"?m.reject(new le(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new JT(h,_,{includeMetadataChanges:!0,Ta:!0});return YT(o,v)}(await kc(n),n.asyncQueue,e,t,r)),r.promise}function oB(n,e){const t=new qg(e);return n.asyncQueue.enqueueAndForget(async()=>function(s,o){ve(s).ia.add(o),o.next()}(await kc(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(s,o){ve(s).ia.delete(o)}(await kc(n),t))}}function lB(n,e,t,r){const s=function(u,h){let d;return d=typeof u=="string"?TP().encode(u):u,function(_,v){return new ZF(_,v)}(function(_,v){if(_ instanceof Uint8Array)return eR(_,v);if(_ instanceof ArrayBuffer)return eR(new Uint8Array(_),v);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),h)}(t,Pf(e));n.asyncQueue.enqueueAndForget(async()=>{WF(await ob(n),s,r)})}function uB(n,e){return n.asyncQueue.enqueue(async()=>function(r,s){const o=ve(r);return o.persistence.runTransaction("Get named query","readonly",u=>o.Yr.getNamedQuery(u,s))}(await ab(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n,e,t){if(!t)throw new le(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DO(n,e,t,r){if(e===!0&&r===!0)throw new le(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rR(n){if(!ye.isDocumentKey(n))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iR(n){if(ye.isDocumentKey(n))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be()}function at(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hg(n);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PO(n,e){if(e<=0)throw new le(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="firestore.googleapis.com",sR=!0;class aR{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OO,this.ssl=sR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sR;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P4)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QL;switch(r.type){case"firstParty":return new ZL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=nR.get(t);r&&(ce("ComponentProvider","Removing Datastore"),nR.delete(t),r.terminate())}(this),Promise.resolve()}}function cB(n,e,t,r={}){var s;const o=(n=at(n,xf))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==OO&&o.host!==h&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:r});if(!Ya(d,u)&&(n._setSettings(d),r.mockUserToken)){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=_n.MOCK_USER;else{m=ZC(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new _n(v)}n._authCredentials=new WL(new wD(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class xO{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xO(this.firestore,e,this._query)}},Pt=class NO{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new NO(this.firestore,e,this._key)}},Qa=class kO extends Yn{constructor(e,t,r){super(e,t,Hc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ye(e))}withConverter(e){return new kO(this.firestore,e,this._path)}};function VO(n,e,...t){if(n=Re(n),lb("collection","path",e),n instanceof xf){const r=Qe.fromString(e,...t);return iR(r),new Qa(n,null,r)}{if(!(n instanceof Pt||n instanceof Qa))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qe.fromString(e,...t));return iR(r),new Qa(n.firestore,null,r)}}function hB(n,e){if(n=at(n,xf),lb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yn(n,null,function(r){return new Vs(Qe.emptyPath(),r)}(e))}function mg(n,e,...t){if(n=Re(n),arguments.length===1&&(e=ID.newId()),lb("doc","path",e),n instanceof xf){const r=Qe.fromString(e,...t);return rR(r),new Pt(n,null,new ye(r))}{if(!(n instanceof Pt||n instanceof Qa))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qe.fromString(e,...t));return rR(r),new Pt(n.firestore,n instanceof Qa?n.converter:null,new ye(r))}}function MO(n,e){return n=Re(n),e=Re(e),(n instanceof Pt||n instanceof Qa)&&(e instanceof Pt||e instanceof Qa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LO(n,e){return n=Re(n),e=Re(e),n instanceof Yn&&e instanceof Yn&&n.firestore===e.firestore&&Af(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="AsyncQueue";class lR{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new GT(this,"async_queue_retry"),this.bu=()=>{const r=Um();r&&ce(oR,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=Um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Sn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!co(e))throw e;ce(oR,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Ht("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=WT.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&be()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function AE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class dB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=-1;let $t=class extends xf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new lR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lR(e),this._firestoreClient=void 0,await e}}};function Ln(n){if(n._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UO(n),n._firestoreClient}function UO(n){var e,t,r;const s=n._freezeSettings(),o=function(h,d,m,_){return new kU(h,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,CO(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new tB(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}function pB(n,e){Mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return FO(n,rf.provider,{build:r=>new wO(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function mB(n){Mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();FO(n,rf.provider,{build:t=>new XF(t,e.cacheSizeBytes)})}function FO(n,e,t){if((n=at(n,$t))._firestoreClient||n._terminated)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new le(Z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},UO(n)}function gB(n){if(n._initialized&&!n._terminated)throw new le(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ni.D())return Promise.resolve();const s=r+WP;await Ni.delete(s)}(zT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function _B(n){return function(t){const r=new Sn;return t.asyncQueue.enqueueAndForget(async()=>UF(await ob(t),r)),r.promise}(Ln(n=at(n,$t)))}function yB(n){return rB(Ln(n=at(n,$t)))}function vB(n){return iB(Ln(n=at(n,$t)))}function EB(n,e){const t=Ln(n=at(n,$t)),r=new dB;return lB(t,n._databaseId,e,r),r}function TB(n,e){return uB(Ln(n=at(n,$t)),e).then(t=>t?new Yn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ui(Ft.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ui(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=/^__.*__$/;class wB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gc(e,this.data,t,this.fieldTransforms)}}class BO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class $g{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new $g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return gg(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zO(this.Lu)&&bB.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class IB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pf(e)}ju(e,t,r,s=!1){return new $g({Lu:e,methodName:t,zu:r,path:wt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fl(n){const e=n._freezeSettings(),t=Pf(n._databaseId);return new IB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Kg(n,e,t,r,s,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,s);gb("Data must be an object, but it was:",u,r);const h=HO(r,u);let d,m;if(o.merge)d=new sr(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const b=SE(e,v,t);if(!u.contains(b))throw new le(Z.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);$O(_,b)||_.push(b)}d=new sr(_),m=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=u.fieldTransforms;return new wB(new An(h),d,m)}class Nf extends Ul{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nf}}function qO(n,e,t){return new $g({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cb extends Ul{_toFieldTransform(e){return new Rf(e.path,new Sc)}isEqual(e){return e instanceof cb}}class hb extends Ul{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=qO(this,e,!0),r=this.Hu.map(o=>Bl(o,t)),s=new Il(r);return new Rf(e.path,s)}isEqual(e){return e instanceof hb&&Ya(this.Hu,e.Hu)}}class db extends Ul{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=qO(this,e,!0),r=this.Hu.map(o=>Bl(o,t)),s=new Al(r);return new Rf(e.path,s)}isEqual(e){return e instanceof db&&Ya(this.Hu,e.Hu)}}class fb extends Ul{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Rc(e.serializer,dP(e.serializer,this.Ju));return new Rf(e.path,t)}isEqual(e){return e instanceof fb&&this.Ju===e.Ju}}function pb(n,e,t,r){const s=n.ju(1,e,t);gb("Data must be an object, but it was:",s,r);const o=[],u=An.empty();ho(r,(d,m)=>{const _=_b(e,d,t);m=Re(m);const v=s.Ku(_);if(m instanceof Nf)o.push(_);else{const b=Bl(m,v);b!=null&&(o.push(_),u.set(_,b))}});const h=new sr(o);return new BO(u,h,s.fieldTransforms)}function mb(n,e,t,r,s,o){const u=n.ju(1,e,t),h=[SE(e,r,t)],d=[s];if(o.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(SE(e,o[b])),d.push(o[b+1]);const m=[],_=An.empty();for(let b=h.length-1;b>=0;--b)if(!$O(m,h[b])){const I=h[b];let C=d[b];C=Re(C);const V=u.Ku(I);if(C instanceof Nf)m.push(I);else{const N=Bl(C,V);N!=null&&(m.push(I),_.set(I,N))}}const v=new sr(m);return new BO(_,v,u.fieldTransforms)}function jO(n,e,t,r=!1){return Bl(t,n.ju(r?4:3,e))}function Bl(n,e){if(GO(n=Re(n)))return gb("Unsupported field value:",e,n),HO(n,e);if(n instanceof Ul)return function(r,s){if(!zO(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const h of r){let d=Bl(h,s.Uu(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=At.fromDate(r);return{timestampValue:Cc(s.serializer,o)}}if(r instanceof At){const o=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cc(s.serializer,o)}}if(r instanceof Gg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ui)return{bytesValue:IP(s.serializer,r._byteString)};if(r instanceof Pt){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kT(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ub)return function(u,h){return{mapValue:{fields:{[wT]:{stringValue:IT},[wc]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return CT(h.serializer,m)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Hg(r)}`)}(n,e)}function HO(n,e){const t={};return zD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,(r,s)=>{const o=Bl(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function GO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof Gg||n instanceof Ui||n instanceof Pt||n instanceof Ul||n instanceof ub)}function gb(n,e,t){if(!GO(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Hg(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function SE(n,e,t){if((e=Re(e))instanceof ao)return e._internalPath;if(typeof e=="string")return _b(n,e);throw gg("Field path arguments must be of type string or ",n,!1,void 0,t)}const AB=new RegExp("[~\\*/\\[\\]]");function _b(n,e,t){if(e.search(AB)>=0)throw gg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ao(...e.split("."))._internalPath}catch{throw gg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gg(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new le(Z.INVALID_ARGUMENT,h+n+d)}function $O(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SB extends sf{data(){return super.data()}}function Qg(n,e){return typeof e=="string"?_b(n,e):e instanceof ao?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yb{}class kf extends yb{}function Da(n,e,...t){let r=[];e instanceof yb&&r.push(e),r=r.concat(t),function(o){const u=o.filter(d=>d instanceof vb).length,h=o.filter(d=>d instanceof Wg).length;if(u>1||u>0&&h>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Wg extends kf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Wg(e,t,r)}_apply(e){const t=this._parse(e);return WO(e._query,t),new Yn(e.firestore,e.converter,dE(e._query,t))}_parse(e){const t=Fl(e.firestore);return function(o,u,h,d,m,_,v){let b;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){cR(v,_);const C=[];for(const V of v)C.push(uR(d,o,V));b={arrayValue:{values:C}}}else b=uR(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||cR(v,_),b=jO(h,u,v,_==="in"||_==="not-in");return We.create(m,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function RB(n,e,t){const r=e,s=Qg("where",n);return Wg._create(s,r,t)}class vb extends yb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ct.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)WO(u,d),u=dE(u,d)}(e._query,t),new Yn(e.firestore,e.converter,dE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eb extends kf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eb(e,t)}_apply(e){const t=function(s,o,u){if(s.startAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jd(o,u)}(e._query,this._field,this._direction);return new Yn(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Vs(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function CB(n,e="asc"){const t=e,r=Qg("orderBy",n);return Eb._create(r,t)}class Yg extends kf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Yg(e,t,r)}_apply(e){return new Yn(e.firestore,e.converter,ag(e._query,this._limit,this._limitType))}}function DB(n){return PO("limit",n),Yg._create("limit",n,"F")}function PB(n){return PO("limitToLast",n),Yg._create("limitToLast",n,"L")}class Xg extends kf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Xg(e,t,r)}_apply(e){const t=QO(e,this.type,this._docOrFields,this._inclusive);return new Yn(e.firestore,e.converter,function(s,o){return new Vs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)}(e._query,t))}}function OB(...n){return Xg._create("startAt",n,!0)}function xB(...n){return Xg._create("startAfter",n,!1)}class Zg extends kf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Zg(e,t,r)}_apply(e){const t=QO(e,this.type,this._docOrFields,this._inclusive);return new Yn(e.firestore,e.converter,function(s,o){return new Vs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)}(e._query,t))}}function NB(...n){return Zg._create("endBefore",n,!1)}function kB(...n){return Zg._create("endAt",n,!0)}function QO(n,e,t,r){if(t[0]=Re(t[0]),t[0]instanceof sf)return function(o,u,h,d,m){if(!d)throw new le(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const _=[];for(const v of Qu(o))if(v.field.isKeyField())_.push(bl(u,d.key));else{const b=d.data.field(v.field);if(xg(b))throw new le(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const I=v.field.canonicalString();throw new le(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}_.push(b)}return new ro(_,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Fl(n.firestore);return function(u,h,d,m,_,v){const b=u.explicitOrderBy;if(_.length>b.length)throw new le(Z.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let C=0;C<_.length;C++){const V=_[C];if(b[C].field.isKeyField()){if(typeof V!="string")throw new le(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof V}`);if(!ST(u)&&V.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${V}' contains a slash.`);const N=u.path.child(Qe.fromString(V));if(!ye.isDocumentKey(N))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const B=new ye(N);I.push(bl(h,B))}else{const N=jO(d,m,V);I.push(N)}}return new ro(I,v)}(n._query,n.firestore._databaseId,s,e,t,r)}}function uR(n,e,t){if(typeof(t=Re(t))=="string"){if(t==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ST(e)&&t.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bl(n,new ye(r))}if(t instanceof Pt)return bl(n,t._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hg(t)}.`)}function cR(n,e){if(!Array.isArray(n)||n.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WO(n,e){const t=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Tb{convertValue(e,t="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ho(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>bt(u.doubleValue));return new ub(o)}convertGeoPoint(e){return new Gg(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ng(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){const t=Ds(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qe.fromString(e);Se(VP(r));const s=new eo(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return s.isEqual(t)||Ht(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VB extends Tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Os=class extends sf{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},kd=class extends Os{data(e={}){return super.data(e)}},oo=class{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ol(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kd(this._firestore,this._userDataWriter,r.key,r,new ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new kd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ol(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new kd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ol(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:MB(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function MB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}function YO(n,e){return n instanceof Os&&e instanceof Os?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof oo&&e instanceof oo&&n._firestore===e._firestore&&LO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(n){n=at(n,Pt);const e=at(n.firestore,$t);return SO(Ln(e),n._key).then(t=>bb(e,n,t))}class zl extends Tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}function UB(n){n=at(n,Pt);const e=at(n.firestore,$t),t=Ln(e),r=new zl(e);return sB(t,n._key).then(s=>new Os(e,r,n._key,s,new ol(s!==null&&s.hasLocalMutations,!0),n.converter))}function FB(n){n=at(n,Pt);const e=at(n.firestore,$t);return SO(Ln(e),n._key,{source:"server"}).then(t=>bb(e,n,t))}function BB(n){n=at(n,Yn);const e=at(n.firestore,$t),t=Ln(e),r=new zl(e);return KO(n._query),RO(t,n._query).then(s=>new oo(e,r,n,s))}function zB(n){n=at(n,Yn);const e=at(n.firestore,$t),t=Ln(e),r=new zl(e);return aB(t,n._query).then(s=>new oo(e,r,n,s))}function qB(n){n=at(n,Yn);const e=at(n.firestore,$t),t=Ln(e),r=new zl(e);return RO(t,n._query,{source:"server"}).then(s=>new oo(e,r,n,s))}function hR(n,e,t){n=at(n,Pt);const r=at(n.firestore,$t),s=Jg(n.converter,e,t);return Vf(r,[Kg(Fl(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,It.none())])}function dR(n,e,t,...r){n=at(n,Pt);const s=at(n.firestore,$t),o=Fl(s);let u;return u=typeof(e=Re(e))=="string"||e instanceof ao?mb(o,"updateDoc",n._key,e,t,r):pb(o,"updateDoc",n._key,e),Vf(s,[u.toMutation(n._key,It.exists(!0))])}function jB(n){return Vf(at(n.firestore,$t),[new $c(n._key,It.none())])}function HB(n,e){const t=at(n.firestore,$t),r=mg(n),s=Jg(n.converter,e);return Vf(t,[Kg(Fl(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,It.exists(!1))]).then(()=>r)}function XO(n,...e){var t,r,s;n=Re(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||AE(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(AE(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,m,_;if(n instanceof Pt)m=at(n.firestore,$t),_=Hc(n._key.path),d={next:v=>{e[u]&&e[u](bb(m,n,v))},error:e[u+1],complete:e[u+2]};else{const v=at(n,Yn);m=at(v.firestore,$t),_=v._query;const b=new zl(m);d={next:I=>{e[u]&&e[u](new oo(m,b,v,I))},error:e[u+1],complete:e[u+2]},KO(n._query)}return function(b,I,C,V){const N=new qg(V),B=new JT(I,N,C);return b.asyncQueue.enqueueAndForget(async()=>YT(await kc(b),B)),()=>{N.su(),b.asyncQueue.enqueueAndForget(async()=>XT(await kc(b),B))}}(Ln(m),_,h,d)}function GB(n,e){return oB(Ln(n=at(n,$t)),AE(e)?e:{next:e})}function Vf(n,e){return function(r,s){const o=new Sn;return r.asyncQueue.enqueueAndForget(async()=>kF(await ob(r),s,o)),o.promise}(Ln(n),e)}function bb(n,e,t){const r=t.docs.get(e._key),s=new zl(n);return new Os(n,s,e._key,r,new ol(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KB=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fl(e)}set(e,t,r){this._verifyNotCommitted();const s=ja(e,this._firestore),o=Jg(s.converter,t,r),u=Kg(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,It.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=ja(e,this._firestore);let u;return u=typeof(t=Re(t))=="string"||t instanceof ao?mb(this._dataReader,"WriteBatch.update",o._key,t,r,s):pb(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ja(e,this._firestore);return this._mutations=this._mutations.concat(new $c(t._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ja(n,e){if((n=Re(n)).firestore!==e)throw new le(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fl(e)}get(e){const t=ja(e,this._firestore),r=new VB(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||s.length!==1)return be();const o=s[0];if(o.isFoundDocument())return new sf(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new sf(this._firestore,r,t._key,null,t.converter);throw be()})}set(e,t,r){const s=ja(e,this._firestore),o=Jg(s.converter,t,r),u=Kg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const o=ja(e,this._firestore);let u;return u=typeof(t=Re(t))=="string"||t instanceof ao?mb(this._dataReader,"Transaction.update",o._key,t,r,s):pb(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=ja(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WB=class extends QB{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ja(e,this._firestore),r=new zl(this._firestore);return super.get(e).then(s=>new Os(this._firestore,r,t._key,s._document,new ol(!1,!1),t.converter))}};function YB(n,e,t){n=at(n,$t);const r=Object.assign(Object.assign({},$B),t);return function(o){if(o.maxAttempts<1)throw new le(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,h){const d=new Sn;return o.asyncQueue.enqueueAndForget(async()=>{const m=await nB(o);new eB(o.asyncQueue,m,h,u,d).Iu()}),d.promise}(Ln(n),s=>e(new WB(n,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(){return new Nf("deleteField")}function ZB(){return new cb("serverTimestamp")}function JB(...n){return new hb("arrayUnion",n)}function ez(...n){return new db("arrayRemove",n)}function tz(n){return new fb("increment",n)}(function(e,t=!0){(function(s){jc=s})(ks),Cs(new Br("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new $t(new YL(r.getProvider("auth-internal")),new JL(u,r.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(m.options.projectId,_)}(u,s),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),_r(HA,GA,e),_r(HA,GA,"esm2017")})();const nz="@firebase/firestore-compat",rz="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function pR(){if(!xU())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let ZO=class RE{constructor(e){this._delegate=e}static fromBase64String(e){return pR(),new RE(Ui.fromBase64String(e))}static fromUint8Array(e){return fR(),new RE(Ui.fromUint8Array(e))}toBase64(){return pR(),this._delegate.toBase64()}toUint8Array(){return fR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){return iz(n,["next","error","complete"])}function iz(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{enableIndexedDbPersistence(e,t){return pB(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return mB(e._delegate)}clearIndexedDbPersistence(e){return gB(e._delegate)}}class JO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof eo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){cB(this._delegate,e,t,r)}enableNetwork(){return yB(this._delegate)}disableNetwork(){return vB(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _B(this._delegate)}onSnapshotsInSync(e){return GB(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vc(this,VO(this._delegate,e))}catch(t){throw Kn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Lr(this,mg(this._delegate,e))}catch(t){throw Kn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new lf(this,hB(this._delegate,e))}catch(t){throw Kn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return YB(this._delegate,t=>e(new e1(this,t)))}batch(){return Ln(this._delegate),new t1(new KB(this._delegate,e=>Vf(this._delegate,e)))}loadBundle(e){return EB(this._delegate,e)}namedQuery(e){return TB(this._delegate,e).then(t=>t?new lf(this,t):null)}}class e_ extends Tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ZO(new Ui(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Lr.forKey(t,this.firestore,null)}}function az(n){$L(n)}class e1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new e_(e)}get(e){const t=ll(e);return this._delegate.get(t).then(r=>new af(this._firestore,new Os(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ll(e);return r?(wb("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=ll(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=ll(e);return this._delegate.delete(t),this}}class t1{constructor(e){this._delegate=e}set(e,t,r){const s=ll(e);return r?(wb("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=ll(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=ll(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new of(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pl.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let o=s.get(t);return o||(o=new Pl(e,new e_(e),t),s.set(t,o)),o}}Pl.INSTANCES=new WeakMap;class Lr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new e_(e)}static forPath(e,t,r){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Lr(t,new Pt(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Lr(t,new Pt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vc(this.firestore,VO(this._delegate,e))}catch(t){throw Kn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Re(e),e instanceof Pt?MO(this._delegate,e):!1}set(e,t){t=wb("DocumentReference.set",t);try{return t?hR(this._delegate,e,t):hR(this._delegate,e)}catch(r){throw Kn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?dR(this._delegate,e):dR(this._delegate,e,t,...r)}catch(s){throw Kn(s,"updateDoc()","DocumentReference.update()")}}delete(){return jB(this._delegate)}onSnapshot(...e){const t=n1(e),r=r1(e,s=>new af(this.firestore,new Os(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return XO(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=UB(this._delegate):(e==null?void 0:e.source)==="server"?t=FB(this._delegate):t=LB(this._delegate),t.then(r=>new af(this.firestore,new Os(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Lr(this.firestore,e?this._delegate.withConverter(Pl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Kn(n,e,t){return n.message=n.message.replace(e,t),n}function n1(n){for(const e of n)if(typeof e=="object"&&!CE(e))return e;return{}}function r1(n,e){var t,r;let s;return CE(n[0])?s=n[0]:CE(n[1])?s=n[1]:typeof n[0]=="function"?s={next:n[0],error:n[1],complete:n[2]}:s={next:n[1],error:n[2],complete:n[3]},{next:o=>{s.next&&s.next(e(o))},error:(t=s.error)===null||t===void 0?void 0:t.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class af{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Lr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return YO(this._delegate,e._delegate)}}class of extends af{data(e){const t=this._delegate.data(e);return this._delegate._converter||KL(t!==void 0),t}}let lf=class yi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new e_(e)}where(e,t,r){try{return new yi(this.firestore,Da(this._delegate,RB(e,t,r)))}catch(s){throw Kn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new yi(this.firestore,Da(this._delegate,CB(e,t)))}catch(r){throw Kn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yi(this.firestore,Da(this._delegate,DB(e)))}catch(t){throw Kn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new yi(this.firestore,Da(this._delegate,PB(e)))}catch(t){throw Kn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new yi(this.firestore,Da(this._delegate,OB(...e)))}catch(t){throw Kn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new yi(this.firestore,Da(this._delegate,xB(...e)))}catch(t){throw Kn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new yi(this.firestore,Da(this._delegate,NB(...e)))}catch(t){throw Kn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new yi(this.firestore,Da(this._delegate,kB(...e)))}catch(t){throw Kn(t,"endAt()","Query.endAt()")}}isEqual(e){return LO(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=zB(this._delegate):(e==null?void 0:e.source)==="server"?t=qB(this._delegate):t=BB(this._delegate),t.then(r=>new DE(this.firestore,new oo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=n1(e),r=r1(e,s=>new DE(this.firestore,new oo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return XO(this._delegate,t,r)}withConverter(e){return new yi(this.firestore,e?this._delegate.withConverter(Pl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class oz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new of(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DE{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new lf(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new of(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new of(this._firestore,r))})}isEqual(e){return YO(this._delegate,e._delegate)}}class Vc extends lf{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Lr(this.firestore,e):null}doc(e){try{return e===void 0?new Lr(this.firestore,mg(this._delegate)):new Lr(this.firestore,mg(this._delegate,e))}catch(t){throw Kn(t,"doc()","CollectionReference.doc()")}}add(e){return HB(this._delegate,e).then(t=>new Lr(this.firestore,t))}isEqual(e){return MO(this._delegate,e._delegate)}withConverter(e){return new Vc(this.firestore,e?this._delegate.withConverter(Pl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ll(n){return at(n,Pt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(...e){this._delegate=new ao(...e)}static documentId(){return new Ib(wt.keyField().canonicalString())}isEqual(e){return e=Re(e),e instanceof ao?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static serverTimestamp(){const e=ZB();return e._methodName="FieldValue.serverTimestamp",new sl(e)}static delete(){const e=XB();return e._methodName="FieldValue.delete",new sl(e)}static arrayUnion(...e){const t=JB(...e);return t._methodName="FieldValue.arrayUnion",new sl(t)}static arrayRemove(...e){const t=ez(...e);return t._methodName="FieldValue.arrayRemove",new sl(t)}static increment(e){const t=tz(e);return t._methodName="FieldValue.increment",new sl(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz={Firestore:JO,GeoPoint:Gg,Timestamp:At,Blob:ZO,Transaction:e1,WriteBatch:t1,DocumentReference:Lr,DocumentSnapshot:af,Query:lf,QueryDocumentSnapshot:of,QuerySnapshot:DE,CollectionReference:Vc,FieldPath:Ib,FieldValue:sl,setLogLevel:az,CACHE_SIZE_UNLIMITED:fB};function uz(n,e){n.INTERNAL.registerComponent(new Br("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},lz)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(n){uz(n,(e,t)=>new JO(e,t,new sz)),n.registerVersion(nz,rz)}cz(zi);function Ab(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}const gd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Bu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function i1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dz=hz,fz=i1,s1=new Ll("auth","Firebase",i1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=new Rg("@firebase/auth");function pz(n,...e){_g.logLevel<=$e.WARN&&_g.warn(`Auth (${ks}): ${n}`,...e)}function Fm(n,...e){_g.logLevel<=$e.ERROR&&_g.error(`Auth (${ks}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(n,...e){throw Rb(n,...e)}function an(n,...e){return Rb(n,...e)}function Sb(n,e,t){const r=Object.assign(Object.assign({},fz()),{[e]:t});return new Ll("auth","Firebase",r).create(e,{appName:n.name})}function yn(n){return Sb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rn(n,"argument-error"),Sb(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s1.create(n,...e)}function he(n,e,...t){if(!n)throw Rb(e,...t)}function xi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fm(e),new Error(e)}function ei(n,e){n||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Cb(){return mR()==="http:"||mR()==="https:"}function mR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cb()||eD()||"connection"in navigator)?navigator.onLine:!0}function gz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.shortDelay=e,this.longDelay=t,ei(t>e,"Short delay should be less than long delay!"),this.isMobile=p2()||hT()}get(){return mz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n,e){ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=new Mf(3e4,6e4);function Bt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function zt(n,e,t,r,s={}){return o1(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=qc(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:d},o);return g2()||(m.referrerPolicy="no-referrer"),a1.fetch()(l1(n,n.config.apiHost,t,h),m)})}async function o1(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},_z),e);try{const s=new Ez(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Sd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Sd(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Sd(n,"user-disabled",u);const _=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Sb(n,_,m);Rn(n,_)}}catch(s){if(s instanceof Vn)throw s;Rn(n,"network-request-failed",{message:String(s)})}}async function Fs(n,e,t,r,s={}){const o=await zt(n,e,t,r,s);return"mfaPendingCredential"in o&&Rn(n,"multi-factor-auth-required",{_serverResponse:o}),o}function l1(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Db(n.config,s):`${n.config.apiScheme}://${s}`}function vz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ez{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),yz.get())})}}function Sd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=an(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n){return n!==void 0&&n.getResponse!==void 0}function _R(n){return n!==void 0&&n.enterprise!==void 0}class u1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz(n){return(await zt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function c1(n,e){return zt(n,"GET","/v2/recaptchaConfig",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(n,e){return zt(n,"POST","/v1/accounts:delete",e)}async function wz(n,e){return zt(n,"POST","/v1/accounts:update",e)}async function h1(n,e){return zt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iz(n,e=!1){const t=Re(n),r=await t.getIdToken(e),s=t_(r);he(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Vd(Vv(s.auth_time)),issuedAtTime:Vd(Vv(s.iat)),expirationTime:Vd(Vv(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vv(n){return Number(n)*1e3}function t_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fm("JWT malformed, contained fewer than 3 sections"),null;try{const s=lT(t);return s?JSON.parse(s):(Fm("Failed to decode base64 JWT payload"),null)}catch(s){return Fm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yR(n){const e=t_(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vn&&Az(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Az({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await xs(n,h1(t,{idToken:r}));he(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?d1(o.providerUserInfo):[],h=Cz(n.providerData,u),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new PE(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function Rz(n){const e=Re(n);await cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cz(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function d1(n){return n.map(e=>{var{providerId:t}=e,r=Ab(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(n,e){const t=await o1(n,{},async()=>{const r=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=l1(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",a1.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Pz(n,e){return zt(n,"POST","/v2/accounts:revokeToken",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=yR(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await Dz(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new Yu;return r&&(he(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(he(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(he(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yu,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Ab(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new PE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await xs(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Iz(this,e)}reload(){return Rz(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await cf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vt(this.auth.app))return Promise.reject(yn(this.auth));const e=await this.getIdToken();return await xs(this,bz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,u,h,d,m,_;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(s=t.email)!==null&&s!==void 0?s:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,V=(h=t.tenantId)!==null&&h!==void 0?h:void 0,N=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,B=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:H,emailVerified:se,isAnonymous:ie,providerData:X,stsTokenManager:x}=t;he(H&&x,e,"internal-error");const R=Yu.fromJSON(this.name,x);he(typeof H=="string",e,"internal-error"),Pa(v,e.name),Pa(b,e.name),he(typeof se=="boolean",e,"internal-error"),he(typeof ie=="boolean",e,"internal-error"),Pa(I,e.name),Pa(C,e.name),Pa(V,e.name),Pa(N,e.name),Pa(B,e.name),Pa(Y,e.name);const S=new ys({uid:H,auth:e,email:b,emailVerified:se,displayName:v,isAnonymous:ie,photoURL:C,phoneNumber:I,tenantId:V,stsTokenManager:R,createdAt:B,lastLoginAt:Y});return X&&Array.isArray(X)&&(S.providerData=X.map(D=>Object.assign({},D))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,t,r=!1){const s=new Yu;s.updateFromServerResponse(t);const o=new ys({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];he(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?d1(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Yu;h.updateFromIdToken(r);const d=new ys({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new PE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Map;function gr(n){ei(n instanceof Function,"Expected a class definition");let e=vR.get(n);return e?(ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vR.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}f1.type="NONE";const Mc=f1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n,e,t){return`firebase:${n}:${e}:${t}`}class Xu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=vl(this.userKey,s.apiKey,o),this.fullPersistenceKey=vl("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xu(gr(Mc),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||gr(Mc);const u=vl(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){const v=ys._fromJSON(e,_);m!==o&&(h=v),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Xu(o,e,r):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new Xu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y1(e))return"Blackberry";if(v1(e))return"Webos";if(m1(e))return"Safari";if((e.includes("chrome/")||g1(e))&&!e.includes("edge/"))return"Chrome";if(Lf(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p1(n=Ot()){return/firefox\//i.test(n)}function m1(n=Ot()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g1(n=Ot()){return/crios\//i.test(n)}function _1(n=Ot()){return/iemobile/i.test(n)}function Lf(n=Ot()){return/android/i.test(n)}function y1(n=Ot()){return/blackberry/i.test(n)}function v1(n=Ot()){return/webos/i.test(n)}function Uf(n=Ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Oz(n=Ot()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function xz(n=Ot()){var e;return Uf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Nz(){return tD()&&document.documentMode===10}function E1(n=Ot()){return Uf(n)||Lf(n)||v1(n)||y1(n)||/windows phone/i.test(n)||_1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n,e=[]){let t;switch(n){case"Browser":t=ER(Ot());break;case"Worker":t=`${ER(Ot())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ks}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(n,e={}){return zt(n,"GET","/v2/passwordPolicy",Bt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=6;class Lz{constructor(e){var t,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Mz,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TR(this),this.idTokenSubscription=new TR(this),this.beforeStateQueue=new kz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gr(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await h1(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(vt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vt(this.app))return Promise.reject(yn(this));const t=e?Re(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vt(this.app)?Promise.reject(yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vt(this.app)?Promise.reject(yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vz(this),t=new Lz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Pz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gr(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Xu.create(this,[gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&pz(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xt(n){return Re(n)}class TR{constructor(e){this.auth=e,this.observer=null,this.addObserver=rD(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fz(n){Ff=n}function Pb(n){return Ff.loadJS(n)}function Bz(){return Ff.recaptchaV2Script}function zz(){return Ff.recaptchaEnterpriseScript}function qz(){return Ff.gapiScript}function b1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=500,Hz=6e4,Tm=1e12;class Gz{constructor(e){this.auth=e,this.counter=Tm,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Qz(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Tm;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Tm;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Tm;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class $z{constructor(){this.enterprise=new Kz}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Kz{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qz{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;he(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Wz(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Hz)},jz))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Wz(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Yz="recaptcha-enterprise",Md="NO_RECAPTCHA";class w1{constructor(e){this.type=Yz,this.auth=xt(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{c1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new u1(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,u,h){const d=window.grecaptcha;_R(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(Md)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $z().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!t&&_R(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=zz();d.length!==0&&(d+=h),Pb(d).then(()=>{s(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function _d(n,e,t,r=!1,s=!1){const o=new w1(n);let u;if(s)u=Md;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Wa(n,e,t,r,s){var o,u;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await _d(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _d(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(h)});else if(s==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const h=await _d(n,e,t);return r(n,h).catch(async d=>{var m;if(((m=n._getRecaptchaConfig())===null||m===void 0?void 0:m.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await _d(n,e,t,!1,!0);return r(n,_)}return Promise.reject(d)})}else{const h=await _d(n,e,t,!1,!0);return r(n,h)}else return Promise.reject(s+" provider is not supported.")}async function Xz(n){const e=xt(n),t=await c1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new u1(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new w1(e).verify()}function Zz(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(gr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Jz(n,e,t){const r=xt(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),o=I1(e),{host:u,port:h}=eq(e),d=h===null?"":`:${h}`,m={url:`${o}//${u}${d}/`},_=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Ya(m,r.config.emulator)&&Ya(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,s||tq()}function I1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eq(n){const e=I1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:bR(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:bR(u)}}}function bR(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tq(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,t){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(n,e){return zt(n,"POST","/v1/accounts:resetPassword",Bt(n,e))}async function nq(n,e){return zt(n,"POST","/v1/accounts:update",e)}async function rq(n,e){return zt(n,"POST","/v1/accounts:signUp",e)}async function iq(n,e){return zt(n,"POST","/v1/accounts:update",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sq(n,e){return Fs(n,"POST","/v1/accounts:signInWithPassword",Bt(n,e))}async function n_(n,e){return zt(n,"POST","/v1/accounts:sendOobCode",Bt(n,e))}async function aq(n,e){return n_(n,e)}async function oq(n,e){return n_(n,e)}async function lq(n,e){return n_(n,e)}async function uq(n,e){return n_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cq(n,e){return Fs(n,"POST","/v1/accounts:signInWithEmailLink",Bt(n,e))}async function hq(n,e){return Fs(n,"POST","/v1/accounts:signInWithEmailLink",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends Zc{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new hf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new hf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wa(e,t,"signInWithPassword",sq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return cq(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wa(e,r,"signUpPassword",rq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hq(e,{idToken:t,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(n,e){return Fs(n,"POST","/v1/accounts:signInWithIdp",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq="http://localhost";class Fi extends Zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Ab(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Fi(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ws(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ws(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ws(e,t)}buildRequest(){const e={requestUri:dq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return zt(n,"POST","/v1/accounts:sendVerificationCode",Bt(n,e))}async function fq(n,e){return Fs(n,"POST","/v1/accounts:signInWithPhoneNumber",Bt(n,e))}async function pq(n,e){const t=await Fs(n,"POST","/v1/accounts:signInWithPhoneNumber",Bt(n,e));if(t.temporaryProof)throw Sd(n,"account-exists-with-different-credential",t);return t}const mq={USER_NOT_FOUND:"user-not-found"};async function gq(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Fs(n,"POST","/v1/accounts:signInWithPhoneNumber",Bt(n,t),mq)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Zc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new El({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new El({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return fq(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return pq(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return gq(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o}=e;return!r&&!t&&!s&&!o?null:new El({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yq(n){const e=Ku(Td(n)).link,t=e?Ku(Td(e)).deep_link_id:null,r=Ku(Td(n)).deep_link_id;return(r?Ku(Td(r)).link:null)||r||t||e||n}class r_{constructor(e){var t,r,s,o,u,h;const d=Ku(Td(e)),m=(t=d.apiKey)!==null&&t!==void 0?t:null,_=(r=d.oobCode)!==null&&r!==void 0?r:null,v=_q((s=d.mode)!==null&&s!==void 0?s:null);he(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=yq(e);try{return new r_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,t){return hf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=r_.parseLink(t);return he(r,"argument-error"),hf._fromEmailAndCode(e,r.code,r.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zu extends Jc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Fi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Fi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Zu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Zu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:u,providerId:h}=e;if(!r&&!s&&!t&&!o||!h)return null;try{return new Zu(h)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Jc{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Si.credential(t,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Jc{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq="http://localhost";class Lc extends Zc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ws(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ws(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ws(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:o}=t;return!r||!s||!o||r!==s?null:new Lc(r,o)}static _create(e,t){return new Lc(e,t)}buildRequest(){return{requestUri:vq,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq="saml.";class yg extends Bs{constructor(e){he(e.startsWith(Eq),"argument-error"),super(e)}static credentialFromResult(e){return yg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return yg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Lc.fromJSON(e);return he(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Lc._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Jc{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ci.credential(t,r)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(n,e){return Fs(n,"POST","/v1/accounts:signUp",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ys._fromIdTokenResponse(e,r,s),u=IR(r);return new zr({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=IR(r);return new zr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function IR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(n){var e;if(vt(n.app))return Promise.reject(yn(n));const t=xt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new zr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await S1(t,{returnSecureToken:!0}),s=await zr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends Vn{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vg.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new vg(e,t,r,s)}}function R1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vg._fromErrorAndOperation(n,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bq(n,e){const t=Re(n);await i_(!0,t,e);const{providerUserInfo:r}=await wz(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=C1(r||[]);return t.providerData=t.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Ob(n,e,t=!1){const r=await xs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zr._forOperation(n,"link",r)}async function i_(n,e,t){await cf(e);const r=C1(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";he(r.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(n,e,t=!1){const{auth:r}=n;if(vt(r.app))return Promise.reject(yn(r));const s="reauthenticate";try{const o=await xs(n,R1(r,s,e,n),t);he(o.idToken,r,"internal-error");const u=t_(o.idToken);he(u,r,"internal-error");const{sub:h}=u;return he(n.uid===h,r,"user-mismatch"),zr._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(n,e,t=!1){if(vt(n.app))return Promise.reject(yn(n));const r="signIn",s=await R1(n,r,e),o=await zr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function s_(n,e){return P1(xt(n),e)}async function O1(n,e){const t=Re(n);return await i_(!1,t,e.providerId),Ob(t,e)}async function x1(n,e){return D1(Re(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wq(n,e){return Fs(n,"POST","/v1/accounts:signInWithCustomToken",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(n,e){if(vt(n.app))return Promise.reject(yn(n));const t=xt(n),r=await wq(t,{token:e,returnSecureToken:!0}),s=await zr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?xb._fromServerResponse(e,t):"totpInfo"in t?Nb._fromServerResponse(e,t):Rn(e,"internal-error")}}class xb extends Bf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new xb(t)}}class Nb extends Bf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Nb(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(n,e,t){var r;he(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(n){const e=xt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Aq(n,e,t){const r=xt(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&a_(r,s,t),await Wa(r,s,"getOobCode",oq,"EMAIL_PASSWORD_PROVIDER")}async function Sq(n,e,t){await A1(Re(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kb(n),r})}async function Rq(n,e){await iq(Re(n),{oobCode:e})}async function N1(n,e){const t=Re(n),r=await A1(t,{oobCode:e}),s=r.requestType;switch(he(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(r.mfaInfo,t,"internal-error");default:he(r.email,t,"internal-error")}let o=null;return r.mfaInfo&&(o=Bf._fromServerResponse(xt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function Cq(n,e){const{data:t}=await N1(Re(n),e);return t.email}async function Dq(n,e,t){if(vt(n.app))return Promise.reject(yn(n));const r=xt(n),u=await Wa(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S1,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&kb(n),d}),h=await zr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function Pq(n,e,t){return vt(n.app)?Promise.reject(yn(n)):s_(Re(n),mo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kb(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oq(n,e,t){const r=xt(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(u,h){he(h.handleCodeInApp,r,"argument-error"),h&&a_(r,u,h)}o(s,t),await Wa(r,s,"getOobCode",lq,"EMAIL_PASSWORD_PROVIDER")}function xq(n,e){const t=r_.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Nq(n,e,t){if(vt(n.app))return Promise.reject(yn(n));const r=Re(n),s=mo.credentialWithLink(e,t||uf());return he(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),s_(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kq(n,e){return zt(n,"POST","/v1/accounts:createAuthUri",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vq(n,e){const t=Cb()?uf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:s}=await kq(Re(n),r);return s||[]}async function Mq(n,e){const t=Re(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&a_(t.auth,s,e);const{email:o}=await aq(t.auth,s);o!==n.email&&await n.reload()}async function Lq(n,e,t){const r=Re(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&a_(r.auth,o,t);const{email:u}=await uq(r.auth,o);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq(n,e){return zt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fq(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Re(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await xs(r,Uq(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function Bq(n,e){const t=Re(n);return vt(t.auth.app)?Promise.reject(yn(t.auth)):k1(t,e,null)}function zq(n,e){return k1(Re(n),null,e)}async function k1(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const u=await xs(n,nq(r,o));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=t_(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const h=u!=="anonymous"&&u!=="custom"?u:null;return new Ju(o,h)}}if(!r)return null;switch(r){case"facebook.com":return new jq(o,s);case"github.com":return new Hq(o,s);case"google.com":return new Gq(o,s);case"twitter.com":return new $q(o,s,n.screenName||null);case"custom":case"anonymous":return new Ju(o,null);default:return new Ju(o,r,s)}}class Ju{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class V1 extends Ju{constructor(e,t,r,s){super(e,t,r),this.username=s}}class jq extends Ju{constructor(e,t){super(e,"facebook.com",t)}}class Hq extends V1{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class Gq extends Ju{constructor(e,t){super(e,"google.com",t)}}class $q extends V1{constructor(e,t,r){super(e,"twitter.com",t,r)}}function Kq(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:qq(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new ul("enroll",e,t)}static _fromMfaPendingCredential(e){return new ul("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return ul._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ul._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=xt(e),s=t.customData._serverResponse,o=(s.mfaInfo||[]).map(h=>Bf._fromServerResponse(r,h));he(s.mfaPendingCredential,r,"internal-error");const u=ul._fromMfaPendingCredential(s.mfaPendingCredential);return new Vb(u,o,async h=>{const d=await h._process(r,u);delete s.mfaInfo,delete s.mfaPendingCredential;const m=Object.assign(Object.assign({},s),{idToken:d.idToken,refreshToken:d.refreshToken});switch(t.operationType){case"signIn":const _=await zr._fromIdTokenResponse(r,t.operationType,m);return await r._updateCurrentUser(_.user),_;case"reauthenticate":return he(t.user,r,"internal-error"),zr._forOperation(t.user,t.operationType,m);default:Rn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Qq(n,e){var t;const r=Re(n),s=e;return he(e.customData.operationType,r,"argument-error"),he((t=s.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Vb._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n,e){return zt(n,"POST","/v2/accounts/mfaEnrollment:start",Bt(n,e))}function Wq(n,e){return zt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Bt(n,e))}function Yq(n,e){return zt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Bt(n,e))}class Mb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Bf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Mb(e)}async getSession(){return ul._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,s=await this.getSession(),o=await xs(this.user,r._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await xs(this.user,Yq(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Mv=new WeakMap;function Xq(n){const e=Re(n);return Mv.has(e)||Mv.set(e,Mb._fromUser(e)),Mv.get(e)}const Eg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Eg,"1"),this.storage.removeItem(Eg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=1e3,Jq=10;class L1 extends M1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);Nz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Jq):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Zq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}L1.type="LOCAL";const Lb=L1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends M1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}U1.type="SESSION";const Ol=U1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new o_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,o)),d=await e6(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}o_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const m=zf("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return window}function n6(n){Xt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function r6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i6(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function s6(){return Ub()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firebaseLocalStorageDb",a6=1,Tg="firebaseLocalStorage",B1="fbase_key";class qf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function l_(n,e){return n.transaction([Tg],e?"readwrite":"readonly").objectStore(Tg)}function o6(){const n=indexedDB.deleteDatabase(F1);return new qf(n).toPromise()}function OE(){const n=indexedDB.open(F1,a6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Tg,{keyPath:B1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Tg)?e(r):(r.close(),await o6(),e(await OE()))})})}async function SR(n,e,t){const r=l_(n,!0).put({[B1]:e,value:t});return new qf(r).toPromise()}async function l6(n,e){const t=l_(n,!1).get(e),r=await new qf(t).toPromise();return r===void 0?null:r.value}function RR(n,e){const t=l_(n,!0).delete(e);return new qf(t).toPromise()}const u6=800,c6=3;class z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await OE(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>c6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ub()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=o_._getInstance(s6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await r6(),!this.activeServiceWorker)return;this.sender=new t6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await OE();return await SR(e,Eg,"1"),await RR(e,Eg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>SR(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>l6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>RR(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=l_(s,!1).getAll();return new qf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z1.type="LOCAL";const df=z1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n,e){return zt(n,"POST","/v2/accounts/mfaSignIn:start",Bt(n,e))}function h6(n,e){return zt(n,"POST","/v2/accounts/mfaSignIn:finalize",Bt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=b1("rcb"),d6=new Mf(3e4,6e4);class f6{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Xt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return he(p6(t),e,"argument-error"),this.shouldResolveImmediately(t)&&gR(Xt().grecaptcha)?Promise.resolve(Xt().grecaptcha):new Promise((r,s)=>{const o=Xt().setTimeout(()=>{s(an(e,"network-request-failed"))},d6.get());Xt()[Lv]=()=>{Xt().clearTimeout(o),delete Xt()[Lv];const h=Xt().grecaptcha;if(!h||!gR(h)){s(an(e,"internal-error"));return}const d=h.render;h.render=(m,_)=>{const v=d(m,_);return this.counter++,v},this.hostLanguage=t,r(h)};const u=`${Bz()}?${qc({onload:Lv,render:"explicit",hl:t})}`;Pb(u).catch(()=>{clearTimeout(o),s(an(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Xt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function p6(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class m6{async load(e){return new Gz(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="recaptcha",g6={theme:"light",type:"image"};let _6=class{constructor(e,t,r=Object.assign({},g6)){this.parameters=r,this.type=Ld,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xt(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;he(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new m6:new f6,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(s=>{const o=u=>{u&&(this.tokenChangeListeners.delete(o),s(u))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Xt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(Cb()&&!Ub(),this.auth,"internal-error"),await y6(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Tz(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function y6(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=El._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function v6(n,e,t){if(vt(n.app))return Promise.reject(yn(n));const r=xt(n),s=await u_(r,e,Re(t));return new Fb(s,o=>s_(r,o))}async function E6(n,e,t){const r=Re(n);await i_(!1,r,"phone");const s=await u_(r.auth,e,Re(t));return new Fb(s,o=>O1(r,o))}async function T6(n,e,t){const r=Re(n);if(vt(r.auth.app))return Promise.reject(yn(r.auth));const s=await u_(r.auth,e,Re(t));return new Fb(s,o=>x1(r,o))}async function u_(n,e,t){var r;if(!n._getRecaptchaConfig())try{await Xz(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){he(o.type==="enroll",n,"internal-error");const u={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Wa(n,u,"mfaSmsEnrollment",async(_,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Md){he((t==null?void 0:t.type)===Ld,_,"argument-error");const b=await Uv(_,v,t);return AR(_,b)}return AR(_,v)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{he(o.type==="signin",n,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;he(u,n,"missing-multi-factor-info");const h={mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Wa(n,h,"mfaSmsSignIn",async(v,b)=>{if(b.phoneSignInInfo.captchaResponse===Md){he((t==null?void 0:t.type)===Ld,v,"argument-error");const I=await Uv(v,b,t);return CR(v,I)}return CR(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Wa(n,o,"sendVerificationCode",async(m,_)=>{if(_.captchaResponse===Md){he((t==null?void 0:t.type)===Ld,m,"argument-error");const v=await Uv(m,_,t);return wR(m,v)}return wR(m,_)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t==null||t._reset()}}async function b6(n,e){const t=Re(n);if(vt(t.auth.app))return Promise.reject(yn(t.auth));await Ob(t,e)}async function Uv(n,e,t){he(t.type===Ld,n,"argument-error");const r=await t.verify();he(typeof r=="string",n,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,u=s.phoneEnrollmentInfo.captchaResponse,h=s.phoneEnrollmentInfo.clientType,d=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:d}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,u=s.phoneSignInInfo.clientType,h=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:u,recaptchaVersion:h}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=class Bm{constructor(e){this.providerId=Bm.PROVIDER_ID,this.auth=xt(e)}verifyPhoneNumber(e,t){return u_(this.auth,e,Re(t))}static credential(e,t){return El._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Bm.credentialFromTaggedObject(t)}static credentialFromError(e){return Bm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?El._fromTokenResponse(t,r):null}};xl.PROVIDER_ID="phone";xl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n,e){return e?gr(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ws(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function w6(n){return P1(n.auth,new Bb(n),n.bypassAuthState)}function I6(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),D1(t,new Bb(n),n.bypassAuthState)}async function A6(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),Ob(t,new Bb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w6;case"linkViaPopup":case"linkViaRedirect":return A6;case"reauthViaPopup":case"reauthViaRedirect":return I6;default:Rn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=new Mf(2e3,1e4);async function R6(n,e,t){if(vt(n.app))return Promise.reject(an(n,"operation-not-supported-in-this-environment"));const r=xt(n);Xc(n,e,Bs);const s=ql(r,t);return new vs(r,"signInViaPopup",e,s).executeNotNull()}async function C6(n,e,t){const r=Re(n);if(vt(r.auth.app))return Promise.reject(an(r.auth,"operation-not-supported-in-this-environment"));Xc(r.auth,e,Bs);const s=ql(r.auth,t);return new vs(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function D6(n,e,t){const r=Re(n);Xc(r.auth,e,Bs);const s=ql(r.auth,t);return new vs(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class vs extends q1{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,vs.currentPopupAction&&vs.currentPopupAction.cancel(),vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S6.get())};e()}}vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="pendingRedirect",Ud=new Map;class O6 extends q1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ud.get(this.auth._key());if(!e){try{const r=await x6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x6(n,e){const t=H1(e),r=j1(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function zb(n,e){return j1(n)._set(H1(e),"true")}function N6(){Ud.clear()}function qb(n,e){Ud.set(n._key(),e)}function j1(n){return gr(n._redirectPersistence)}function H1(n){return vl(P6,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(n,e,t){return V6(n,e,t)}async function V6(n,e,t){if(vt(n.app))return Promise.reject(yn(n));const r=xt(n);Xc(n,e,Bs),await r._initializationPromise;const s=ql(r,t);return await zb(s,r),s._openRedirect(r,e,"signInViaRedirect")}function M6(n,e,t){return L6(n,e,t)}async function L6(n,e,t){const r=Re(n);if(Xc(r.auth,e,Bs),vt(r.auth.app))return Promise.reject(yn(r.auth));await r.auth._initializationPromise;const s=ql(r.auth,t);await zb(s,r.auth);const o=await G1(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function U6(n,e,t){return F6(n,e,t)}async function F6(n,e,t){const r=Re(n);Xc(r.auth,e,Bs),await r.auth._initializationPromise;const s=ql(r.auth,t);await i_(!1,r,e.providerId),await zb(s,r.auth);const o=await G1(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function B6(n,e){return await xt(n)._initializationPromise,c_(n,e,!1)}async function c_(n,e,t=!1){if(vt(n.app))return Promise.reject(yn(n));const r=xt(n),s=ql(r,e),u=await new O6(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function G1(n){const e=zf(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=10*60*1e3;class $1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!K1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(an(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z6&&this.cachedEventUids.clear(),this.cachedEventUids.has(DR(e))}saveEventToCache(e){this.cachedEventUids.add(DR(e)),this.lastProcessedEventTime=Date.now()}}function DR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function K1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function q6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(n,e={}){return zt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H6=/^https?/;async function G6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q1(n);for(const t of e)try{if($6(t))return}catch{}Rn(n,"unauthorized-domain")}function $6(n){const e=uf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!H6.test(t))return!1;if(j6.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=new Mf(3e4,6e4);function PR(){const n=Xt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q6(n){return new Promise((e,t)=>{var r,s,o;function u(){PR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PR(),t(an(n,"network-request-failed"))},timeout:K6.get()})}if(!((s=(r=Xt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Xt().gapi)===null||o===void 0)&&o.load)u();else{const h=b1("iframefcb");return Xt()[h]=()=>{gapi.load?u():t(an(n,"network-request-failed"))},Pb(`${qz()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw zm=null,e})}let zm=null;function W6(n){return zm=zm||Q6(n),zm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=new Mf(5e3,15e3),X6="__/auth/iframe",Z6="emulator/auth/iframe",J6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t9(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Db(e,Z6):`https://${n.config.authDomain}/${X6}`,r={apiKey:e.apiKey,appName:n.name,v:ks},s=e9.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${qc(r).slice(1)}`}async function n9(n){const e=await W6(n),t=Xt().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:t9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J6,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=an(n,"network-request-failed"),h=Xt().setTimeout(()=>{o(u)},Y6.get());function d(){Xt().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i9=500,s9=600,a9="_blank",o9="http://localhost";class OR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l9(n,e,t,r=i9,s=s9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},r9),{width:r.toString(),height:s.toString(),top:o,left:u}),m=Ot().toLowerCase();t&&(h=g1(m)?a9:t),p1(m)&&(e=e||o9,d.scrollbars="yes");const _=Object.entries(d).reduce((b,[I,C])=>`${b}${I}=${C},`,"");if(xz(m)&&h!=="_self")return u9(e||"",h),new OR(null);const v=window.open(e||"",h,_);he(v,n,"popup-blocked");try{v.focus()}catch{}return new OR(v)}function u9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9="__/auth/handler",h9="emulator/auth/handler",d9=encodeURIComponent("fac");async function xE(n,e,t,r,s,o){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ks,eventId:s};if(e instanceof Bs){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",T2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries(o||{}))u[_]=v}if(e instanceof Jc){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${d9}=${encodeURIComponent(d)}`:"";return`${f9(n)}?${qc(h).slice(1)}${m}`}function f9({config:n}){return n.emulator?Db(n,h9):`https://${n.authDomain}/${c9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="webStorageSupport";class p9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ol,this._completeRedirectFn=c_,this._overrideRedirectResult=qb}async _openPopup(e,t,r,s){var o;ei((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await xE(e,t,r,uf(),s);return l9(e,u,zf())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await xE(e,t,r,uf(),s);return n6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ei(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await n9(e),r=new $1(e);return t.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fv,{type:Fv},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Fv];u!==void 0&&t(!!u),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return E1()||m1()||Uf()}}const m9=p9;class g9{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return xi("unexpected MultiFactorSessionType")}}}class jb extends g9{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new jb(e)}_finalizeEnroll(e,t,r){return Wq(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return h6(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class W1{constructor(){}static assertion(e){return jb._fromCredential(e)}}W1.FACTOR_ID="phone";var xR="@firebase/auth",NR="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v9(n){Cs(new Br("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T1(n)},m=new Uz(r,s,o,d);return Zz(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cs(new Br("auth-internal",e=>{const t=xt(e.getProvider("auth").getImmediate());return(r=>new _9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(xR,NR,y9(n)),_r(xR,NR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=5*60;d2("authIdTokenMaxAge");function T9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Fz({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=an("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",T9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v9("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=2e3;async function w9(n,e,t){var r;const{BuildInfo:s}=Nl();ei(e.sessionId,"AuthEvent did not contain a session ID");const o=await C9(e.sessionId),u={};return Uf()?u.ibi=s.packageName:Lf()?u.apn=s.packageName:Rn(n,"operation-not-supported-in-this-environment"),s.displayName&&(u.appDisplayName=s.displayName),u.sessionId=o,xE(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function I9(n){const{BuildInfo:e}=Nl(),t={};Uf()?t.iosBundleId=e.packageName:Lf()?t.androidPackageName=e.packageName:Rn(n,"operation-not-supported-in-this-environment"),await Q1(n,t)}function A9(n){const{cordova:e}=Nl();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,Oz()?"_blank":"_system","location=yes"),t(s)})})}async function S9(n,e,t){const{cordova:r}=Nl();let s=()=>{};try{await new Promise((o,u)=>{let h=null;function d(){var v;o();const b=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof b=="function"&&b(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function m(){h||(h=window.setTimeout(()=>{u(an(n,"redirect-cancelled-by-user"))},b9))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&m()}e.addPassiveListener(d),document.addEventListener("resume",m,!1),Lf()&&document.addEventListener("visibilitychange",_,!1),s=()=>{e.removePassiveListener(d),document.removeEventListener("resume",m,!1),document.removeEventListener("visibilitychange",_,!1),h&&window.clearTimeout(h)}})}finally{s()}}function R9(n){var e,t,r,s,o,u,h,d,m,_;const v=Nl();he(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he(typeof((o=(s=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((d=(h=(u=v==null?void 0:v.cordova)===null||u===void 0?void 0:u.plugins)===null||h===void 0?void 0:h.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((_=(m=v==null?void 0:v.cordova)===null||m===void 0?void 0:m.InAppBrowser)===null||_===void 0?void 0:_.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function C9(n){const e=D9(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function D9(n){if(ei(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=20;class O9 extends $1{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function x9(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:V9(),postBody:null,tenantId:n.tenantId,error:an(n,"no-auth-event")}}function N9(n,e){return NE()._set(kE(n),e)}async function kR(n){const e=await NE()._get(kE(n));return e&&await NE()._remove(kE(n)),e}function k9(n,e){var t,r;const s=L9(e);if(s.includes("/__/auth/callback")){const o=qm(s),u=o.firebaseError?M9(decodeURIComponent(o.firebaseError)):null,h=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],d=h?an(h):null;return d?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:s,postBody:null}}return null}function V9(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<P9;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function NE(){return gr(Lb)}function kE(n){return vl("authEvent",n.config.apiKey,n.name)}function M9(n){try{return JSON.parse(n)}catch{return null}}function L9(n){const e=qm(n),t=e.link?decodeURIComponent(e.link):void 0,r=qm(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qm(s).link||s||r||t||n}function qm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Ku(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=500;class F9{constructor(){this._redirectPersistence=Ol,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=c_,this._overrideRedirectResult=qb}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new O9(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Rn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,s){R9(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),N6(),await this._originValidation(e);const u=x9(e,r,s);await N9(e,u);const h=await w9(e,u,t),d=await A9(h);return S9(e,o,d)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I9(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:s,BuildInfo:o}=Nl(),u=setTimeout(async()=>{await kR(e),t.onEvent(VR())},U9),h=async _=>{clearTimeout(u);const v=await kR(e);let b=null;v&&(_!=null&&_.url)&&(b=k9(v,_.url)),t.onEvent(b||VR())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const d=s,m=`${o.packageName.toLowerCase()}://`;Nl().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(m)&&h({url:_}),typeof d=="function")try{d(_)}catch(v){console.error(v)}}}}const B9=F9;function VR(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:an("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n,e){xt(n)._logFramework(e)}var q9="@firebase/auth-compat",j9="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=1e3;function Fd(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function G9(){return Fd()==="http:"||Fd()==="https:"}function Y1(n=Ot()){return!!((Fd()==="file:"||Fd()==="ionic:"||Fd()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function $9(){return hT()||cT()}function K9(){return tD()&&(document==null?void 0:document.documentMode)===11}function Q9(n=Ot()){return/Edge\/\d+/.test(n)}function W9(n=Ot()){return K9()||Q9(n)}function X1(){try{const n=self.localStorage,e=zf();if(n)return n.setItem(e,"1"),n.removeItem(e),W9()?qd():!0}catch{return Hb()&&qd()}return!1}function Hb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bv(){return(G9()||eD()||Y1())&&!$9()&&X1()&&!Hb()}function Z1(){return Y1()&&typeof document<"u"}async function Y9(){return Z1()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},H9);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function X9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={LOCAL:"local",NONE:"none",SESSION:"session"},yd=he,J1="persistence";function Z9(n,e){if(yd(Object.values(mr).includes(e),n,"invalid-persistence-type"),hT()){yd(e!==mr.SESSION,n,"unsupported-persistence-type");return}if(cT()){yd(e===mr.NONE,n,"unsupported-persistence-type");return}if(Hb()){yd(e===mr.NONE||e===mr.LOCAL&&qd(),n,"unsupported-persistence-type");return}yd(e===mr.NONE||X1(),n,"unsupported-persistence-type")}async function VE(n){await n._initializationPromise;const e=ex(),t=vl(J1,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function J9(n,e){const t=ex();if(!t)return[];const r=vl(J1,n,e);switch(t.getItem(r)){case mr.NONE:return[Mc];case mr.LOCAL:return[df,Ol];case mr.SESSION:return[Ol];default:return[]}}function ex(){var n;try{return((n=X9())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=he;class Ha{constructor(){this.browserResolver=gr(m9),this.cordovaResolver=gr(B9),this.underlyingResolver=null,this._redirectPersistence=Ol,this._completeRedirectFn=c_,this._overrideRedirectResult=qb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,s)}async _openRedirect(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Z1()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ej(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Y9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(n){return n.unwrap()}function tj(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n){return nx(n)}function rj(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new ij(n,Qq(n,e))}else if(r){const s=nx(e),o=e;s&&(o.credential=s,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function nx(n){const{_tokenResponse:e}=n instanceof Vn?n.customData:n;if(!e)return null;if(!(n instanceof Vn)&&"temporaryProof"in e&&"phoneNumber"in e)return xl.credentialFromResult(n);const t=e.providerId;if(!t||t===gd.PASSWORD)return null;let r;switch(t){case gd.GOOGLE:r=Si;break;case gd.FACEBOOK:r=Ai;break;case gd.GITHUB:r=Ri;break;case gd.TWITTER:r=Ci;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:u,pendingToken:h,nonce:d}=e;return!o&&!u&&!s&&!h?null:h?t.startsWith("saml.")?Lc._create(t,h):Fi._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:s,accessToken:o}):new Zu(t).credential({idToken:s,accessToken:o,rawNonce:d})}return n instanceof Vn?r.credentialFromError(n):r.credentialFromResult(n)}function rr(n,e){return e.catch(t=>{throw t instanceof Vn&&rj(n,t),t}).then(t=>{const r=t.operationType,s=t.user;return{operationType:r,credential:nj(t),additionalUserInfo:Kq(t),user:Es.getOrCreate(s)}})}async function ME(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>rr(n,t.confirm(r))}}class ij{constructor(e,t){this.resolver=t,this.auth=tj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rr(tx(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._delegate=e,this.multiFactor=Xq(e)}static getOrCreate(e){return Es.USER_MAP.has(e)||Es.USER_MAP.set(e,new Es(e)),Es.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rr(this.auth,O1(this._delegate,e))}async linkWithPhoneNumber(e,t){return ME(this.auth,E6(this._delegate,e,t))}async linkWithPopup(e){return rr(this.auth,D6(this._delegate,e,Ha))}async linkWithRedirect(e){return await VE(xt(this.auth)),U6(this._delegate,e,Ha)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rr(this.auth,x1(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ME(this.auth,T6(this._delegate,e,t))}reauthenticateWithPopup(e){return rr(this.auth,C6(this._delegate,e,Ha))}async reauthenticateWithRedirect(e){return await VE(xt(this.auth)),M6(this._delegate,e,Ha)}sendEmailVerification(e){return Mq(this._delegate,e)}async unlink(e){return await bq(this._delegate,e),this}updateEmail(e){return Bq(this._delegate,e)}updatePassword(e){return zq(this._delegate,e)}updatePhoneNumber(e){return b6(this._delegate,e)}updateProfile(e){return Fq(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Lq(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Es.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=he;class LE{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;vd(r,"invalid-api-key",{appName:e.name}),vd(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?Ha:void 0;this._delegate=t.initialize({options:{persistence:sj(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(dz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Jz(this._delegate,e,t)}applyActionCode(e){return Rq(this._delegate,e)}checkActionCode(e){return N1(this._delegate,e)}confirmPasswordReset(e,t){return Sq(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return rr(this._delegate,Dq(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Vq(this._delegate,e)}isSignInWithEmailLink(e){return xq(this._delegate,e)}async getRedirectResult(){vd(Bv(),this._delegate,"operation-not-supported-in-this-environment");const e=await B6(this._delegate,Ha);return e?rr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){z9(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:s,error:o,complete:u}=MR(e,t,r);return this._delegate.onAuthStateChanged(s,o,u)}onIdTokenChanged(e,t,r){const{next:s,error:o,complete:u}=MR(e,t,r);return this._delegate.onIdTokenChanged(s,o,u)}sendSignInLinkToEmail(e,t){return Oq(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Aq(this._delegate,e,t||void 0)}async setPersistence(e){Z9(this._delegate,e);let t;switch(e){case mr.SESSION:t=Ol;break;case mr.LOCAL:t=await gr(df)._isAvailable()?df:Lb;break;case mr.NONE:t=Mc;break;default:return Rn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rr(this._delegate,Tq(this._delegate))}signInWithCredential(e){return rr(this._delegate,s_(this._delegate,e))}signInWithCustomToken(e){return rr(this._delegate,Iq(this._delegate,e))}signInWithEmailAndPassword(e,t){return rr(this._delegate,Pq(this._delegate,e,t))}signInWithEmailLink(e,t){return rr(this._delegate,Nq(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ME(this._delegate,v6(this._delegate,e,t))}async signInWithPopup(e){return vd(Bv(),this._delegate,"operation-not-supported-in-this-environment"),rr(this._delegate,R6(this._delegate,e,Ha))}async signInWithRedirect(e){return vd(Bv(),this._delegate,"operation-not-supported-in-this-environment"),await VE(this._delegate),k6(this._delegate,e,Ha)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Cq(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}LE.Persistence=mr;function MR(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const s=r;return{next:u=>s(u&&Es.getOrCreate(u)),error:e,complete:t}}function sj(n,e){const t=J9(n,e);if(typeof self<"u"&&!t.includes(df)&&t.push(df),typeof window<"u")for(const r of[Lb,Ol])t.includes(r)||t.push(r);return t.includes(Mc)||t.push(Mc),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{static credential(e,t){return xl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new xl(tx(zi.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Gb.PHONE_SIGN_IN_METHOD=xl.PHONE_SIGN_IN_METHOD;Gb.PROVIDER_ID=xl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=he;class oj{constructor(e,t,r=zi.app()){var s;aj((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new _6(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="auth-compat";function uj(n){n.INTERNAL.registerComponent(new Br(lj,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new LE(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bu.EMAIL_SIGNIN,PASSWORD_RESET:Bu.PASSWORD_RESET,RECOVER_EMAIL:Bu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Bu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Bu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Bu.VERIFY_EMAIL}},EmailAuthProvider:mo,FacebookAuthProvider:Ai,GithubAuthProvider:Ri,GoogleAuthProvider:Si,OAuthProvider:Zu,SAMLAuthProvider:yg,PhoneAuthProvider:Gb,PhoneMultiFactorGenerator:W1,RecaptchaVerifier:oj,TwitterAuthProvider:Ci,Auth:LE,AuthCredential:Zc,Error:Vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(q9,j9)}uj(zi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firebasestorage.googleapis.com",ix="storageBucket",cj=2*60*1e3,hj=10*60*1e3,dj=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends Vn{constructor(e,t,r=0){super(zv(e),`Firebase Storage: ${t} (${zv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function zv(n){return"storage/"+n}function $b(){const n="An unknown error occurred, please check the error payload for server response.";return new Nt(Et.UNKNOWN,n)}function fj(n){return new Nt(Et.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function pj(n){return new Nt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mj(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(Et.UNAUTHENTICATED,n)}function gj(){return new Nt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _j(n){return new Nt(Et.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function sx(){return new Nt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ax(){return new Nt(Et.CANCELED,"User canceled the upload/download.")}function yj(n){return new Nt(Et.INVALID_URL,"Invalid URL '"+n+"'.")}function vj(n){return new Nt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Ej(){return new Nt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ix+"' property when initializing the app?")}function ox(){return new Nt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tj(){return new Nt(Et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function bj(){return new Nt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wj(n){return new Nt(Et.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ec(n){return new Nt(Et.INVALID_ARGUMENT,n)}function lx(){return new Nt(Et.APP_DELETED,"The Firebase app was deleted.")}function ux(n){return new Nt(Et.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bd(n,e){return new Nt(Et.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ed(n){throw new Nt(Et.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=kn.makeFromUrl(e,t)}catch{return new kn(e,"")}if(r.path==="")return r;throw vj(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+s+u,"i"),d={bucket:1,path:3};function m(se){se.path_=decodeURIComponent(se.path)}const _="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${_}/b/${s}/o${b}`,"i"),C={bucket:1,path:3},V=t===rx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",B=new RegExp(`^https?://${V}/${s}/${N}`,"i"),H=[{regex:h,indices:d,postModify:o},{regex:I,indices:C,postModify:m},{regex:B,indices:{bucket:1,path:2},postModify:m}];for(let se=0;se<H.length;se++){const ie=H[se],X=ie.regex.exec(e);if(X){const x=X[ie.indices.bucket];let R=X[ie.indices.path];R||(R=""),r=new kn(x,R),ie.postModify(r);break}}if(r==null)throw yj(e);return r}}class Ij{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(n,e,t){let r=1,s=null,o=null,u=!1,h=0;function d(){return h===2}let m=!1;function _(...N){m||(m=!0,e.apply(null,N))}function v(N){s=setTimeout(()=>{s=null,n(I,d())},N)}function b(){o&&clearTimeout(o)}function I(N,...B){if(m){b();return}if(N){b(),_.call(null,N,...B);return}if(d()||u){b(),_.call(null,N,...B);return}r<64&&(r*=2);let H;h===1?(h=2,H=0):H=(r+Math.random())*1e3,v(H)}let C=!1;function V(N){C||(C=!0,b(),!m&&(s!==null?(N||(h=2),clearTimeout(s),v(0)):N||(h=1)))}return v(0),o=setTimeout(()=>{u=!0,V(!0)},t),V}function Sj(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(n){return n!==void 0}function Cj(n){return typeof n=="function"}function Dj(n){return typeof n=="object"&&!Array.isArray(n)}function h_(n){return typeof n=="string"||n instanceof String}function LR(n){return Kb()&&n instanceof Blob}function Kb(){return typeof Blob<"u"}function UE(n,e,t,r){if(r<e)throw ec(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ec(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function cx(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Tl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Tl||(Tl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,t,r,s,o,u,h,d,m,_,v,b=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=v,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,C)=>{this.resolve_=I,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new bm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===Tl.NO_ERROR,d=o.getStatus();if(!h||hx(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Tl.ABORT;r(!1,new bm(!1,null,_));return}const m=this.successCodes_.indexOf(d)!==-1;r(!0,new bm(m,o))})},t=(r,s)=>{const o=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());Rj(d)?o(d):o()}catch(d){u(d)}else if(h!==null){const d=$b();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(s.canceled){const d=this.appDelete_?lx():ax();u(d)}else{const d=sx();u(d)}};this.canceled_?t(!1,new bm(!1,null,!0)):this.backoffId_=Aj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Oj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function xj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Vj(n,e,t,r,s,o,u=!0){const h=cx(n.urlParams),d=n.url+h,m=Object.assign({},n.headers);return Nj(m,e),Oj(m,t),xj(m,o),kj(m,r),new Pj(d,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Lj(...n){const e=Mj();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Kb())return new Blob(n);throw new Nt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Uj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(n){if(typeof atob>"u")throw wj("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qv{constructor(e,t){this.data=e,this.contentType=t||null}}function dx(n,e){switch(n){case Ur.RAW:return new qv(fx(e));case Ur.BASE64:case Ur.BASE64URL:return new qv(px(n,e));case Ur.DATA_URL:return new qv(zj(e),qj(e))}throw $b()}function fx(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=n.charCodeAt(++t);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Bj(n){let e;try{e=decodeURIComponent(n)}catch{throw Bd(Ur.DATA_URL,"Malformed data URL.")}return fx(e)}function px(n,e){switch(n){case Ur.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Bd(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Bd(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Fj(e)}catch(s){throw s.message.includes("polyfill")?s:Bd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class mx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Bd(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=jj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zj(n){const e=new mx(n);return e.base64?px(Ur.BASE64,e.rest):Bj(e.rest)}function qj(n){return new mx(n).contentType}function jj(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){let r=0,s="";LR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(LR(this.data_)){const r=this.data_,s=Uj(r,e,t);return s===null?null:new Di(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Di(r,!0)}}static getBlob(...e){if(Kb()){const t=e.map(r=>r instanceof Di?r.data_:r);return new Di(Lj.apply(null,t))}else{const t=e.map(u=>h_(u)?dx(Ur.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)s[o++]=u[h]}),new Di(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){let e;try{e=JSON.parse(n)}catch{return null}return Dj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Gj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function gx(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(n,e){return e}class Hn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||$j}}let wm=null;function Kj(n){return!h_(n)||n.length<2?n:gx(n)}function jf(){if(wm)return wm;const n=[];n.push(new Hn("bucket")),n.push(new Hn("generation")),n.push(new Hn("metageneration")),n.push(new Hn("name","fullPath",!0));function e(o,u){return Kj(u)}const t=new Hn("name");t.xform=e,n.push(t);function r(o,u){return u!==void 0?Number(u):u}const s=new Hn("size");return s.xform=r,n.push(s),n.push(new Hn("timeCreated")),n.push(new Hn("updated")),n.push(new Hn("md5Hash",null,!0)),n.push(new Hn("cacheControl",null,!0)),n.push(new Hn("contentDisposition",null,!0)),n.push(new Hn("contentEncoding",null,!0)),n.push(new Hn("contentLanguage",null,!0)),n.push(new Hn("contentType",null,!0)),n.push(new Hn("metadata","customMetadata",!0)),wm=n,wm}function Qj(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new kn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Wj(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return Qj(r,n),r}function _x(n,e,t){const r=Qb(e);return r===null?null:Wj(n,r,t)}function Yj(n,e,t,r){const s=Qb(e);if(s===null||!h_(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(m=>{const _=n.bucket,v=n.fullPath,b="/b/"+u(_)+"/o/"+u(v),I=go(b,t,r),C=cx({alt:"media",token:m});return I+C})[0]}function Wb(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="prefixes",FR="items";function Xj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[UR])for(const s of t[UR]){const o=s.replace(/\/$/,""),u=n._makeStorageReference(new kn(e,o));r.prefixes.push(u)}if(t[FR])for(const s of t[FR]){const o=n._makeStorageReference(new kn(e,s.name));r.items.push(o)}return r}function Zj(n,e,t){const r=Qb(t);return r===null?null:Xj(n,e,r)}class zs{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n){if(!n)throw $b()}function d_(n,e){function t(r,s){const o=_x(n,s,e);return Vi(o!==null),o}return t}function Jj(n,e){function t(r,s){const o=Zj(n,e,s);return Vi(o!==null),o}return t}function e5(n,e){function t(r,s){const o=_x(n,s,e);return Vi(o!==null),Yj(o,s,n.host,n._protocol)}return t}function eh(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=gj():s=mj():t.getStatus()===402?s=pj(n.bucket):t.getStatus()===403?s=_j(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function f_(n){const e=eh(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=fj(n.path)),o.serverResponse=s.serverResponse,o}return t}function yx(n,e,t){const r=e.fullServerUrl(),s=go(r,n.host,n._protocol),o="GET",u=n.maxOperationRetryTime,h=new zs(s,o,d_(n,t),u);return h.errorHandler=f_(e),h}function t5(n,e,t,r,s){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),s&&(o.maxResults=s);const u=e.bucketOnlyServerUrl(),h=go(u,n.host,n._protocol),d="GET",m=n.maxOperationRetryTime,_=new zs(h,d,Jj(n,e.bucket),m);return _.urlParams=o,_.errorHandler=eh(e),_}function n5(n,e,t){const r=e.fullServerUrl(),s=go(r,n.host,n._protocol),o="GET",u=n.maxOperationRetryTime,h=new zs(s,o,e5(n,t),u);return h.errorHandler=f_(e),h}function r5(n,e,t,r){const s=e.fullServerUrl(),o=go(s,n.host,n._protocol),u="PATCH",h=Wb(t,r),d={"Content-Type":"application/json; charset=utf-8"},m=n.maxOperationRetryTime,_=new zs(o,u,d_(n,r),m);return _.headers=d,_.body=h,_.errorHandler=f_(e),_}function i5(n,e){const t=e.fullServerUrl(),r=go(t,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function u(d,m){}const h=new zs(r,s,u,o);return h.successCodes=[200,204],h.errorHandler=f_(e),h}function s5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function vx(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=s5(null,e)),r}function Ex(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let H="";for(let se=0;se<2;se++)H=H+Math.random().toString().slice(2);return H}const d=h();u["Content-Type"]="multipart/related; boundary="+d;const m=vx(e,r,s),_=Wb(m,t),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+d+`\r
Content-Type: `+m.contentType+`\r
\r
`,b=`\r
--`+d+"--",I=Di.getBlob(v,r,b);if(I===null)throw ox();const C={name:m.fullPath},V=go(o,n.host,n._protocol),N="POST",B=n.maxUploadRetryTime,Y=new zs(V,N,d_(n,t),B);return Y.urlParams=C,Y.headers=u,Y.body=I.uploadData(),Y.errorHandler=eh(e),Y}class bg{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function Yb(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vi(!1)}return Vi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function a5(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),u=vx(e,r,s),h={name:u.fullPath},d=go(o,n.host,n._protocol),m="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},v=Wb(u,t),b=n.maxUploadRetryTime;function I(V){Yb(V);let N;try{N=V.getResponseHeader("X-Goog-Upload-URL")}catch{Vi(!1)}return Vi(h_(N)),N}const C=new zs(d,m,I,b);return C.urlParams=h,C.headers=_,C.body=v,C.errorHandler=eh(e),C}function o5(n,e,t,r){const s={"X-Goog-Upload-Command":"query"};function o(m){const _=Yb(m,["active","final"]);let v=null;try{v=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vi(!1)}v||Vi(!1);const b=Number(v);return Vi(!isNaN(b)),new bg(b,r.size(),_==="final")}const u="POST",h=n.maxUploadRetryTime,d=new zs(t,u,o,h);return d.headers=s,d.errorHandler=eh(e),d}const BR=256*1024;function l5(n,e,t,r,s,o,u,h){const d=new bg(0,0);if(u?(d.current=u.current,d.total=u.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw Tj();const m=d.total-d.current;let _=m;s>0&&(_=Math.min(_,s));const v=d.current,b=v+_;let I="";_===0?I="finalize":m===_?I="upload, finalize":I="upload";const C={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${d.current}`},V=r.slice(v,b);if(V===null)throw ox();function N(se,ie){const X=Yb(se,["active","final"]),x=d.current+_,R=r.size();let S;return X==="final"?S=d_(e,o)(se,ie):S=null,new bg(x,R,X==="final",S)}const B="POST",Y=e.maxUploadRetryTime,H=new zs(t,B,N,Y);return H.headers=C,H.body=V.uploadData(),H.progressCallback=h||null,H.errorHandler=eh(n),H}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5={STATE_CHANGED:"state_changed"},Qn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jv(n){switch(n){case"running":case"pausing":case"canceling":return Qn.RUNNING;case"paused":return Qn.PAUSED;case"success":return Qn.SUCCESS;case"canceled":return Qn.CANCELED;case"error":return Qn.ERROR;default:return Qn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,t,r){if(Cj(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class h5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Ed("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ed("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ed("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ed("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ed("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class d5 extends h5{initXhr(){this.xhr_.responseType="text"}}function Zr(){return new d5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=jf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(hx(s.status,[]))if(o)s=sx();else{this.sleepTime=Math.max(this.sleepTime*2,dj),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Et.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=a5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Zr,e,t);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=o5(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(s,Zr,t,r);this._request=o,o.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=BR*this._chunkMultiplier,t=new bg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,o)=>{let u;try{u=l5(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(d){this._error=d,this._transition("error");return}const h=this._ref.storage._makeRequest(u,Zr,s,o,!1);this._request=h,h.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){BR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=yx(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Zr,e,t);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Ex(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Zr,e,t);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ax(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=jv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const o=new c5(t||void 0,r||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(jv(this._state)){case Qn.SUCCESS:zu(this._resolve.bind(null,this.snapshot))();break;case Qn.CANCELED:case Qn.ERROR:const t=this._reject;zu(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(jv(this._state)){case Qn.RUNNING:case Qn.PAUSED:e.next&&zu(e.next.bind(e,this.snapshot))();break;case Qn.SUCCESS:e.complete&&zu(e.complete.bind(e))();break;case Qn.CANCELED:case Qn.ERROR:e.error&&zu(e.error.bind(e,this._error))();break;default:e.error&&zu(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this._service=e,t instanceof kn?this._location=t:this._location=kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new kl(e,t)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gx(this._location.path)}get storage(){return this._service}get parent(){const e=Hj(this._location.path);if(e===null)return null;const t=new kn(this._location.bucket,e);return new kl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ux(e)}}function f5(n,e,t){n._throwIfRoot("uploadBytes");const r=Ex(n.storage,n._location,jf(),new Di(e,!0),t);return n.storage.makeRequestWithTokens(r,Zr).then(s=>({metadata:s,ref:n}))}function p5(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Tx(n,new Di(e),t)}function m5(n){const e={prefixes:[],items:[]};return bx(n,e).then(()=>e)}async function bx(n,e,t){const s=await wx(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await bx(n,e,s.nextPageToken)}function wx(n,e){e!=null&&typeof e.maxResults=="number"&&UE("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=t5(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zr)}function g5(n){n._throwIfRoot("getMetadata");const e=yx(n.storage,n._location,jf());return n.storage.makeRequestWithTokens(e,Zr)}function _5(n,e){n._throwIfRoot("updateMetadata");const t=r5(n.storage,n._location,e,jf());return n.storage.makeRequestWithTokens(t,Zr)}function y5(n){n._throwIfRoot("getDownloadURL");const e=n5(n.storage,n._location,jf());return n.storage.makeRequestWithTokens(e,Zr).then(t=>{if(t===null)throw bj();return t})}function v5(n){n._throwIfRoot("deleteObject");const e=i5(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zr)}function Ix(n,e){const t=Gj(n._location.path,e),r=new kn(n._location.bucket,t);return new kl(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){return/^[A-Za-z]+:\/\//.test(n)}function T5(n,e){return new kl(n,e)}function Ax(n,e){if(n instanceof Xb){const t=n;if(t._bucket==null)throw Ej();const r=new kl(t,t._bucket);return e!=null?Ax(r,e):r}else return e!==void 0?Ix(n,e):n}function b5(n,e){if(e&&E5(e)){if(n instanceof Xb)return T5(n,e);throw ec("To use ref(service, url), the first argument must be a Storage instance.")}else return Ax(n,e)}function zR(n,e){const t=e==null?void 0:e[ix];return t==null?null:kn.makeFromBucketSpec(t,n)}function w5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:ZC(s,n.app.options.projectId))}class Xb{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=rx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cj,this._maxUploadRetryTime=hj,this._requests=new Set,s!=null?this._bucket=kn.makeFromBucketSpec(s,this._host):this._bucket=zR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=zR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kl(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new Ij(lx());{const u=Vj(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const qR="@firebase/storage",jR="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="storage";function tH(n,e,t){return n=Re(n),f5(n,e,t)}function A5(n,e,t){return n=Re(n),p5(n,e,t)}function S5(n){return n=Re(n),g5(n)}function R5(n,e){return n=Re(n),_5(n,e)}function C5(n,e){return n=Re(n),wx(n,e)}function D5(n){return n=Re(n),m5(n)}function P5(n){return n=Re(n),y5(n)}function O5(n){return n=Re(n),v5(n)}function HR(n,e){return n=Re(n),b5(n,e)}function x5(n,e){return Ix(n,e)}function N5(n,e,t,r={}){w5(n,e,t,r)}function k5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Xb(t,r,s,e,ks)}function V5(){Cs(new Br(I5,k5,"PUBLIC").setMultipleInstances(!0)),_r(qR,jR,""),_r(qR,jR,"esm2017")}V5();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Im(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Im(r,this,this._ref))},t)}on(e,t,r,s){let o;return t&&(typeof t=="function"?o=u=>t(new Im(u,this,this._ref)):o={next:t.next?u=>t.next(new Im(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,s||void 0)}}class $R{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Is(e,this._service))}get items(){return this._delegate.items.map(e=>new Is(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=x5(this._delegate,e);return new Is(t,this.storage)}get root(){return new Is(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Is(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new GR(A5(this._delegate,e,t),this)}putString(e,t=Ur.RAW,r){this._throwIfRoot("putString");const s=dx(t,e),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),new GR(new Tx(this._delegate,new Di(s.data,!0),o),this)}listAll(){return D5(this._delegate).then(e=>new $R(e,this.storage))}list(e){return C5(this._delegate,e||void 0).then(t=>new $R(t,this.storage))}getMetadata(){return S5(this._delegate)}updateMetadata(e){return R5(this._delegate,e)}getDownloadURL(){return P5(this._delegate)}delete(){return this._throwIfRoot("delete"),O5(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw ux(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(KR(e))throw ec("ref() expected a child path but got a URL, use refFromURL instead.");return new Is(HR(this._delegate,e),this)}refFromURL(e){if(!KR(e))throw ec("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kn.makeFromUrl(e,this._delegate.host)}catch{throw ec("refFromUrl() expected a valid full URL but got an invalid one.")}return new Is(HR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){N5(this._delegate,e,t,r)}}function KR(n){return/^[A-Za-z]+:\/\//.test(n)}const M5="@firebase/storage-compat",L5="0.3.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="storage-compat";function F5(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Sx(t,r)}function B5(n){const e={TaskState:Qn,TaskEvent:u5,StringFormat:Ur,Storage:Sx,Reference:Is};n.INTERNAL.registerComponent(new Br(U5,F5,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(M5,L5)}B5(zi);const z5={apiKey:"AIzaSyDEPGhcTLIBI6l0iphxv82_mNo_X_qqA5Y",authDomain:"dazone-920d5.firebaseapp.com",projectId:"dazone-920d5",storageBucket:"dazone-920d5.firebasestorage.app",messagingSenderId:"1083358016566",appId:"1:1083358016566:web:872ec4d4b85704046fd497",measurementId:"G-7FTKRK06X9"};zi.initializeApp(z5);const q5=zi.firestore,Zb=q5(),j5=zi.auth,Am=j5(),H5=zi.storage,nH=H5();var ff=(n=>(n.USERS="users",n.PRODUCTS="products",n.ORDERS="orders",n.CART="cart",n))(ff||{});const G5=Zb.collection(ff.USERS),$5=({children:n})=>{const[e,t]=K.useState(!1),[r,s]=K.useState(!0),[o,u]=K.useState(HC.user),h=K.useCallback(async b=>{const C=(await G5.doc(b).get()).data();//! 한 명의 유저를 가져오는 법: doc에 해당 아이템의 아이디를 전달하면 됨
if(!C)return alert("존재하지 않는 유저입니다."),u(null);u(C)},[]);K.useEffect(()=>Am.onAuthStateChanged(I=>{console.log(I),I?(console.log("fetch user data from database"),h(I.uid)):u(null),setTimeout(()=>{t(!0),s(!1)},1e3)}),[h]);const d=K.useCallback(async(b,I)=>{try{console.log("signin process started"),s(!0);const{user:C}=await Am.signInWithEmailAndPassword(b,I);C&&await h(C.uid)}catch(C){return console.log(C),{message:C.message}}finally{console.log("singin process done"),s(!1)}return{success:!0}},[h]),m=K.useCallback(async(b,I)=>{try{s(!0);const{user:C}=await Am.createUserWithEmailAndPassword(b.email,I);if(!C)return{success:!1,message:"회원가입에 실패했습니다."};const V={...b,uid:C.uid};return await Zb.collection(ff.USERS).doc(C.uid).set(V),u(V),{success:!0}}catch(C){return{success:!1,message:C.message}}finally{s(!1)}},[]),_=K.useCallback(async()=>(Am.signOut(),u(null),{success:!0}),[]),v=K.useCallback((b,I)=>{u(C=>C?{...C,[b]:I}:null)},[]);return qe.jsx(GC.Provider,{value:{initialized:e,isPending:r,user:o,signin:d,signup:m,signout:_,updateUser:v},children:!e||r?qe.jsx(jC,{children:qe.jsx("h1",{className:"text-[100px] font-black text-theme",children:"대존"})}):n})};var th=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vl=typeof window>"u"||"Deno"in globalThis;function Mr(){}function K5(n,e){return typeof n=="function"?n(e):n}function FE(n){return typeof n=="number"&&n>=0&&n!==1/0}function Rx(n,e){return Math.max(n+(e||0)-Date.now(),0)}function tc(n,e){return typeof n=="function"?n(e):n}function Xr(n,e){return typeof n=="function"?n(e):n}function QR(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:u,stale:h}=n;if(u){if(r){if(e.queryHash!==Jb(u,e.options))return!1}else if(!pf(e.queryKey,u))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||s&&s!==e.state.fetchStatus||o&&!o(e))}function WR(n,e){const{exact:t,status:r,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(Ml(e.options.mutationKey)!==Ml(o))return!1}else if(!pf(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jb(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ml)(n)}function Ml(n){return JSON.stringify(n,(e,t)=>BE(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function pf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!pf(n[t],e[t])):!1}function Cx(n,e){if(n===e)return n;const t=YR(n)&&YR(e);if(t||BE(n)&&BE(e)){const r=t?n:Object.keys(n),s=r.length,o=t?e:Object.keys(e),u=o.length,h=t?[]:{};let d=0;for(let m=0;m<u;m++){const _=t?m:o[m];(!t&&r.includes(_)||t)&&n[_]===void 0&&e[_]===void 0?(h[_]=void 0,d++):(h[_]=Cx(n[_],e[_]),h[_]===n[_]&&n[_]!==void 0&&d++)}return s===u&&d===s?n:h}return e}function wg(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function YR(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function BE(n){if(!XR(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!XR(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function XR(n){return Object.prototype.toString.call(n)==="[object Object]"}function Q5(n){return new Promise(e=>{setTimeout(e,n)})}function zE(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Cx(n,e):e}function W5(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Y5(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var ew=Symbol();function Dx(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ew?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var cl,Na,nc,sC,X5=(sC=class extends th{constructor(){super();xe(this,cl);xe(this,Na);xe(this,nc);Te(this,nc,e=>{if(!Vl&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){L(this,Na)||this.setEventListener(L(this,nc))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Na))==null||e.call(this),Te(this,Na,void 0))}setEventListener(e){var t;Te(this,nc,e),(t=L(this,Na))==null||t.call(this),Te(this,Na,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,cl)!==e&&(Te(this,cl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof L(this,cl)=="boolean"?L(this,cl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},cl=new WeakMap,Na=new WeakMap,nc=new WeakMap,sC),tw=new X5,rc,ka,ic,aC,Z5=(aC=class extends th{constructor(){super();xe(this,rc,!0);xe(this,ka);xe(this,ic);Te(this,ic,e=>{if(!Vl&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,ka)||this.setEventListener(L(this,ic))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,ka))==null||e.call(this),Te(this,ka,void 0))}setEventListener(e){var t;Te(this,ic,e),(t=L(this,ka))==null||t.call(this),Te(this,ka,e(this.setOnline.bind(this)))}setOnline(e){L(this,rc)!==e&&(Te(this,rc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,rc)}},rc=new WeakMap,ka=new WeakMap,ic=new WeakMap,aC),Ig=new Z5;function qE(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function J5(n){return Math.min(1e3*2**n,3e4)}function Px(n){return(n??"online")==="online"?Ig.isOnline():!0}var Ox=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Hv(n){return n instanceof Ox}function xx(n){let e=!1,t=0,r=!1,s;const o=qE(),u=V=>{var N;r||(b(new Ox(V)),(N=n.abort)==null||N.call(n))},h=()=>{e=!0},d=()=>{e=!1},m=()=>tw.isFocused()&&(n.networkMode==="always"||Ig.isOnline())&&n.canRun(),_=()=>Px(n.networkMode)&&n.canRun(),v=V=>{var N;r||(r=!0,(N=n.onSuccess)==null||N.call(n,V),s==null||s(),o.resolve(V))},b=V=>{var N;r||(r=!0,(N=n.onError)==null||N.call(n,V),s==null||s(),o.reject(V))},I=()=>new Promise(V=>{var N;s=B=>{(r||m())&&V(B)},(N=n.onPause)==null||N.call(n)}).then(()=>{var V;s=void 0,r||(V=n.onContinue)==null||V.call(n)}),C=()=>{if(r)return;let V;const N=t===0?n.initialPromise:void 0;try{V=N??n.fn()}catch(B){V=Promise.reject(B)}Promise.resolve(V).then(v).catch(B=>{var X;if(r)return;const Y=n.retry??(Vl?0:3),H=n.retryDelay??J5,se=typeof H=="function"?H(t,B):H,ie=Y===!0||typeof Y=="number"&&t<Y||typeof Y=="function"&&Y(t,B);if(e||!ie){b(B);return}t++,(X=n.onFail)==null||X.call(n,t,B),Q5(se).then(()=>m()?void 0:I()).then(()=>{e?b(B):C()})})};return{promise:o,cancel:u,continue:()=>(s==null||s(),o),cancelRetry:h,continueRetry:d,canStart:_,start:()=>(_()?C():I().then(C),o)}}function e3(){let n=[],e=0,t=h=>{h()},r=h=>{h()},s=h=>setTimeout(h,0);const o=h=>{e?n.push(h):s(()=>{t(h)})},u=()=>{const h=n;n=[],h.length&&s(()=>{r(()=>{h.forEach(d=>{t(d)})})})};return{batch:h=>{let d;e++;try{d=h()}finally{e--,e||u()}return d},batchCalls:h=>(...d)=>{o(()=>{h(...d)})},schedule:o,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{s=h}}}var sn=e3(),hl,oC,Nx=(oC=class{constructor(){xe(this,hl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),FE(this.gcTime)&&Te(this,hl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Vl?1/0:5*60*1e3))}clearGcTimeout(){L(this,hl)&&(clearTimeout(L(this,hl)),Te(this,hl,void 0))}},hl=new WeakMap,oC),sc,ac,Vr,dl,xn,mf,fl,Qr,ps,lC,t3=(lC=class extends Nx{constructor(e){super();xe(this,Qr);xe(this,sc);xe(this,ac);xe(this,Vr);xe(this,dl);xe(this,xn);xe(this,mf);xe(this,fl);Te(this,fl,!1),Te(this,mf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Te(this,dl,e.client),Te(this,Vr,L(this,dl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Te(this,sc,n3(this.options)),this.state=e.state??L(this,sc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=L(this,xn))==null?void 0:e.promise}setOptions(e){this.options={...L(this,mf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Vr).remove(this)}setData(e,t){const r=zE(this.state.data,e,this.options);return Be(this,Qr,ps).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Be(this,Qr,ps).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=L(this,xn))==null?void 0:r.promise;return(s=L(this,xn))==null||s.cancel(e),t?t.then(Mr).catch(Mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,sc))}isActive(){return this.observers.some(e=>Xr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ew||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Rx(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=L(this,xn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=L(this,xn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),L(this,Vr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(L(this,xn)&&(L(this,fl)?L(this,xn).cancel({revert:!0}):L(this,xn).cancelRetry()),this.scheduleGc()),L(this,Vr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Be(this,Qr,ps).call(this,{type:"invalidate"})}fetch(e,t){var d,m,_;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(L(this,xn))return L(this,xn).continueRetry(),L(this,xn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Te(this,fl,!0),r.signal)})},o=()=>{const v=Dx(this.options,t),b={client:L(this,dl),queryKey:this.queryKey,meta:this.meta};return s(b),Te(this,fl,!1),this.options.persister?this.options.persister(v,b,this):v(b)},u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:L(this,dl),state:this.state,fetchFn:o};s(u),(d=this.options.behavior)==null||d.onFetch(u,this),Te(this,ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=u.fetchOptions)==null?void 0:m.meta))&&Be(this,Qr,ps).call(this,{type:"fetch",meta:(_=u.fetchOptions)==null?void 0:_.meta});const h=v=>{var b,I,C,V;Hv(v)&&v.silent||Be(this,Qr,ps).call(this,{type:"error",error:v}),Hv(v)||((I=(b=L(this,Vr).config).onError)==null||I.call(b,v,this),(V=(C=L(this,Vr).config).onSettled)==null||V.call(C,this.state.data,v,this)),this.scheduleGc()};return Te(this,xn,xx({initialPromise:t==null?void 0:t.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:v=>{var b,I,C,V;if(v===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(N){h(N);return}(I=(b=L(this,Vr).config).onSuccess)==null||I.call(b,v,this),(V=(C=L(this,Vr).config).onSettled)==null||V.call(C,v,this.state.error,this),this.scheduleGc()},onError:h,onFail:(v,b)=>{Be(this,Qr,ps).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{Be(this,Qr,ps).call(this,{type:"pause"})},onContinue:()=>{Be(this,Qr,ps).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),L(this,xn).start()}},sc=new WeakMap,ac=new WeakMap,Vr=new WeakMap,dl=new WeakMap,xn=new WeakMap,mf=new WeakMap,fl=new WeakMap,Qr=new WeakSet,ps=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...kx(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Hv(s)&&s.revert&&L(this,ac)?{...L(this,ac),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),sn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),L(this,Vr).notify({query:this,type:"updated",action:e})})},lC);function kx(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Px(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function n3(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ei,uC,r3=(uC=class extends th{constructor(e={}){super();xe(this,Ei);this.config=e,Te(this,Ei,new Map)}build(e,t,r){const s=t.queryKey,o=t.queryHash??Jb(s,t);let u=this.get(o);return u||(u=new t3({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(u)),u}add(e){L(this,Ei).has(e.queryHash)||(L(this,Ei).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=L(this,Ei).get(e.queryHash);t&&(e.destroy(),t===e&&L(this,Ei).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Ei).get(e)}getAll(){return[...L(this,Ei).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>QR(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>QR(e,r)):t}notify(e){sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ei=new WeakMap,uC),Ti,Gn,pl,bi,Oa,cC,i3=(cC=class extends Nx{constructor(e){super();xe(this,bi);xe(this,Ti);xe(this,Gn);xe(this,pl);this.mutationId=e.mutationId,Te(this,Gn,e.mutationCache),Te(this,Ti,[]),this.state=e.state||Vx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){L(this,Ti).includes(e)||(L(this,Ti).push(e),this.clearGcTimeout(),L(this,Gn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Te(this,Ti,L(this,Ti).filter(t=>t!==e)),this.scheduleGc(),L(this,Gn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){L(this,Ti).length||(this.state.status==="pending"?this.scheduleGc():L(this,Gn).remove(this))}continue(){var e;return((e=L(this,pl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,u,h,d,m,_,v,b,I,C,V,N,B,Y,H,se,ie,X,x;Te(this,pl,xx({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,S)=>{Be(this,bi,Oa).call(this,{type:"failed",failureCount:R,error:S})},onPause:()=>{Be(this,bi,Oa).call(this,{type:"pause"})},onContinue:()=>{Be(this,bi,Oa).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Gn).canRun(this)}));const t=this.state.status==="pending",r=!L(this,pl).canStart();try{if(!t){Be(this,bi,Oa).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(s=L(this,Gn).config).onMutate)==null?void 0:o.call(s,e,this));const S=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,e));S!==this.state.context&&Be(this,bi,Oa).call(this,{type:"pending",context:S,variables:e,isPaused:r})}const R=await L(this,pl).start();return await((m=(d=L(this,Gn).config).onSuccess)==null?void 0:m.call(d,R,e,this.state.context,this)),await((v=(_=this.options).onSuccess)==null?void 0:v.call(_,R,e,this.state.context)),await((I=(b=L(this,Gn).config).onSettled)==null?void 0:I.call(b,R,null,this.state.variables,this.state.context,this)),await((V=(C=this.options).onSettled)==null?void 0:V.call(C,R,null,e,this.state.context)),Be(this,bi,Oa).call(this,{type:"success",data:R}),R}catch(R){try{throw await((B=(N=L(this,Gn).config).onError)==null?void 0:B.call(N,R,e,this.state.context,this)),await((H=(Y=this.options).onError)==null?void 0:H.call(Y,R,e,this.state.context)),await((ie=(se=L(this,Gn).config).onSettled)==null?void 0:ie.call(se,void 0,R,this.state.variables,this.state.context,this)),await((x=(X=this.options).onSettled)==null?void 0:x.call(X,void 0,R,e,this.state.context)),R}finally{Be(this,bi,Oa).call(this,{type:"error",error:R})}}finally{L(this,Gn).runNext(this)}}},Ti=new WeakMap,Gn=new WeakMap,pl=new WeakMap,bi=new WeakSet,Oa=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),sn.batch(()=>{L(this,Ti).forEach(r=>{r.onMutationUpdate(e)}),L(this,Gn).notify({mutation:this,type:"updated",action:e})})},cC);function Vx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ms,Wr,gf,hC,s3=(hC=class extends th{constructor(e={}){super();xe(this,ms);xe(this,Wr);xe(this,gf);this.config=e,Te(this,ms,new Set),Te(this,Wr,new Map),Te(this,gf,0)}build(e,t,r){const s=new i3({mutationCache:this,mutationId:++hm(this,gf)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){L(this,ms).add(e);const t=Sm(e);if(typeof t=="string"){const r=L(this,Wr).get(t);r?r.push(e):L(this,Wr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,ms).delete(e)){const t=Sm(e);if(typeof t=="string"){const r=L(this,Wr).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&L(this,Wr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Sm(e);if(typeof t=="string"){const r=L(this,Wr).get(t),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Sm(e);if(typeof t=="string"){const s=(r=L(this,Wr).get(t))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sn.batch(()=>{L(this,ms).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,ms).clear(),L(this,Wr).clear()})}getAll(){return Array.from(L(this,ms))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>WR(t,r))}findAll(e={}){return this.getAll().filter(t=>WR(e,t))}notify(e){sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return sn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Mr))))}},ms=new WeakMap,Wr=new WeakMap,gf=new WeakMap,hC);function Sm(n){var e;return(e=n.options.scope)==null?void 0:e.id}function ZR(n){return{onFetch:(e,t)=>{var _,v,b,I,C;const r=e.options,s=(b=(v=(_=e.fetchOptions)==null?void 0:_.meta)==null?void 0:v.fetchMore)==null?void 0:b.direction,o=((I=e.state.data)==null?void 0:I.pages)||[],u=((C=e.state.data)==null?void 0:C.pageParams)||[];let h={pages:[],pageParams:[]},d=0;const m=async()=>{let V=!1;const N=H=>{Object.defineProperty(H,"signal",{enumerable:!0,get:()=>(e.signal.aborted?V=!0:e.signal.addEventListener("abort",()=>{V=!0}),e.signal)})},B=Dx(e.options,e.fetchOptions),Y=async(H,se,ie)=>{if(V)return Promise.reject();if(se==null&&H.pages.length)return Promise.resolve(H);const X={client:e.client,queryKey:e.queryKey,pageParam:se,direction:ie?"backward":"forward",meta:e.options.meta};N(X);const x=await B(X),{maxPages:R}=e.options,S=ie?Y5:W5;return{pages:S(H.pages,x,R),pageParams:S(H.pageParams,se,R)}};if(s&&o.length){const H=s==="backward",se=H?a3:JR,ie={pages:o,pageParams:u},X=se(r,ie);h=await Y(ie,X,H)}else{const H=n??o.length;do{const se=d===0?u[0]??r.initialPageParam:JR(r,h);if(d>0&&se==null)break;h=await Y(h,se),d++}while(d<H)}return h};e.options.persister?e.fetchFn=()=>{var V,N;return(N=(V=e.options).persister)==null?void 0:N.call(V,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function JR(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function a3(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ut,Va,Ma,oc,lc,La,uc,cc,dC,o3=(dC=class{constructor(n={}){xe(this,Ut);xe(this,Va);xe(this,Ma);xe(this,oc);xe(this,lc);xe(this,La);xe(this,uc);xe(this,cc);Te(this,Ut,n.queryCache||new r3),Te(this,Va,n.mutationCache||new s3),Te(this,Ma,n.defaultOptions||{}),Te(this,oc,new Map),Te(this,lc,new Map),Te(this,La,0)}mount(){hm(this,La)._++,L(this,La)===1&&(Te(this,uc,tw.subscribe(async n=>{n&&(await this.resumePausedMutations(),L(this,Ut).onFocus())})),Te(this,cc,Ig.subscribe(async n=>{n&&(await this.resumePausedMutations(),L(this,Ut).onOnline())})))}unmount(){var n,e;hm(this,La)._--,L(this,La)===0&&((n=L(this,uc))==null||n.call(this),Te(this,uc,void 0),(e=L(this,cc))==null||e.call(this),Te(this,cc,void 0))}isFetching(n){return L(this,Ut).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return L(this,Va).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=L(this,Ut).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=L(this,Ut).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(tc(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return L(this,Ut).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=L(this,Ut).get(r.queryHash),o=s==null?void 0:s.state.data,u=K5(e,o);if(u!==void 0)return L(this,Ut).build(this,r).setData(u,{...t,manual:!0})}setQueriesData(n,e,t){return sn.batch(()=>L(this,Ut).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=L(this,Ut).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=L(this,Ut);sn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=L(this,Ut);return sn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=sn.batch(()=>L(this,Ut).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Mr).catch(Mr)}invalidateQueries(n,e={}){return sn.batch(()=>(L(this,Ut).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=sn.batch(()=>L(this,Ut).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(Mr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Mr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=L(this,Ut).build(this,e);return t.isStaleByTime(tc(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Mr).catch(Mr)}fetchInfiniteQuery(n){return n.behavior=ZR(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Mr).catch(Mr)}ensureInfiniteQueryData(n){return n.behavior=ZR(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Ig.isOnline()?L(this,Va).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Ut)}getMutationCache(){return L(this,Va)}getDefaultOptions(){return L(this,Ma)}setDefaultOptions(n){Te(this,Ma,n)}setQueryDefaults(n,e){L(this,oc).set(Ml(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...L(this,oc).values()],t={};return e.forEach(r=>{pf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){L(this,lc).set(Ml(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...L(this,lc).values()],t={};return e.forEach(r=>{pf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...L(this,Ma).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ew&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...L(this,Ma).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){L(this,Ut).clear(),L(this,Va).clear()}},Ut=new WeakMap,Va=new WeakMap,Ma=new WeakMap,oc=new WeakMap,lc=new WeakMap,La=new WeakMap,uc=new WeakMap,cc=new WeakMap,dC),tr,Xe,_f,$n,ml,hc,Ua,wi,yf,dc,fc,gl,_l,Fa,pc,ut,Rd,jE,HE,GE,$E,KE,QE,WE,Mx,fC,l3=(fC=class extends th{constructor(e,t){super();xe(this,ut);xe(this,tr);xe(this,Xe);xe(this,_f);xe(this,$n);xe(this,ml);xe(this,hc);xe(this,Ua);xe(this,wi);xe(this,yf);xe(this,dc);xe(this,fc);xe(this,gl);xe(this,_l);xe(this,Fa);xe(this,pc,new Set);this.options=t,Te(this,tr,e),Te(this,wi,null),Te(this,Ua,qE()),this.options.experimental_prefetchInRender||L(this,Ua).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Xe).addObserver(this),eC(L(this,Xe),this.options)?Be(this,ut,Rd).call(this):this.updateResult(),Be(this,ut,$E).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return YE(L(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return YE(L(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Be(this,ut,KE).call(this),Be(this,ut,QE).call(this),L(this,Xe).removeObserver(this)}setOptions(e,t){const r=this.options,s=L(this,Xe);if(this.options=L(this,tr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xr(this.options.enabled,L(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Be(this,ut,WE).call(this),L(this,Xe).setOptions(this.options),r._defaulted&&!wg(this.options,r)&&L(this,tr).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Xe),observer:this});const o=this.hasListeners();o&&tC(L(this,Xe),s,this.options,r)&&Be(this,ut,Rd).call(this),this.updateResult(t),o&&(L(this,Xe)!==s||Xr(this.options.enabled,L(this,Xe))!==Xr(r.enabled,L(this,Xe))||tc(this.options.staleTime,L(this,Xe))!==tc(r.staleTime,L(this,Xe)))&&Be(this,ut,jE).call(this);const u=Be(this,ut,HE).call(this);o&&(L(this,Xe)!==s||Xr(this.options.enabled,L(this,Xe))!==Xr(r.enabled,L(this,Xe))||u!==L(this,Fa))&&Be(this,ut,GE).call(this,u)}getOptimisticResult(e){const t=L(this,tr).getQueryCache().build(L(this,tr),e),r=this.createResult(t,e);return c3(this,r)&&(Te(this,$n,r),Te(this,hc,this.options),Te(this,ml,L(this,Xe).state)),r}getCurrentResult(){return L(this,$n)}trackResult(e,t){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),r}trackProp(e){L(this,pc).add(e)}getCurrentQuery(){return L(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=L(this,tr).defaultQueryOptions(e),r=L(this,tr).getQueryCache().build(L(this,tr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Be(this,ut,Rd).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,$n)))}createResult(e,t){var R;const r=L(this,Xe),s=this.options,o=L(this,$n),u=L(this,ml),h=L(this,hc),m=e!==r?e.state:L(this,_f),{state:_}=e;let v={..._},b=!1,I;if(t._optimisticResults){const S=this.hasListeners(),D=!S&&eC(e,t),M=S&&tC(e,r,t,s);(D||M)&&(v={...v,...kx(_.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:C,errorUpdatedAt:V,status:N}=v;if(t.select&&v.data!==void 0)if(o&&v.data===(u==null?void 0:u.data)&&t.select===L(this,yf))I=L(this,dc);else try{Te(this,yf,t.select),I=t.select(v.data),I=zE(o==null?void 0:o.data,I,t),Te(this,dc,I),Te(this,wi,null)}catch(S){Te(this,wi,S)}else I=v.data;if(t.placeholderData!==void 0&&I===void 0&&N==="pending"){let S;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(h==null?void 0:h.placeholderData))S=o.data;else if(S=typeof t.placeholderData=="function"?t.placeholderData((R=L(this,fc))==null?void 0:R.state.data,L(this,fc)):t.placeholderData,t.select&&S!==void 0)try{S=t.select(S),Te(this,wi,null)}catch(D){Te(this,wi,D)}S!==void 0&&(N="success",I=zE(o==null?void 0:o.data,S,t),b=!0)}L(this,wi)&&(C=L(this,wi),I=L(this,dc),V=Date.now(),N="error");const B=v.fetchStatus==="fetching",Y=N==="pending",H=N==="error",se=Y&&B,ie=I!==void 0,x={status:N,fetchStatus:v.fetchStatus,isPending:Y,isSuccess:N==="success",isError:H,isInitialLoading:se,isLoading:se,data:I,dataUpdatedAt:v.dataUpdatedAt,error:C,errorUpdatedAt:V,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>m.dataUpdateCount||v.errorUpdateCount>m.errorUpdateCount,isFetching:B,isRefetching:B&&!Y,isLoadingError:H&&!ie,isPaused:v.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:H&&ie,isStale:nw(e,t),refetch:this.refetch,promise:L(this,Ua)};if(this.options.experimental_prefetchInRender){const S=z=>{x.status==="error"?z.reject(x.error):x.data!==void 0&&z.resolve(x.data)},D=()=>{const z=Te(this,Ua,x.promise=qE());S(z)},M=L(this,Ua);switch(M.status){case"pending":e.queryHash===r.queryHash&&S(M);break;case"fulfilled":(x.status==="error"||x.data!==M.value)&&D();break;case"rejected":(x.status!=="error"||x.error!==M.reason)&&D();break}}return x}updateResult(e){const t=L(this,$n),r=this.createResult(L(this,Xe),this.options);if(Te(this,ml,L(this,Xe).state),Te(this,hc,this.options),L(this,ml).data!==void 0&&Te(this,fc,L(this,Xe)),wg(r,t))return;Te(this,$n,r);const s={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!L(this,pc).size)return!0;const d=new Set(h??L(this,pc));return this.options.throwOnError&&d.add("error"),Object.keys(L(this,$n)).some(m=>{const _=m;return L(this,$n)[_]!==t[_]&&d.has(_)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),Be(this,ut,Mx).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Be(this,ut,$E).call(this)}},tr=new WeakMap,Xe=new WeakMap,_f=new WeakMap,$n=new WeakMap,ml=new WeakMap,hc=new WeakMap,Ua=new WeakMap,wi=new WeakMap,yf=new WeakMap,dc=new WeakMap,fc=new WeakMap,gl=new WeakMap,_l=new WeakMap,Fa=new WeakMap,pc=new WeakMap,ut=new WeakSet,Rd=function(e){Be(this,ut,WE).call(this);let t=L(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Mr)),t},jE=function(){Be(this,ut,KE).call(this);const e=tc(this.options.staleTime,L(this,Xe));if(Vl||L(this,$n).isStale||!FE(e))return;const r=Rx(L(this,$n).dataUpdatedAt,e)+1;Te(this,gl,setTimeout(()=>{L(this,$n).isStale||this.updateResult()},r))},HE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Xe)):this.options.refetchInterval)??!1},GE=function(e){Be(this,ut,QE).call(this),Te(this,Fa,e),!(Vl||Xr(this.options.enabled,L(this,Xe))===!1||!FE(L(this,Fa))||L(this,Fa)===0)&&Te(this,_l,setInterval(()=>{(this.options.refetchIntervalInBackground||tw.isFocused())&&Be(this,ut,Rd).call(this)},L(this,Fa)))},$E=function(){Be(this,ut,jE).call(this),Be(this,ut,GE).call(this,Be(this,ut,HE).call(this))},KE=function(){L(this,gl)&&(clearTimeout(L(this,gl)),Te(this,gl,void 0))},QE=function(){L(this,_l)&&(clearInterval(L(this,_l)),Te(this,_l,void 0))},WE=function(){const e=L(this,tr).getQueryCache().build(L(this,tr),this.options);if(e===L(this,Xe))return;const t=L(this,Xe);Te(this,Xe,e),Te(this,_f,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Mx=function(e){sn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(L(this,$n))}),L(this,tr).getQueryCache().notify({query:L(this,Xe),type:"observerResultsUpdated"})})},fC);function u3(n,e){return Xr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function eC(n,e){return u3(n,e)||n.state.data!==void 0&&YE(n,e,e.refetchOnMount)}function YE(n,e,t){if(Xr(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&nw(n,e)}return!1}function tC(n,e,t,r){return(n!==e||Xr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&nw(n,t)}function nw(n,e){return Xr(e.enabled,n)!==!1&&n.isStaleByTime(tc(e.staleTime,n))}function c3(n,e){return!wg(n.getCurrentResult(),e)}var Ba,za,nr,gs,As,jm,XE,pC,h3=(pC=class extends th{constructor(t,r){super();xe(this,As);xe(this,Ba);xe(this,za);xe(this,nr);xe(this,gs);Te(this,Ba,t),this.setOptions(r),this.bindMethods(),Be(this,As,jm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=L(this,Ba).defaultMutationOptions(t),wg(this.options,r)||L(this,Ba).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,nr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ml(r.mutationKey)!==Ml(this.options.mutationKey)?this.reset():((s=L(this,nr))==null?void 0:s.state.status)==="pending"&&L(this,nr).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=L(this,nr))==null||t.removeObserver(this)}onMutationUpdate(t){Be(this,As,jm).call(this),Be(this,As,XE).call(this,t)}getCurrentResult(){return L(this,za)}reset(){var t;(t=L(this,nr))==null||t.removeObserver(this),Te(this,nr,void 0),Be(this,As,jm).call(this),Be(this,As,XE).call(this)}mutate(t,r){var s;return Te(this,gs,r),(s=L(this,nr))==null||s.removeObserver(this),Te(this,nr,L(this,Ba).getMutationCache().build(L(this,Ba),this.options)),L(this,nr).addObserver(this),L(this,nr).execute(t)}},Ba=new WeakMap,za=new WeakMap,nr=new WeakMap,gs=new WeakMap,As=new WeakSet,jm=function(){var r;const t=((r=L(this,nr))==null?void 0:r.state)??Vx();Te(this,za,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},XE=function(t){sn.batch(()=>{var r,s,o,u,h,d,m,_;if(L(this,gs)&&this.hasListeners()){const v=L(this,za).variables,b=L(this,za).context;(t==null?void 0:t.type)==="success"?((s=(r=L(this,gs)).onSuccess)==null||s.call(r,t.data,v,b),(u=(o=L(this,gs)).onSettled)==null||u.call(o,t.data,null,v,b)):(t==null?void 0:t.type)==="error"&&((d=(h=L(this,gs)).onError)==null||d.call(h,t.error,v,b),(_=(m=L(this,gs)).onSettled)==null||_.call(m,void 0,t.error,v,b))}this.listeners.forEach(v=>{v(L(this,za))})})},pC),Lx=K.createContext(void 0),rw=n=>{const e=K.useContext(Lx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},d3=({client:n,children:e})=>(K.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),qe.jsx(Lx.Provider,{value:n,children:e})),Ux=K.createContext(!1),f3=()=>K.useContext(Ux);Ux.Provider;function p3(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var m3=K.createContext(p3()),g3=()=>K.useContext(m3);function Fx(n,e){return typeof n=="function"?n(...e):!!n}function ZE(){}var _3=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},y3=n=>{K.useEffect(()=>{n.clearReset()},[n])},v3=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||Fx(t,[n.error,r])),E3=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},T3=(n,e)=>n.isLoading&&n.isFetching&&!e,b3=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,nC=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function w3(n,e,t){var v,b,I,C,V;const r=rw(),s=f3(),o=g3(),u=r.defaultQueryOptions(n);(b=(v=r.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||b.call(v,u),u._optimisticResults=s?"isRestoring":"optimistic",E3(u),_3(u,o),y3(o);const h=!r.getQueryCache().get(u.queryHash),[d]=K.useState(()=>new e(r,u)),m=d.getOptimisticResult(u),_=!s&&n.subscribed!==!1;if(K.useSyncExternalStore(K.useCallback(N=>{const B=_?d.subscribe(sn.batchCalls(N)):ZE;return d.updateResult(),B},[d,_]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),K.useEffect(()=>{d.setOptions(u,{listeners:!1})},[u,d]),b3(u,m))throw nC(u,d,o);if(v3({result:m,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw m.error;if((C=(I=r.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||C.call(I,u,m),u.experimental_prefetchInRender&&!Vl&&T3(m,s)){const N=h?nC(u,d,o):(V=r.getQueryCache().get(u.queryHash))==null?void 0:V.promise;N==null||N.catch(ZE).finally(()=>{d.updateResult()})}return u.notifyOnChangeProps?m:d.trackResult(m)}function I3(n,e){return w3(n,l3)}function A3(n,e){const t=rw(),[r]=K.useState(()=>new h3(t,n));K.useEffect(()=>{r.setOptions(n)},[r,n]);const s=K.useSyncExternalStore(K.useCallback(u=>r.subscribe(sn.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=K.useCallback((u,h)=>{r.mutate(u,h).catch(ZE)},[r]);if(s.error&&Fx(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}var Hm={exports:{}},S3=Hm.exports,rC;function R3(){return rC||(rC=1,function(n,e){(function(t,r){n.exports=r()})(S3,function(){var t=1e3,r=6e4,s=36e5,o="millisecond",u="second",h="minute",d="hour",m="day",_="week",v="month",b="quarter",I="year",C="date",V="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,B=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ee){var de=["th","st","nd","rd"],q=Ee%100;return"["+Ee+(de[(q-20)%10]||de[q]||de[0])+"]"}},H=function(Ee,de,q){var oe=String(Ee);return!oe||oe.length>=de?Ee:""+Array(de+1-oe.length).join(q)+Ee},se={s:H,z:function(Ee){var de=-Ee.utcOffset(),q=Math.abs(de),oe=Math.floor(q/60),ee=q%60;return(de<=0?"+":"-")+H(oe,2,"0")+":"+H(ee,2,"0")},m:function Ee(de,q){if(de.date()<q.date())return-Ee(q,de);var oe=12*(q.year()-de.year())+(q.month()-de.month()),ee=de.clone().add(oe,v),me=q-ee<0,O=de.clone().add(oe+(me?-1:1),v);return+(-(oe+(q-ee)/(me?ee-O:O-ee))||0)},a:function(Ee){return Ee<0?Math.ceil(Ee)||0:Math.floor(Ee)},p:function(Ee){return{M:v,y:I,w:_,d:m,D:C,h:d,m:h,s:u,ms:o,Q:b}[Ee]||String(Ee||"").toLowerCase().replace(/s$/,"")},u:function(Ee){return Ee===void 0}},ie="en",X={};X[ie]=Y;var x="$isDayjsObject",R=function(Ee){return Ee instanceof z||!(!Ee||!Ee[x])},S=function Ee(de,q,oe){var ee;if(!de)return ie;if(typeof de=="string"){var me=de.toLowerCase();X[me]&&(ee=me),q&&(X[me]=q,ee=me);var O=de.split("-");if(!ee&&O.length>1)return Ee(O[0])}else{var te=de.name;X[te]=de,ee=te}return!oe&&ee&&(ie=ee),ee||!oe&&ie},D=function(Ee,de){if(R(Ee))return Ee.clone();var q=typeof de=="object"?de:{};return q.date=Ee,q.args=arguments,new z(q)},M=se;M.l=S,M.i=R,M.w=function(Ee,de){return D(Ee,{locale:de.$L,utc:de.$u,x:de.$x,$offset:de.$offset})};var z=function(){function Ee(q){this.$L=S(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[x]=!0}var de=Ee.prototype;return de.parse=function(q){this.$d=function(oe){var ee=oe.date,me=oe.utc;if(ee===null)return new Date(NaN);if(M.u(ee))return new Date;if(ee instanceof Date)return new Date(ee);if(typeof ee=="string"&&!/Z$/i.test(ee)){var O=ee.match(N);if(O){var te=O[2]-1||0,_e=(O[7]||"0").substring(0,3);return me?new Date(Date.UTC(O[1],te,O[3]||1,O[4]||0,O[5]||0,O[6]||0,_e)):new Date(O[1],te,O[3]||1,O[4]||0,O[5]||0,O[6]||0,_e)}}return new Date(ee)}(q),this.init()},de.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},de.$utils=function(){return M},de.isValid=function(){return this.$d.toString()!==V},de.isSame=function(q,oe){var ee=D(q);return this.startOf(oe)<=ee&&ee<=this.endOf(oe)},de.isAfter=function(q,oe){return D(q)<this.startOf(oe)},de.isBefore=function(q,oe){return this.endOf(oe)<D(q)},de.$g=function(q,oe,ee){return M.u(q)?this[oe]:this.set(ee,q)},de.unix=function(){return Math.floor(this.valueOf()/1e3)},de.valueOf=function(){return this.$d.getTime()},de.startOf=function(q,oe){var ee=this,me=!!M.u(oe)||oe,O=M.p(q),te=function(ot,Me){var Tt=M.w(ee.$u?Date.UTC(ee.$y,Me,ot):new Date(ee.$y,Me,ot),ee);return me?Tt:Tt.endOf(m)},_e=function(ot,Me){return M.w(ee.toDate()[ot].apply(ee.toDate("s"),(me?[0,0,0,0]:[23,59,59,999]).slice(Me)),ee)},fe=this.$W,pe=this.$M,Pe=this.$D,Ne="set"+(this.$u?"UTC":"");switch(O){case I:return me?te(1,0):te(31,11);case v:return me?te(1,pe):te(0,pe+1);case _:var nt=this.$locale().weekStart||0,je=(fe<nt?fe+7:fe)-nt;return te(me?Pe-je:Pe+(6-je),pe);case m:case C:return _e(Ne+"Hours",0);case d:return _e(Ne+"Minutes",1);case h:return _e(Ne+"Seconds",2);case u:return _e(Ne+"Milliseconds",3);default:return this.clone()}},de.endOf=function(q){return this.startOf(q,!1)},de.$set=function(q,oe){var ee,me=M.p(q),O="set"+(this.$u?"UTC":""),te=(ee={},ee[m]=O+"Date",ee[C]=O+"Date",ee[v]=O+"Month",ee[I]=O+"FullYear",ee[d]=O+"Hours",ee[h]=O+"Minutes",ee[u]=O+"Seconds",ee[o]=O+"Milliseconds",ee)[me],_e=me===m?this.$D+(oe-this.$W):oe;if(me===v||me===I){var fe=this.clone().set(C,1);fe.$d[te](_e),fe.init(),this.$d=fe.set(C,Math.min(this.$D,fe.daysInMonth())).$d}else te&&this.$d[te](_e);return this.init(),this},de.set=function(q,oe){return this.clone().$set(q,oe)},de.get=function(q){return this[M.p(q)]()},de.add=function(q,oe){var ee,me=this;q=Number(q);var O=M.p(oe),te=function(pe){var Pe=D(me);return M.w(Pe.date(Pe.date()+Math.round(pe*q)),me)};if(O===v)return this.set(v,this.$M+q);if(O===I)return this.set(I,this.$y+q);if(O===m)return te(1);if(O===_)return te(7);var _e=(ee={},ee[h]=r,ee[d]=s,ee[u]=t,ee)[O]||1,fe=this.$d.getTime()+q*_e;return M.w(fe,this)},de.subtract=function(q,oe){return this.add(-1*q,oe)},de.format=function(q){var oe=this,ee=this.$locale();if(!this.isValid())return ee.invalidDate||V;var me=q||"YYYY-MM-DDTHH:mm:ssZ",O=M.z(this),te=this.$H,_e=this.$m,fe=this.$M,pe=ee.weekdays,Pe=ee.months,Ne=ee.meridiem,nt=function(Me,Tt,Un,vn){return Me&&(Me[Tt]||Me(oe,me))||Un[Tt].slice(0,vn)},je=function(Me){return M.s(te%12||12,Me,"0")},ot=Ne||function(Me,Tt,Un){var vn=Me<12?"AM":"PM";return Un?vn.toLowerCase():vn};return me.replace(B,function(Me,Tt){return Tt||function(Un){switch(Un){case"YY":return String(oe.$y).slice(-2);case"YYYY":return M.s(oe.$y,4,"0");case"M":return fe+1;case"MM":return M.s(fe+1,2,"0");case"MMM":return nt(ee.monthsShort,fe,Pe,3);case"MMMM":return nt(Pe,fe);case"D":return oe.$D;case"DD":return M.s(oe.$D,2,"0");case"d":return String(oe.$W);case"dd":return nt(ee.weekdaysMin,oe.$W,pe,2);case"ddd":return nt(ee.weekdaysShort,oe.$W,pe,3);case"dddd":return pe[oe.$W];case"H":return String(te);case"HH":return M.s(te,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return ot(te,_e,!0);case"A":return ot(te,_e,!1);case"m":return String(_e);case"mm":return M.s(_e,2,"0");case"s":return String(oe.$s);case"ss":return M.s(oe.$s,2,"0");case"SSS":return M.s(oe.$ms,3,"0");case"Z":return O}return null}(Me)||O.replace(":","")})},de.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},de.diff=function(q,oe,ee){var me,O=this,te=M.p(oe),_e=D(q),fe=(_e.utcOffset()-this.utcOffset())*r,pe=this-_e,Pe=function(){return M.m(O,_e)};switch(te){case I:me=Pe()/12;break;case v:me=Pe();break;case b:me=Pe()/3;break;case _:me=(pe-fe)/6048e5;break;case m:me=(pe-fe)/864e5;break;case d:me=pe/s;break;case h:me=pe/r;break;case u:me=pe/t;break;default:me=pe}return ee?me:M.a(me)},de.daysInMonth=function(){return this.endOf(v).$D},de.$locale=function(){return X[this.$L]},de.locale=function(q,oe){if(!q)return this.$L;var ee=this.clone(),me=S(q,oe,!0);return me&&(ee.$L=me),ee},de.clone=function(){return M.w(this.$d,this)},de.toDate=function(){return new Date(this.valueOf())},de.toJSON=function(){return this.isValid()?this.toISOString():null},de.toISOString=function(){return this.$d.toISOString()},de.toString=function(){return this.$d.toUTCString()},Ee}(),k=z.prototype;return D.prototype=k,[["$ms",o],["$s",u],["$m",h],["$H",d],["$W",m],["$M",v],["$y",I],["$D",C]].forEach(function(Ee){k[Ee[1]]=function(de){return this.$g(de,Ee[0],Ee[1])}}),D.extend=function(Ee,de){return Ee.$i||(Ee(de,z,D),Ee.$i=!0),D},D.locale=S,D.isDayjs=R,D.unix=function(Ee){return D(1e3*Ee)},D.en=X[ie],D.Ls=X,D.p={},D})}(Hm)),Hm.exports}var C3=R3();const iw=JE(C3);var Gm={exports:{}},D3=Gm.exports,iC;function P3(){return iC||(iC=1,function(n,e){(function(t,r){n.exports=r()})(D3,function(){return function(t,r,s){t=t||{};var o=r.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(m,_,v,b){return o.fromToBase(m,_,v,b)}s.en.relativeTime=u,o.fromToBase=function(m,_,v,b,I){for(var C,V,N,B=v.$locale().relativeTime||u,Y=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],H=Y.length,se=0;se<H;se+=1){var ie=Y[se];ie.d&&(C=b?s(m).diff(v,ie.d,!0):v.diff(m,ie.d,!0));var X=(t.rounding||Math.round)(Math.abs(C));if(N=C>0,X<=ie.r||!ie.r){X<=1&&se>0&&(ie=Y[se-1]);var x=B[ie.l];I&&(X=I(""+X)),V=typeof x=="string"?x.replace("%d",X):x(X,_,ie.l,N);break}}if(_)return V;var R=N?B.future:B.past;return typeof R=="function"?R(V):R.replace("%s",V)},o.to=function(m,_){return h(m,_,this,!0)},o.from=function(m,_){return h(m,_,this)};var d=function(m){return m.$u?s.utc():s()};o.toNow=function(m){return this.to(d(this),m)},o.fromNow=function(m){return this.from(d(this),m)}}})}(Gm)),Gm.exports}var O3=P3();const x3=JE(O3);iw.extend(x3);const N3=()=>iw().format(),iH=n=>iw(n).fromNow();function k3(n){const e=["cart"],t=Zb.collection(ff.USERS).doc(n).collection(ff.CART),r=async()=>(await t.orderBy("createdAt","desc").get()).docs.map(_=>({..._.data()}))??[],s=rw(),o=()=>s.invalidateQueries({queryKey:e}),u=A3({mutationFn:async({action:d,cart:m})=>{switch(d){case"CREATE":await t.doc(m.id).set({...m,createdAt:N3(),isOnBasket:!0});return;case"UPDATE":await t.doc(m.id).update(m);return;case"DELETE":await t.doc(m.id).delete();return;default:return}},onError:d=>{console.log(d)},onSuccess:()=>{console.log("query fn succeed"),o()}});return{queryKey:e,fetchFn:r,updateFn:async(d,m)=>{await u.mutateAsync({action:d,cart:m})}}}const V3=({children:n})=>{const{user:e}=$C(),{updateFn:t,queryKey:r,fetchFn:s}=k3(e==null?void 0:e.uid),{data:o,isPending:u,error:h}=I3({queryFn:s,queryKey:r}),d=K.useCallback(async b=>{try{const I=o==null?void 0:o.find(C=>C.id===b.id);return console.log("adding item"),await t("CREATE",I?{...I,quan:I.quan+1}:{...b,quan:1}),console.log("item added"),{success:!0}}catch(I){return console.log(I.message),{message:I.message}}},[t,o]),m=K.useCallback(async b=>{try{return await t("UPDATE",b),{success:!0}}catch(I){return{message:I.message}}},[t]),_=K.useCallback(async b=>{try{return await t("DELETE",b),{success:!0}}catch(I){return{message:I.message}}},[t]),v=K.useCallback(async()=>{try{return o==null||o.map(async b=>{await t("DELETE",b)}),{success:!0}}catch(b){return{message:b.message}}},[t,o]);return qe.jsx(KC.Provider,{value:{addToCart:d,cart:o??[],emptyCart:v,error:h,isPending:u,removeAnItem:_,updateAnItem:m},children:n})};vk.createRoot(document.getElementById("root")).render(qe.jsx(K.StrictMode,{children:qe.jsx(d3,{client:new o3,children:qe.jsx($5,{children:qe.jsx(V3,{children:qe.jsx(JM,{})})})})}));export{ff as F,JV as G,jC as L,U3 as O,F3 as a,tH as b,IC as c,Zb as d,$C as e,Am as f,P5 as g,z3 as h,rw as i,qe as j,A3 as k,B3 as l,k3 as m,N3 as n,lo as o,OC as p,L3 as q,K as r,nH as s,qM as t,I3 as u,iH as v};
