import{r as x,j as e,v as m,t as p,u,L as h}from"./index-Dp55R4ab.js";import{u as j}from"./orderquery-CfNuMZaa.js";import{p as i}from"./pricfy-QJrL3HHz.js";import{e as f}from"./index-BVpbCNk8.js";import"./v4-C6aID195.js";const g=o=>{const{amount:n,createdAt:l,items:r,orderId:c,orderName:d}=o;console.log(r);const[a,t]=x.useState(!1);return e.jsxs("div",{className:"border border-border dark:border-darkBorder p-2.5 rounded",children:[e.jsxs("div",{className:"flex gap-x-2.5",children:[e.jsx("div",{className:"w-40 aspect-square",children:e.jsx("img",{src:r[0].imgs[0]||"/default-image.jpg",alt:r[0].name||"상품 이미지 없음",className:"object-cover h-full"})}),e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl",children:d}),e.jsxs("p",{children:["주문번호: ",c]}),e.jsxs("p",{children:["구매날짜: ",l," ",e.jsx("span",{children:m(l)})]}),e.jsxs("p",{children:[i(n.value)," 원"]})]}),e.jsxs("button",{onClick:()=>t(s=>!s),className:"flex h-auto p-1 flex-row gap-x-2.5 hover:shadow-none",children:[a?"접기":"펼쳐보기",e.jsx(f,{className:p("transition duration-500",a&&"rotate-180")})]})]})]}),a&&e.jsx("ul",{className:"flex flex-wrap gap-1 mt-2.5",children:r.map(s=>e.jsx("li",{children:e.jsxs("div",{className:"flex gap-x-1 border rounded p-1 px-2 border-border dark:border-darkBorder",children:[e.jsx("p",{children:s.name}),e.jsxs("p",{children:["구매수량: ",s.quan,"개"]}),e.jsxs("p",{children:[i(s.quan*Number(s.price))," 원"]})]})},s.id))})]})},k=o=>{const{fetchFn:n,queryKey:l}=j(o.uid),{data:r,isPending:c,error:d}=u({queryKey:l,queryFn:n});return c?e.jsx(h,{className:"top-0 bg-white/80 dark:bg-darkBorder/80"}):d||!r?e.jsxs("h1",{children:["Error: ",d.message]}):e.jsxs("div",{className:"flex flex-col gap-y-2.5 p-5",children:[e.jsx("h1",{className:"font-black text-2xl",children:"주문내역"}),e.jsx("ul",{className:"flex flex-col gap-y-2.5",children:r.map(a=>e.jsx("li",{children:e.jsx(g,{...a})},a.orderId))})]})};export{k as default};
