import{d as y,F as o,i as p,k as E,n as m}from"./index-Dp55R4ab.js";import{v as w}from"./v4-C6aID195.js";function C(s){const c=["order"],a=y.collection(o.USERS).doc(s).collection(o.ORDERS),r=async()=>(await a.orderBy("createdAt","desc").get()).docs.map(n=>({...n.data()}))??[],d=p(),u=()=>d.invalidateQueries({queryKey:c}),i=E({mutationFn:async({action:e,order:t})=>{const n=w(),l={...t,orderId:n,createdAt:m()};switch(e){case"CREATE":await a.doc(n).set(l);return;case"UPDATE":await a.doc(t.orderId).update(t);return;case"DELETE":await a.doc(t.orderId).delete();return;default:return}},onError:e=>{console.log(e)},onSuccess:()=>{u()}});return{queryKey:c,fetchFn:r,updateFn:async(e,t)=>{await i.mutateAsync({action:e,order:t})}}}export{C as u};
