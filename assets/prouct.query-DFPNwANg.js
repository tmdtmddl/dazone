import{d as u,F as l,i as y,k as m}from"./index-Dp55R4ab.js";function p(n){const s=["product",n==null?void 0:n.uid],e=u.collection(l.PRODUCTS),o=async()=>n?(await e.where("uid","==",n==null?void 0:n.uid).get()).docs.map(r=>({...r.data()}))??[]:(await e.get()).docs.map(c=>({...c.data()}))??[],i=y(),d=m({mutationFn:async({action:t,product:a})=>{switch(t){case"CREATE":await e.doc(a.id).set(a);return;case"UPDATE":await e.doc(a.id).update(a);return;case"DELETE":await e.doc(a.id).delete();return}},onSuccess:t=>{console.log(t),console.log("success"),i.invalidateQueries({queryKey:s})},onError:t=>{alert(t.message),console.log(t)}});return{queryKey:s,queryFn:o,addProduct:async t=>{try{return await d.mutateAsync({action:"CREATE",product:t}),{success:!0}}catch(a){return{message:a.message}}}}}export{p as u};
